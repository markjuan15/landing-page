var j0=a=>{throw TypeError(a)};var Td=(a,t,e)=>t.has(a)||j0("Cannot "+e);var Kt=(a,t,e)=>(Td(a,t,"read from private field"),e?e.call(a):t.get(a)),Gn=(a,t,e)=>t.has(a)?j0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),tn=(a,t,e,n)=>(Td(a,t,"write to private field"),n?n.call(a,e):t.set(a,e),e),qn=(a,t,e)=>(Td(a,t,"access private method"),e);var V0=(a,t,e,n)=>({set _(r){tn(a,t,r,e)},get _(){return Kt(a,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function eA(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var _d={exports:{}},io={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function fx(){if(z0)return io;z0=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:a,type:n,key:l,ref:r!==void 0?r:null,props:o}}return io.Fragment=t,io.jsx=e,io.jsxs=e,io}var H0;function px(){return H0||(H0=1,_d.exports=fx()),_d.exports}var j=px(),Cd={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function mx(){if(G0)return St;G0=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function x(L,Y,tt){this.props=L,this.context=Y,this.refs=A,this.updater=tt||b}x.prototype.isReactComponent={},x.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function E(){}E.prototype=x.prototype;function T(L,Y,tt){this.props=L,this.context=Y,this.refs=A,this.updater=tt||b}var C=T.prototype=new E;C.constructor=T,S(C,x.prototype),C.isPureReactComponent=!0;var D=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function B(L,Y,tt,Z,et,vt){return tt=vt.ref,{$$typeof:a,type:L,key:Y,ref:tt!==void 0?tt:null,props:vt}}function I(L,Y){return B(L.type,Y,void 0,void 0,void 0,L.props)}function q(L){return typeof L=="object"&&L!==null&&L.$$typeof===a}function K(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(tt){return Y[tt]})}var J=/\/+/g;function ot(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?K(""+L.key):Y.toString(36)}function dt(){}function at(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(dt,dt):(L.status="pending",L.then(function(Y){L.status==="pending"&&(L.status="fulfilled",L.value=Y)},function(Y){L.status==="pending"&&(L.status="rejected",L.reason=Y)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ct(L,Y,tt,Z,et){var vt=typeof L;(vt==="undefined"||vt==="boolean")&&(L=null);var rt=!1;if(L===null)rt=!0;else switch(vt){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(L.$$typeof){case a:case t:rt=!0;break;case p:return rt=L._init,ct(rt(L._payload),Y,tt,Z,et)}}if(rt)return et=et(L),rt=Z===""?"."+ot(L,0):Z,D(et)?(tt="",rt!=null&&(tt=rt.replace(J,"$&/")+"/"),ct(et,Y,tt,"",function(Yt){return Yt})):et!=null&&(q(et)&&(et=I(et,tt+(et.key==null||L&&L.key===et.key?"":(""+et.key).replace(J,"$&/")+"/")+rt)),Y.push(et)),1;rt=0;var Et=Z===""?".":Z+":";if(D(L))for(var Mt=0;Mt<L.length;Mt++)Z=L[Mt],vt=Et+ot(Z,Mt),rt+=ct(Z,Y,tt,vt,et);else if(Mt=v(L),typeof Mt=="function")for(L=Mt.call(L),Mt=0;!(Z=L.next()).done;)Z=Z.value,vt=Et+ot(Z,Mt++),rt+=ct(Z,Y,tt,vt,et);else if(vt==="object"){if(typeof L.then=="function")return ct(at(L),Y,tt,Z,et);throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return rt}function k(L,Y,tt){if(L==null)return L;var Z=[],et=0;return ct(L,Z,"","",function(vt){return Y.call(tt,vt,et++)}),Z}function z(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(tt){(L._status===0||L._status===-1)&&(L._status=1,L._result=tt)},function(tt){(L._status===0||L._status===-1)&&(L._status=2,L._result=tt)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var Q=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function lt(){}return St.Children={map:k,forEach:function(L,Y,tt){k(L,function(){Y.apply(this,arguments)},tt)},count:function(L){var Y=0;return k(L,function(){Y++}),Y},toArray:function(L){return k(L,function(Y){return Y})||[]},only:function(L){if(!q(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},St.Component=x,St.Fragment=e,St.Profiler=r,St.PureComponent=T,St.StrictMode=n,St.Suspense=d,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,St.__COMPILER_RUNTIME={__proto__:null,c:function(L){return R.H.useMemoCache(L)}},St.cache=function(L){return function(){return L.apply(null,arguments)}},St.cloneElement=function(L,Y,tt){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Z=S({},L.props),et=L.key,vt=void 0;if(Y!=null)for(rt in Y.ref!==void 0&&(vt=void 0),Y.key!==void 0&&(et=""+Y.key),Y)!N.call(Y,rt)||rt==="key"||rt==="__self"||rt==="__source"||rt==="ref"&&Y.ref===void 0||(Z[rt]=Y[rt]);var rt=arguments.length-2;if(rt===1)Z.children=tt;else if(1<rt){for(var Et=Array(rt),Mt=0;Mt<rt;Mt++)Et[Mt]=arguments[Mt+2];Z.children=Et}return B(L.type,et,void 0,void 0,vt,Z)},St.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},St.createElement=function(L,Y,tt){var Z,et={},vt=null;if(Y!=null)for(Z in Y.key!==void 0&&(vt=""+Y.key),Y)N.call(Y,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(et[Z]=Y[Z]);var rt=arguments.length-2;if(rt===1)et.children=tt;else if(1<rt){for(var Et=Array(rt),Mt=0;Mt<rt;Mt++)Et[Mt]=arguments[Mt+2];et.children=Et}if(L&&L.defaultProps)for(Z in rt=L.defaultProps,rt)et[Z]===void 0&&(et[Z]=rt[Z]);return B(L,vt,void 0,void 0,null,et)},St.createRef=function(){return{current:null}},St.forwardRef=function(L){return{$$typeof:u,render:L}},St.isValidElement=q,St.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:z}},St.memo=function(L,Y){return{$$typeof:f,type:L,compare:Y===void 0?null:Y}},St.startTransition=function(L){var Y=R.T,tt={};R.T=tt;try{var Z=L(),et=R.S;et!==null&&et(tt,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(lt,Q)}catch(vt){Q(vt)}finally{R.T=Y}},St.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},St.use=function(L){return R.H.use(L)},St.useActionState=function(L,Y,tt){return R.H.useActionState(L,Y,tt)},St.useCallback=function(L,Y){return R.H.useCallback(L,Y)},St.useContext=function(L){return R.H.useContext(L)},St.useDebugValue=function(){},St.useDeferredValue=function(L,Y){return R.H.useDeferredValue(L,Y)},St.useEffect=function(L,Y,tt){var Z=R.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(L,Y)},St.useId=function(){return R.H.useId()},St.useImperativeHandle=function(L,Y,tt){return R.H.useImperativeHandle(L,Y,tt)},St.useInsertionEffect=function(L,Y){return R.H.useInsertionEffect(L,Y)},St.useLayoutEffect=function(L,Y){return R.H.useLayoutEffect(L,Y)},St.useMemo=function(L,Y){return R.H.useMemo(L,Y)},St.useOptimistic=function(L,Y){return R.H.useOptimistic(L,Y)},St.useReducer=function(L,Y,tt){return R.H.useReducer(L,Y,tt)},St.useRef=function(L){return R.H.useRef(L)},St.useState=function(L){return R.H.useState(L)},St.useSyncExternalStore=function(L,Y,tt){return R.H.useSyncExternalStore(L,Y,tt)},St.useTransition=function(){return R.H.useTransition()},St.version="19.1.1",St}var q0;function Gf(){return q0||(q0=1,Cd.exports=mx()),Cd.exports}var P=Gf();const Fn=eA(P);var Rd={exports:{}},so={},Md={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function gx(){return X0||(X0=1,(function(a){function t(k,z){var Q=k.length;k.push(z);t:for(;0<Q;){var lt=Q-1>>>1,L=k[lt];if(0<r(L,z))k[lt]=z,k[Q]=L,Q=lt;else break t}}function e(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var z=k[0],Q=k.pop();if(Q!==z){k[0]=Q;t:for(var lt=0,L=k.length,Y=L>>>1;lt<Y;){var tt=2*(lt+1)-1,Z=k[tt],et=tt+1,vt=k[et];if(0>r(Z,Q))et<L&&0>r(vt,Z)?(k[lt]=vt,k[et]=Q,lt=et):(k[lt]=Z,k[tt]=Q,lt=tt);else if(et<L&&0>r(vt,Q))k[lt]=vt,k[et]=Q,lt=et;else break t}}return z}function r(k,z){var Q=k.sortIndex-z.sortIndex;return Q!==0?Q:k.id-z.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();a.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,g=null,v=3,b=!1,S=!1,A=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(k){for(var z=e(f);z!==null;){if(z.callback===null)n(f);else if(z.startTime<=k)n(f),z.sortIndex=z.expirationTime,t(d,z);else break;z=e(f)}}function R(k){if(A=!1,D(k),!S)if(e(d)!==null)S=!0,N||(N=!0,ot());else{var z=e(f);z!==null&&ct(R,z.startTime-k)}}var N=!1,B=-1,I=5,q=-1;function K(){return x?!0:!(a.unstable_now()-q<I)}function J(){if(x=!1,N){var k=a.unstable_now();q=k;var z=!0;try{t:{S=!1,A&&(A=!1,T(B),B=-1),b=!0;var Q=v;try{e:{for(D(k),g=e(d);g!==null&&!(g.expirationTime>k&&K());){var lt=g.callback;if(typeof lt=="function"){g.callback=null,v=g.priorityLevel;var L=lt(g.expirationTime<=k);if(k=a.unstable_now(),typeof L=="function"){g.callback=L,D(k),z=!0;break e}g===e(d)&&n(d),D(k)}else n(d);g=e(d)}if(g!==null)z=!0;else{var Y=e(f);Y!==null&&ct(R,Y.startTime-k),z=!1}}break t}finally{g=null,v=Q,b=!1}z=void 0}}finally{z?ot():N=!1}}}var ot;if(typeof C=="function")ot=function(){C(J)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,at=dt.port2;dt.port1.onmessage=J,ot=function(){at.postMessage(null)}}else ot=function(){E(J,0)};function ct(k,z){B=E(function(){k(a.unstable_now())},z)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(k){k.callback=null},a.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_next=function(k){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var Q=v;v=z;try{return k()}finally{v=Q}},a.unstable_requestPaint=function(){x=!0},a.unstable_runWithPriority=function(k,z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Q=v;v=k;try{return z()}finally{v=Q}},a.unstable_scheduleCallback=function(k,z,Q){var lt=a.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?lt+Q:lt):Q=lt,k){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Q+L,k={id:p++,callback:z,priorityLevel:k,startTime:Q,expirationTime:L,sortIndex:-1},Q>lt?(k.sortIndex=Q,t(f,k),e(d)===null&&k===e(f)&&(A?(T(B),B=-1):A=!0,ct(R,Q-lt))):(k.sortIndex=L,t(d,k),S||b||(S=!0,N||(N=!0,ot()))),k},a.unstable_shouldYield=K,a.unstable_wrapCallback=function(k){var z=v;return function(){var Q=v;v=z;try{return k.apply(this,arguments)}finally{v=Q}}}})(Dd)),Dd}var Y0;function yx(){return Y0||(Y0=1,Md.exports=gx()),Md.exports}var Ld={exports:{}},Ue={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function vx(){if($0)return Ue;$0=1;var a=Gf();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:d,containerInfo:f,implementation:p}}var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ue.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ue.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},Ue.flushSync=function(d){var f=l.T,p=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=f,n.p=p,n.d.f()}},Ue.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Ue.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ue.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:b}):p==="script"&&n.d.X(d,{crossOrigin:g,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ue.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Ue.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin);n.d.L(d,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ue.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Ue.requestFormReset=function(d){n.d.r(d)},Ue.unstable_batchedUpdates=function(d,f){return d(f)},Ue.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},Ue.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ue.version="19.1.1",Ue}var K0;function bx(){if(K0)return Ld.exports;K0=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Ld.exports=vx(),Ld.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function Ax(){if(W0)return so;W0=1;var a=yx(),t=Gf(),e=bx();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function l(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function u(i){if(o(i)!==i)throw Error(n(188))}function d(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(n(188));return s!==i?null:i}for(var c=i,h=s;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return u(m),i;if(y===h)return u(m),s;y=y.sibling}throw Error(n(188))}if(c.return!==h.return)c=m,h=y;else{for(var w=!1,_=m.child;_;){if(_===c){w=!0,c=m,h=y;break}if(_===h){w=!0,h=m,c=y;break}_=_.sibling}if(!w){for(_=y.child;_;){if(_===c){w=!0,c=y,h=m;break}if(_===h){w=!0,h=y,c=m;break}_=_.sibling}if(!w)throw Error(n(189))}}if(c.alternate!==h)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:s}function f(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=f(i),s!==null)return s;i=i.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ot(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var dt=Symbol.for("react.client.reference");function at(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===dt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case x:return"Profiler";case A:return"StrictMode";case R:return"Suspense";case N:return"SuspenseList";case q:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case C:return(i.displayName||"Context")+".Provider";case T:return(i._context.displayName||"Context")+".Consumer";case D:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return s=i.displayName||null,s!==null?s:at(i.type)||"Memo";case I:s=i._payload,i=i._init;try{return at(i(s))}catch{}}return null}var ct=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},lt=[],L=-1;function Y(i){return{current:i}}function tt(i){0>L||(i.current=lt[L],lt[L]=null,L--)}function Z(i,s){L++,lt[L]=i.current,i.current=s}var et=Y(null),vt=Y(null),rt=Y(null),Et=Y(null);function Mt(i,s){switch(Z(rt,s),Z(vt,i),Z(et,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?p0(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=p0(s),i=m0(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}tt(et),Z(et,i)}function Yt(){tt(et),tt(vt),tt(rt)}function zt(i){i.memoizedState!==null&&Z(Et,i);var s=et.current,c=m0(s,i.type);s!==c&&(Z(vt,i),Z(et,c))}function $e(i){vt.current===i&&(tt(et),tt(vt)),Et.current===i&&(tt(Et),Zr._currentValue=Q)}var an=Object.prototype.hasOwnProperty,Dt=a.unstable_scheduleCallback,Ft=a.unstable_cancelCallback,ue=a.unstable_shouldYield,ge=a.unstable_requestPaint,De=a.unstable_now,rs=a.unstable_getCurrentPriorityLevel,qs=a.unstable_ImmediatePriority,Jo=a.unstable_UserBlockingPriority,ii=a.unstable_NormalPriority,hu=a.unstable_LowPriority,tl=a.unstable_IdlePriority,du=a.log,fu=a.unstable_setDisableYieldValue,os=null,ae=null;function He(i){if(typeof du=="function"&&fu(i),ae&&typeof ae.setStrictMode=="function")try{ae.setStrictMode(os,i)}catch{}}var re=Math.clz32?Math.clz32:J1,rr=Math.log,Z1=Math.LN2;function J1(i){return i>>>=0,i===0?32:31-(rr(i)/Z1|0)|0}var el=256,nl=4194304;function ls(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function il(i,s,c){var h=i.pendingLanes;if(h===0)return 0;var m=0,y=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var _=h&134217727;return _!==0?(h=_&~y,h!==0?m=ls(h):(w&=_,w!==0?m=ls(w):c||(c=_&~i,c!==0&&(m=ls(c))))):(_=h&~y,_!==0?m=ls(_):w!==0?m=ls(w):c||(c=h&~i,c!==0&&(m=ls(c)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,c=s&-s,y>=c||y===32&&(c&4194048)!==0)?s:m}function or(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function tw(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qp(){var i=el;return el<<=1,(el&4194048)===0&&(el=256),i}function Zp(){var i=nl;return nl<<=1,(nl&62914560)===0&&(nl=4194304),i}function pu(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function lr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ew(i,s,c,h,m,y){var w=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var _=i.entanglements,M=i.expirationTimes,V=i.hiddenUpdates;for(c=w&~c;0<c;){var X=31-re(c),W=1<<X;_[X]=0,M[X]=-1;var H=V[X];if(H!==null)for(V[X]=null,X=0;X<H.length;X++){var G=H[X];G!==null&&(G.lane&=-536870913)}c&=~W}h!==0&&Jp(i,h,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(w&~s))}function Jp(i,s,c){i.pendingLanes|=s,i.suspendedLanes&=~s;var h=31-re(s);i.entangledLanes|=s,i.entanglements[h]=i.entanglements[h]|1073741824|c&4194090}function tm(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var h=31-re(c),m=1<<h;m&s|i[h]&s&&(i[h]|=s),c&=~m}}function mu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function gu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function em(){var i=z.p;return i!==0?i:(i=window.event,i===void 0?32:N0(i.type))}function nw(i,s){var c=z.p;try{return z.p=i,s()}finally{z.p=c}}var Ri=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Ri,Ke="__reactProps$"+Ri,Xs="__reactContainer$"+Ri,yu="__reactEvents$"+Ri,iw="__reactListeners$"+Ri,sw="__reactHandles$"+Ri,nm="__reactResources$"+Ri,cr="__reactMarker$"+Ri;function vu(i){delete i[Fe],delete i[Ke],delete i[yu],delete i[iw],delete i[sw]}function Ys(i){var s=i[Fe];if(s)return s;for(var c=i.parentNode;c;){if(s=c[Xs]||c[Fe]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=b0(i);i!==null;){if(c=i[Fe])return c;i=b0(i)}return s}i=c,c=i.parentNode}return null}function $s(i){if(i=i[Fe]||i[Xs]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ur(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function Ks(i){var s=i[nm];return s||(s=i[nm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ee(i){i[cr]=!0}var im=new Set,sm={};function cs(i,s){Ws(i,s),Ws(i+"Capture",s)}function Ws(i,s){for(sm[i]=s,i=0;i<s.length;i++)im.add(s[i])}var aw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),am={},rm={};function rw(i){return an.call(rm,i)?!0:an.call(am,i)?!1:aw.test(i)?rm[i]=!0:(am[i]=!0,!1)}function sl(i,s,c){if(rw(s))if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+c)}}function al(i,s,c){if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+c)}}function si(i,s,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(s,c,""+h)}}var bu,om;function Qs(i){if(bu===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);bu=s&&s[1]||"",om=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bu+i+om}var Au=!1;function Su(i,s){if(!i||Au)return"";Au=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var H=G}Reflect.construct(i,[],W)}else{try{W.call()}catch(G){H=G}i.call(W.prototype)}}else{try{throw Error()}catch(G){H=G}(W=i())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),w=y[0],_=y[1];if(w&&_){var M=w.split(`
`),V=_.split(`
`);for(m=h=0;h<M.length&&!M[h].includes("DetermineComponentFrameRoot");)h++;for(;m<V.length&&!V[m].includes("DetermineComponentFrameRoot");)m++;if(h===M.length||m===V.length)for(h=M.length-1,m=V.length-1;1<=h&&0<=m&&M[h]!==V[m];)m--;for(;1<=h&&0<=m;h--,m--)if(M[h]!==V[m]){if(h!==1||m!==1)do if(h--,m--,0>m||M[h]!==V[m]){var X=`
`+M[h].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=h&&0<=m);break}}}finally{Au=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Qs(c):""}function ow(i){switch(i.tag){case 26:case 27:case 5:return Qs(i.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return Su(i.type,!1);case 11:return Su(i.type.render,!1);case 1:return Su(i.type,!0);case 31:return Qs("Activity");default:return""}}function lm(i){try{var s="";do s+=ow(i),i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function yn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function cm(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lw(i){var s=cm(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),h=""+i[s];if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(w){h=""+w,y.call(this,w)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function rl(i){i._valueTracker||(i._valueTracker=lw(i))}function um(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return i&&(h=cm(i)?i.checked?"true":"false":i.value),i=h,i!==c?(s.setValue(i),!0):!1}function ol(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var cw=/[\n"\\]/g;function vn(i){return i.replace(cw,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function wu(i,s,c,h,m,y,w,_){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+yn(s)):i.value!==""+yn(s)&&(i.value=""+yn(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Eu(i,w,yn(s)):c!=null?Eu(i,w,yn(c)):h!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.name=""+yn(_):i.removeAttribute("name")}function hm(i,s,c,h,m,y,w,_){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;c=c!=null?""+yn(c):"",s=s!=null?""+yn(s):c,_||s===i.value||(i.value=s),i.defaultValue=s}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=_?i.checked:!!h,i.defaultChecked=!!h,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Eu(i,s,c){s==="number"&&ol(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Zs(i,s,c,h){if(i=i.options,s){s={};for(var m=0;m<c.length;m++)s["$"+c[m]]=!0;for(c=0;c<i.length;c++)m=s.hasOwnProperty("$"+i[c].value),i[c].selected!==m&&(i[c].selected=m),m&&h&&(i[c].defaultSelected=!0)}else{for(c=""+yn(c),s=null,m=0;m<i.length;m++){if(i[m].value===c){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function dm(i,s,c){if(s!=null&&(s=""+yn(s),s!==i.value&&(i.value=s),c==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=c!=null?""+yn(c):""}function fm(i,s,c,h){if(s==null){if(h!=null){if(c!=null)throw Error(n(92));if(ct(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),s=c}c=yn(s),i.defaultValue=c,h=i.textContent,h===c&&h!==""&&h!==null&&(i.value=h)}function Js(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var uw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pm(i,s,c){var h=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":h?i.setProperty(s,c):typeof c!="number"||c===0||uw.has(s)?s==="float"?i.cssFloat=c:i[s]=(""+c).trim():i[s]=c+"px"}function mm(i,s,c){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var m in s)h=s[m],s.hasOwnProperty(m)&&c[m]!==h&&pm(i,m,h)}else for(var y in s)s.hasOwnProperty(y)&&pm(i,y,s[y])}function xu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ll(i){return dw.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Tu=null;function _u(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ta=null,ea=null;function gm(i){var s=$s(i);if(s&&(i=s.stateNode)){var c=i[Ke]||null;t:switch(i=s.stateNode,s.type){case"input":if(wu(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==i&&h.form===i.form){var m=h[Ke]||null;if(!m)throw Error(n(90));wu(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<c.length;s++)h=c[s],h.form===i.form&&um(h)}break t;case"textarea":dm(i,c.value,c.defaultValue);break t;case"select":s=c.value,s!=null&&Zs(i,!!c.multiple,s,!1)}}}var Cu=!1;function ym(i,s,c){if(Cu)return i(s,c);Cu=!0;try{var h=i(s);return h}finally{if(Cu=!1,(ta!==null||ea!==null)&&(Yl(),ta&&(s=ta,i=ea,ea=ta=null,gm(s),i)))for(s=0;s<i.length;s++)gm(i[s])}}function hr(i,s){var c=i.stateNode;if(c===null)return null;var h=c[Ke]||null;if(h===null)return null;c=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,s,typeof c));return c}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ru=!1;if(ai)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){Ru=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{Ru=!1}var Mi=null,Mu=null,cl=null;function vm(){if(cl)return cl;var i,s=Mu,c=s.length,h,m="value"in Mi?Mi.value:Mi.textContent,y=m.length;for(i=0;i<c&&s[i]===m[i];i++);var w=c-i;for(h=1;h<=w&&s[c-h]===m[y-h];h++);return cl=m.slice(i,1<h?1-h:void 0)}function ul(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function hl(){return!0}function bm(){return!1}function We(i){function s(c,h,m,y,w){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(c=i[_],this[_]=c?c(y):y[_]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?hl:bm,this.isPropagationStopped=bm,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),s}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dl=We(us),fr=p({},us,{view:0,detail:0}),fw=We(fr),Du,Lu,pr,fl=p({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pr&&(pr&&i.type==="mousemove"?(Du=i.screenX-pr.screenX,Lu=i.screenY-pr.screenY):Lu=Du=0,pr=i),Du)},movementY:function(i){return"movementY"in i?i.movementY:Lu}}),Am=We(fl),pw=p({},fl,{dataTransfer:0}),mw=We(pw),gw=p({},fr,{relatedTarget:0}),Pu=We(gw),yw=p({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),vw=We(yw),bw=p({},us,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Aw=We(bw),Sw=p({},us,{data:0}),Sm=We(Sw),ww={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ew={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tw(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=xw[i])?!!s[i]:!1}function Ou(){return Tw}var _w=p({},fr,{key:function(i){if(i.key){var s=ww[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ul(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ew[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(i){return i.type==="keypress"?ul(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ul(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Cw=We(_w),Rw=p({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wm=We(Rw),Mw=p({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),Dw=We(Mw),Lw=p({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pw=We(Lw),Ow=p({},fl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Nw=We(Ow),kw=p({},us,{newState:0,oldState:0}),Bw=We(kw),Fw=[9,13,27,32],Nu=ai&&"CompositionEvent"in window,mr=null;ai&&"documentMode"in document&&(mr=document.documentMode);var Iw=ai&&"TextEvent"in window&&!mr,Em=ai&&(!Nu||mr&&8<mr&&11>=mr),xm=" ",Tm=!1;function _m(i,s){switch(i){case"keyup":return Fw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var na=!1;function Uw(i,s){switch(i){case"compositionend":return Cm(s);case"keypress":return s.which!==32?null:(Tm=!0,xm);case"textInput":return i=s.data,i===xm&&Tm?null:i;default:return null}}function jw(i,s){if(na)return i==="compositionend"||!Nu&&_m(i,s)?(i=vm(),cl=Mu=Mi=null,na=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Em&&s.locale!=="ko"?null:s.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Vw[i.type]:s==="textarea"}function Mm(i,s,c,h){ta?ea?ea.push(h):ea=[h]:ta=h,s=Jl(s,"onChange"),0<s.length&&(c=new dl("onChange","change",null,c,h),i.push({event:c,listeners:s}))}var gr=null,yr=null;function zw(i){c0(i,0)}function pl(i){var s=ur(i);if(um(s))return i}function Dm(i,s){if(i==="change")return s}var Lm=!1;if(ai){var ku;if(ai){var Bu="oninput"in document;if(!Bu){var Pm=document.createElement("div");Pm.setAttribute("oninput","return;"),Bu=typeof Pm.oninput=="function"}ku=Bu}else ku=!1;Lm=ku&&(!document.documentMode||9<document.documentMode)}function Om(){gr&&(gr.detachEvent("onpropertychange",Nm),yr=gr=null)}function Nm(i){if(i.propertyName==="value"&&pl(yr)){var s=[];Mm(s,yr,i,_u(i)),ym(zw,s)}}function Hw(i,s,c){i==="focusin"?(Om(),gr=s,yr=c,gr.attachEvent("onpropertychange",Nm)):i==="focusout"&&Om()}function Gw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pl(yr)}function qw(i,s){if(i==="click")return pl(s)}function Xw(i,s){if(i==="input"||i==="change")return pl(s)}function Yw(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var rn=typeof Object.is=="function"?Object.is:Yw;function vr(i,s){if(rn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!an.call(s,m)||!rn(i[m],s[m]))return!1}return!0}function km(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Bm(i,s){var c=km(i);i=0;for(var h;c;){if(c.nodeType===3){if(h=i+c.textContent.length,i<=s&&h>=s)return{node:c,offset:s-i};i=h}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=km(c)}}function Fm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Fm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Im(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=ol(i.document);s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=ol(i.document)}return s}function Fu(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var $w=ai&&"documentMode"in document&&11>=document.documentMode,ia=null,Iu=null,br=null,Uu=!1;function Um(i,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Uu||ia==null||ia!==ol(h)||(h=ia,"selectionStart"in h&&Fu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),br&&vr(br,h)||(br=h,h=Jl(Iu,"onSelect"),0<h.length&&(s=new dl("onSelect","select",null,s,c),i.push({event:s,listeners:h}),s.target=ia)))}function hs(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var sa={animationend:hs("Animation","AnimationEnd"),animationiteration:hs("Animation","AnimationIteration"),animationstart:hs("Animation","AnimationStart"),transitionrun:hs("Transition","TransitionRun"),transitionstart:hs("Transition","TransitionStart"),transitioncancel:hs("Transition","TransitionCancel"),transitionend:hs("Transition","TransitionEnd")},ju={},jm={};ai&&(jm=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function ds(i){if(ju[i])return ju[i];if(!sa[i])return i;var s=sa[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in jm)return ju[i]=s[c];return i}var Vm=ds("animationend"),zm=ds("animationiteration"),Hm=ds("animationstart"),Kw=ds("transitionrun"),Ww=ds("transitionstart"),Qw=ds("transitioncancel"),Gm=ds("transitionend"),qm=new Map,Vu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vu.push("scrollEnd");function Pn(i,s){qm.set(i,s),cs(s,[i])}var Xm=new WeakMap;function bn(i,s){if(typeof i=="object"&&i!==null){var c=Xm.get(i);return c!==void 0?c:(s={value:i,source:s,stack:lm(s)},Xm.set(i,s),s)}return{value:i,source:s,stack:lm(s)}}var An=[],aa=0,zu=0;function ml(){for(var i=aa,s=zu=aa=0;s<i;){var c=An[s];An[s++]=null;var h=An[s];An[s++]=null;var m=An[s];An[s++]=null;var y=An[s];if(An[s++]=null,h!==null&&m!==null){var w=h.pending;w===null?m.next=m:(m.next=w.next,w.next=m),h.pending=m}y!==0&&Ym(c,m,y)}}function gl(i,s,c,h){An[aa++]=i,An[aa++]=s,An[aa++]=c,An[aa++]=h,zu|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Hu(i,s,c,h){return gl(i,s,c,h),yl(i)}function ra(i,s){return gl(i,null,null,s),yl(i)}function Ym(i,s,c){i.lanes|=c;var h=i.alternate;h!==null&&(h.lanes|=c);for(var m=!1,y=i.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&s!==null&&(m=31-re(c),i=y.hiddenUpdates,h=i[m],h===null?i[m]=[s]:h.push(s),s.lane=c|536870912),y):null}function yl(i){if(50<Gr)throw Gr=0,Kh=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var oa={};function Zw(i,s,c,h){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(i,s,c,h){return new Zw(i,s,c,h)}function Gu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ri(i,s){var c=i.alternate;return c===null?(c=on(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function $m(i,s){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,s=c.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function vl(i,s,c,h,m,y){var w=0;if(h=i,typeof i=="function")Gu(i)&&(w=1);else if(typeof i=="string")w=tx(i,c,et.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case q:return i=on(31,c,s,m),i.elementType=q,i.lanes=y,i;case S:return fs(c.children,m,y,s);case A:w=8,m|=24;break;case x:return i=on(12,c,s,m|2),i.elementType=x,i.lanes=y,i;case R:return i=on(13,c,s,m),i.elementType=R,i.lanes=y,i;case N:return i=on(19,c,s,m),i.elementType=N,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:case C:w=10;break t;case T:w=9;break t;case D:w=11;break t;case B:w=14;break t;case I:w=16,h=null;break t}w=29,c=Error(n(130,i===null?"null":typeof i,"")),h=null}return s=on(w,c,s,m),s.elementType=i,s.type=h,s.lanes=y,s}function fs(i,s,c,h){return i=on(7,i,h,s),i.lanes=c,i}function qu(i,s,c){return i=on(6,i,null,s),i.lanes=c,i}function Xu(i,s,c){return s=on(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var la=[],ca=0,bl=null,Al=0,Sn=[],wn=0,ps=null,oi=1,li="";function ms(i,s){la[ca++]=Al,la[ca++]=bl,bl=i,Al=s}function Km(i,s,c){Sn[wn++]=oi,Sn[wn++]=li,Sn[wn++]=ps,ps=i;var h=oi;i=li;var m=32-re(h)-1;h&=~(1<<m),c+=1;var y=32-re(s)+m;if(30<y){var w=m-m%5;y=(h&(1<<w)-1).toString(32),h>>=w,m-=w,oi=1<<32-re(s)+m|c<<m|h,li=y+i}else oi=1<<y|c<<m|h,li=i}function Yu(i){i.return!==null&&(ms(i,1),Km(i,1,0))}function $u(i){for(;i===bl;)bl=la[--ca],la[ca]=null,Al=la[--ca],la[ca]=null;for(;i===ps;)ps=Sn[--wn],Sn[wn]=null,li=Sn[--wn],Sn[wn]=null,oi=Sn[--wn],Sn[wn]=null}var Ge=null,oe=null,Nt=!1,gs=null,Un=!1,Ku=Error(n(519));function ys(i){var s=Error(n(418,""));throw wr(bn(s,i)),Ku}function Wm(i){var s=i.stateNode,c=i.type,h=i.memoizedProps;switch(s[Fe]=i,s[Ke]=h,c){case"dialog":Ct("cancel",s),Ct("close",s);break;case"iframe":case"object":case"embed":Ct("load",s);break;case"video":case"audio":for(c=0;c<Xr.length;c++)Ct(Xr[c],s);break;case"source":Ct("error",s);break;case"img":case"image":case"link":Ct("error",s),Ct("load",s);break;case"details":Ct("toggle",s);break;case"input":Ct("invalid",s),hm(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),rl(s);break;case"select":Ct("invalid",s);break;case"textarea":Ct("invalid",s),fm(s,h.value,h.defaultValue,h.children),rl(s)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||h.suppressHydrationWarning===!0||f0(s.textContent,c)?(h.popover!=null&&(Ct("beforetoggle",s),Ct("toggle",s)),h.onScroll!=null&&Ct("scroll",s),h.onScrollEnd!=null&&Ct("scrollend",s),h.onClick!=null&&(s.onclick=tc),s=!0):s=!1,s||ys(i)}function Qm(i){for(Ge=i.return;Ge;)switch(Ge.tag){case 5:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Ge=Ge.return}}function Ar(i){if(i!==Ge)return!1;if(!Nt)return Qm(i),Nt=!0,!1;var s=i.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||hd(i.type,i.memoizedProps)),c=!c),c&&oe&&ys(i),Qm(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(s===0){oe=Nn(i.nextSibling);break t}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;i=i.nextSibling}oe=null}}else s===27?(s=oe,qi(i.type)?(i=md,md=null,oe=i):oe=s):oe=Ge?Nn(i.stateNode.nextSibling):null;return!0}function Sr(){oe=Ge=null,Nt=!1}function Zm(){var i=gs;return i!==null&&(Je===null?Je=i:Je.push.apply(Je,i),gs=null),i}function wr(i){gs===null?gs=[i]:gs.push(i)}var Wu=Y(null),vs=null,ci=null;function Di(i,s,c){Z(Wu,s._currentValue),s._currentValue=c}function ui(i){i._currentValue=Wu.current,tt(Wu)}function Qu(i,s,c){for(;i!==null;){var h=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),i===c)break;i=i.return}}function Zu(i,s,c,h){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var w=m.child;y=y.firstContext;t:for(;y!==null;){var _=y;y=m;for(var M=0;M<s.length;M++)if(_.context===s[M]){y.lanes|=c,_=y.alternate,_!==null&&(_.lanes|=c),Qu(y.return,c,i),h||(w=null);break t}y=_.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(n(341));w.lanes|=c,y=w.alternate,y!==null&&(y.lanes|=c),Qu(w,c,i),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function Er(i,s,c,h){i=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(n(387));if(w=w.memoizedProps,w!==null){var _=m.type;rn(m.pendingProps.value,w.value)||(i!==null?i.push(_):i=[_])}}else if(m===Et.current){if(w=m.alternate,w===null)throw Error(n(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Zr):i=[Zr])}m=m.return}i!==null&&Zu(s,i,c,h),s.flags|=262144}function Sl(i){for(i=i.firstContext;i!==null;){if(!rn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function bs(i){vs=i,ci=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ie(i){return Jm(vs,i)}function wl(i,s){return vs===null&&bs(i),Jm(i,s)}function Jm(i,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ci===null){if(i===null)throw Error(n(308));ci=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ci=ci.next=s;return c}var Jw=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(c,h){i.push(h)}};this.abort=function(){s.aborted=!0,i.forEach(function(c){return c()})}},tE=a.unstable_scheduleCallback,eE=a.unstable_NormalPriority,Se={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ju(){return{controller:new Jw,data:new Map,refCount:0}}function xr(i){i.refCount--,i.refCount===0&&tE(eE,function(){i.controller.abort()})}var Tr=null,th=0,ua=0,ha=null;function nE(i,s){if(Tr===null){var c=Tr=[];th=0,ua=nd(),ha={status:"pending",value:void 0,then:function(h){c.push(h)}}}return th++,s.then(tg,tg),s}function tg(){if(--th===0&&Tr!==null){ha!==null&&(ha.status="fulfilled");var i=Tr;Tr=null,ua=0,ha=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function iE(i,s){var c=[],h={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return i.then(function(){h.status="fulfilled",h.value=s;for(var m=0;m<c.length;m++)(0,c[m])(s)},function(m){for(h.status="rejected",h.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),h}var eg=k.S;k.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&nE(i,s),eg!==null&&eg(i,s)};var As=Y(null);function eh(){var i=As.current;return i!==null?i:Xt.pooledCache}function El(i,s){s===null?Z(As,As.current):Z(As,s.pool)}function ng(){var i=eh();return i===null?null:{parent:Se._currentValue,pool:i}}var _r=Error(n(460)),ig=Error(n(474)),xl=Error(n(542)),nh={then:function(){}};function sg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Tl(){}function ag(i,s,c){switch(c=i[c],c===void 0?i.push(s):c!==s&&(s.then(Tl,Tl),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,og(i),i;default:if(typeof s.status=="string")s.then(Tl,Tl);else{if(i=Xt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(h){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=h}},function(h){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,og(i),i}throw Cr=s,_r}}var Cr=null;function rg(){if(Cr===null)throw Error(n(459));var i=Cr;return Cr=null,i}function og(i){if(i===_r||i===xl)throw Error(n(483))}var Li=!1;function ih(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sh(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Pi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Oi(i,s,c){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(kt&2)!==0){var m=h.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),h.pending=s,s=yl(i),Ym(i,null,c),s}return gl(i,h,s,c),yl(i)}function Rr(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var h=s.lanes;h&=i.pendingLanes,c|=h,s.lanes=c,tm(i,c)}}function ah(i,s){var c=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=w:y=y.next=w,c=c.next}while(c!==null);y===null?m=y=s:y=y.next=s}else m=y=s;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}var rh=!1;function Mr(){if(rh){var i=ha;if(i!==null)throw i}}function Dr(i,s,c,h){rh=!1;var m=i.updateQueue;Li=!1;var y=m.firstBaseUpdate,w=m.lastBaseUpdate,_=m.shared.pending;if(_!==null){m.shared.pending=null;var M=_,V=M.next;M.next=null,w===null?y=V:w.next=V,w=M;var X=i.alternate;X!==null&&(X=X.updateQueue,_=X.lastBaseUpdate,_!==w&&(_===null?X.firstBaseUpdate=V:_.next=V,X.lastBaseUpdate=M))}if(y!==null){var W=m.baseState;w=0,X=V=M=null,_=y;do{var H=_.lane&-536870913,G=H!==_.lane;if(G?(Pt&H)===H:(h&H)===H){H!==0&&H===ua&&(rh=!0),X!==null&&(X=X.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var gt=i,ft=_;H=s;var jt=c;switch(ft.tag){case 1:if(gt=ft.payload,typeof gt=="function"){W=gt.call(jt,W,H);break t}W=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=ft.payload,H=typeof gt=="function"?gt.call(jt,W,H):gt,H==null)break t;W=p({},W,H);break t;case 2:Li=!0}}H=_.callback,H!==null&&(i.flags|=64,G&&(i.flags|=8192),G=m.callbacks,G===null?m.callbacks=[H]:G.push(H))}else G={lane:H,tag:_.tag,payload:_.payload,callback:_.callback,next:null},X===null?(V=X=G,M=W):X=X.next=G,w|=H;if(_=_.next,_===null){if(_=m.shared.pending,_===null)break;G=_,_=G.next,G.next=null,m.lastBaseUpdate=G,m.shared.pending=null}}while(!0);X===null&&(M=W),m.baseState=M,m.firstBaseUpdate=V,m.lastBaseUpdate=X,y===null&&(m.shared.lanes=0),Vi|=w,i.lanes=w,i.memoizedState=W}}function lg(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function cg(i,s){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)lg(c[i],s)}var da=Y(null),_l=Y(0);function ug(i,s){i=yi,Z(_l,i),Z(da,s),yi=i|s.baseLanes}function oh(){Z(_l,yi),Z(da,da.current)}function lh(){yi=_l.current,tt(da),tt(_l)}var Ni=0,xt=null,It=null,ye=null,Cl=!1,fa=!1,Ss=!1,Rl=0,Lr=0,pa=null,sE=0;function he(){throw Error(n(321))}function ch(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!rn(i[c],s[c]))return!1;return!0}function uh(i,s,c,h,m,y){return Ni=y,xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=i===null||i.memoizedState===null?Yg:$g,Ss=!1,y=c(h,m),Ss=!1,fa&&(y=dg(s,c,h,m)),hg(i),y}function hg(i){k.H=Nl;var s=It!==null&&It.next!==null;if(Ni=0,ye=It=xt=null,Cl=!1,Lr=0,pa=null,s)throw Error(n(300));i===null||xe||(i=i.dependencies,i!==null&&Sl(i)&&(xe=!0))}function dg(i,s,c,h){xt=i;var m=0;do{if(fa&&(pa=null),Lr=0,fa=!1,25<=m)throw Error(n(301));if(m+=1,ye=It=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}k.H=hE,y=s(c,h)}while(fa);return y}function aE(){var i=k.H,s=i.useState()[0];return s=typeof s.then=="function"?Pr(s):s,i=i.useState()[0],(It!==null?It.memoizedState:null)!==i&&(xt.flags|=1024),s}function hh(){var i=Rl!==0;return Rl=0,i}function dh(i,s,c){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~c}function fh(i){if(Cl){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Cl=!1}Ni=0,ye=It=xt=null,fa=!1,Lr=Rl=0,pa=null}function Qe(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?xt.memoizedState=ye=i:ye=ye.next=i,ye}function ve(){if(It===null){var i=xt.alternate;i=i!==null?i.memoizedState:null}else i=It.next;var s=ye===null?xt.memoizedState:ye.next;if(s!==null)ye=s,It=i;else{if(i===null)throw xt.alternate===null?Error(n(467)):Error(n(310));It=i,i={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},ye===null?xt.memoizedState=ye=i:ye=ye.next=i}return ye}function ph(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pr(i){var s=Lr;return Lr+=1,pa===null&&(pa=[]),i=ag(pa,i,s),s=xt,(ye===null?s.memoizedState:ye.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?Yg:$g),i}function Ml(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Pr(i);if(i.$$typeof===C)return Ie(i)}throw Error(n(438,String(i)))}function mh(i){var s=null,c=xt.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var h=xt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=ph(),xt.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(i),h=0;h<i;h++)c[h]=K;return s.index++,c}function hi(i,s){return typeof s=="function"?s(i):s}function Dl(i){var s=ve();return gh(s,It,i)}function gh(i,s,c){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=c;var m=i.baseQueue,y=h.pending;if(y!==null){if(m!==null){var w=m.next;m.next=y.next,y.next=w}s.baseQueue=m=y,h.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{s=m.next;var _=w=null,M=null,V=s,X=!1;do{var W=V.lane&-536870913;if(W!==V.lane?(Pt&W)===W:(Ni&W)===W){var H=V.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),W===ua&&(X=!0);else if((Ni&H)===H){V=V.next,H===ua&&(X=!0);continue}else W={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},M===null?(_=M=W,w=y):M=M.next=W,xt.lanes|=H,Vi|=H;W=V.action,Ss&&c(y,W),y=V.hasEagerState?V.eagerState:c(y,W)}else H={lane:W,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},M===null?(_=M=H,w=y):M=M.next=H,xt.lanes|=W,Vi|=W;V=V.next}while(V!==null&&V!==s);if(M===null?w=y:M.next=_,!rn(y,i.memoizedState)&&(xe=!0,X&&(c=ha,c!==null)))throw c;i.memoizedState=y,i.baseState=w,i.baseQueue=M,h.lastRenderedState=y}return m===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function yh(i){var s=ve(),c=s.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var h=c.dispatch,m=c.pending,y=s.memoizedState;if(m!==null){c.pending=null;var w=m=m.next;do y=i(y,w.action),w=w.next;while(w!==m);rn(y,s.memoizedState)||(xe=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,h]}function fg(i,s,c){var h=xt,m=ve(),y=Nt;if(y){if(c===void 0)throw Error(n(407));c=c()}else c=s();var w=!rn((It||m).memoizedState,c);w&&(m.memoizedState=c,xe=!0),m=m.queue;var _=gg.bind(null,h,m,i);if(Or(2048,8,_,[i]),m.getSnapshot!==s||w||ye!==null&&ye.memoizedState.tag&1){if(h.flags|=2048,ma(9,Ll(),mg.bind(null,h,m,c,s),null),Xt===null)throw Error(n(349));y||(Ni&124)!==0||pg(h,s,c)}return c}function pg(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=xt.updateQueue,s===null?(s=ph(),xt.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function mg(i,s,c,h){s.value=c,s.getSnapshot=h,yg(s)&&vg(i)}function gg(i,s,c){return c(function(){yg(s)&&vg(i)})}function yg(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!rn(i,c)}catch{return!0}}function vg(i){var s=ra(i,2);s!==null&&dn(s,i,2)}function vh(i){var s=Qe();if(typeof i=="function"){var c=i;if(i=c(),Ss){He(!0);try{c()}finally{He(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:i},s}function bg(i,s,c,h){return i.baseState=c,gh(i,It,typeof h=="function"?h:hi)}function rE(i,s,c,h,m){if(Ol(i))throw Error(n(485));if(i=s.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};k.T!==null?c(!0):y.isTransition=!1,h(y),c=s.pending,c===null?(y.next=s.pending=y,Ag(s,y)):(y.next=c.next,s.pending=c.next=y)}}function Ag(i,s){var c=s.action,h=s.payload,m=i.state;if(s.isTransition){var y=k.T,w={};k.T=w;try{var _=c(m,h),M=k.S;M!==null&&M(w,_),Sg(i,s,_)}catch(V){bh(i,s,V)}finally{k.T=y}}else try{y=c(m,h),Sg(i,s,y)}catch(V){bh(i,s,V)}}function Sg(i,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){wg(i,s,h)},function(h){return bh(i,s,h)}):wg(i,s,c)}function wg(i,s,c){s.status="fulfilled",s.value=c,Eg(s),i.state=c,s=i.pending,s!==null&&(c=s.next,c===s?i.pending=null:(c=c.next,s.next=c,Ag(i,c)))}function bh(i,s,c){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=c,Eg(s),s=s.next;while(s!==h)}i.action=null}function Eg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function xg(i,s){return s}function Tg(i,s){if(Nt){var c=Xt.formState;if(c!==null){t:{var h=xt;if(Nt){if(oe){e:{for(var m=oe,y=Un;m.nodeType!==8;){if(!y){m=null;break e}if(m=Nn(m.nextSibling),m===null){m=null;break e}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){oe=Nn(m.nextSibling),h=m.data==="F!";break t}}ys(h)}h=!1}h&&(s=c[0])}}return c=Qe(),c.memoizedState=c.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xg,lastRenderedState:s},c.queue=h,c=Gg.bind(null,xt,h),h.dispatch=c,h=vh(!1),y=xh.bind(null,xt,!1,h.queue),h=Qe(),m={state:s,dispatch:null,action:i,pending:null},h.queue=m,c=rE.bind(null,xt,m,y,c),m.dispatch=c,h.memoizedState=i,[s,c,!1]}function _g(i){var s=ve();return Cg(s,It,i)}function Cg(i,s,c){if(s=gh(i,s,xg)[0],i=Dl(hi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Pr(s)}catch(w){throw w===_r?xl:w}else h=s;s=ve();var m=s.queue,y=m.dispatch;return c!==s.memoizedState&&(xt.flags|=2048,ma(9,Ll(),oE.bind(null,m,c),null)),[h,y,i]}function oE(i,s){i.action=s}function Rg(i){var s=ve(),c=It;if(c!==null)return Cg(s,c,i);ve(),s=s.memoizedState,c=ve();var h=c.queue.dispatch;return c.memoizedState=i,[s,h,!1]}function ma(i,s,c,h){return i={tag:i,create:c,deps:h,inst:s,next:null},s=xt.updateQueue,s===null&&(s=ph(),xt.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=i.next=i:(h=c.next,c.next=i,i.next=h,s.lastEffect=i),i}function Ll(){return{destroy:void 0,resource:void 0}}function Mg(){return ve().memoizedState}function Pl(i,s,c,h){var m=Qe();h=h===void 0?null:h,xt.flags|=i,m.memoizedState=ma(1|s,Ll(),c,h)}function Or(i,s,c,h){var m=ve();h=h===void 0?null:h;var y=m.memoizedState.inst;It!==null&&h!==null&&ch(h,It.memoizedState.deps)?m.memoizedState=ma(s,y,c,h):(xt.flags|=i,m.memoizedState=ma(1|s,y,c,h))}function Dg(i,s){Pl(8390656,8,i,s)}function Lg(i,s){Or(2048,8,i,s)}function Pg(i,s){return Or(4,2,i,s)}function Og(i,s){return Or(4,4,i,s)}function Ng(i,s){if(typeof s=="function"){i=i();var c=s(i);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function kg(i,s,c){c=c!=null?c.concat([i]):null,Or(4,4,Ng.bind(null,s,i),c)}function Ah(){}function Bg(i,s){var c=ve();s=s===void 0?null:s;var h=c.memoizedState;return s!==null&&ch(s,h[1])?h[0]:(c.memoizedState=[i,s],i)}function Fg(i,s){var c=ve();s=s===void 0?null:s;var h=c.memoizedState;if(s!==null&&ch(s,h[1]))return h[0];if(h=i(),Ss){He(!0);try{i()}finally{He(!1)}}return c.memoizedState=[h,s],h}function Sh(i,s,c){return c===void 0||(Ni&1073741824)!==0?i.memoizedState=s:(i.memoizedState=c,i=jy(),xt.lanes|=i,Vi|=i,c)}function Ig(i,s,c,h){return rn(c,s)?c:da.current!==null?(i=Sh(i,c,h),rn(i,s)||(xe=!0),i):(Ni&42)===0?(xe=!0,i.memoizedState=c):(i=jy(),xt.lanes|=i,Vi|=i,s)}function Ug(i,s,c,h,m){var y=z.p;z.p=y!==0&&8>y?y:8;var w=k.T,_={};k.T=_,xh(i,!1,s,c);try{var M=m(),V=k.S;if(V!==null&&V(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var X=iE(M,h);Nr(i,s,X,hn(i))}else Nr(i,s,h,hn(i))}catch(W){Nr(i,s,{then:function(){},status:"rejected",reason:W},hn())}finally{z.p=y,k.T=w}}function lE(){}function wh(i,s,c,h){if(i.tag!==5)throw Error(n(476));var m=jg(i).queue;Ug(i,m,s,Q,c===null?lE:function(){return Vg(i),c(h)})}function jg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:Q},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:c},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Vg(i){var s=jg(i).next.queue;Nr(i,s,{},hn())}function Eh(){return Ie(Zr)}function zg(){return ve().memoizedState}function Hg(){return ve().memoizedState}function cE(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var c=hn();i=Pi(c);var h=Oi(s,i,c);h!==null&&(dn(h,s,c),Rr(h,s,c)),s={cache:Ju()},i.payload=s;return}s=s.return}}function uE(i,s,c){var h=hn();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Ol(i)?qg(s,c):(c=Hu(i,s,c,h),c!==null&&(dn(c,i,h),Xg(c,s,h)))}function Gg(i,s,c){var h=hn();Nr(i,s,c,h)}function Nr(i,s,c,h){var m={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ol(i))qg(s,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,_=y(w,c);if(m.hasEagerState=!0,m.eagerState=_,rn(_,w))return gl(i,s,m,0),Xt===null&&ml(),!1}catch{}finally{}if(c=Hu(i,s,m,h),c!==null)return dn(c,i,h),Xg(c,s,h),!0}return!1}function xh(i,s,c,h){if(h={lane:2,revertLane:nd(),action:h,hasEagerState:!1,eagerState:null,next:null},Ol(i)){if(s)throw Error(n(479))}else s=Hu(i,c,h,2),s!==null&&dn(s,i,2)}function Ol(i){var s=i.alternate;return i===xt||s!==null&&s===xt}function qg(i,s){fa=Cl=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function Xg(i,s,c){if((c&4194048)!==0){var h=s.lanes;h&=i.pendingLanes,c|=h,s.lanes=c,tm(i,c)}}var Nl={readContext:Ie,use:Ml,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},Yg={readContext:Ie,use:Ml,useCallback:function(i,s){return Qe().memoizedState=[i,s===void 0?null:s],i},useContext:Ie,useEffect:Dg,useImperativeHandle:function(i,s,c){c=c!=null?c.concat([i]):null,Pl(4194308,4,Ng.bind(null,s,i),c)},useLayoutEffect:function(i,s){return Pl(4194308,4,i,s)},useInsertionEffect:function(i,s){Pl(4,2,i,s)},useMemo:function(i,s){var c=Qe();s=s===void 0?null:s;var h=i();if(Ss){He(!0);try{i()}finally{He(!1)}}return c.memoizedState=[h,s],h},useReducer:function(i,s,c){var h=Qe();if(c!==void 0){var m=c(s);if(Ss){He(!0);try{c(s)}finally{He(!1)}}}else m=s;return h.memoizedState=h.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},h.queue=i,i=i.dispatch=uE.bind(null,xt,i),[h.memoizedState,i]},useRef:function(i){var s=Qe();return i={current:i},s.memoizedState=i},useState:function(i){i=vh(i);var s=i.queue,c=Gg.bind(null,xt,s);return s.dispatch=c,[i.memoizedState,c]},useDebugValue:Ah,useDeferredValue:function(i,s){var c=Qe();return Sh(c,i,s)},useTransition:function(){var i=vh(!1);return i=Ug.bind(null,xt,i.queue,!0,!1),Qe().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,c){var h=xt,m=Qe();if(Nt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=s(),Xt===null)throw Error(n(349));(Pt&124)!==0||pg(h,s,c)}m.memoizedState=c;var y={value:c,getSnapshot:s};return m.queue=y,Dg(gg.bind(null,h,y,i),[i]),h.flags|=2048,ma(9,Ll(),mg.bind(null,h,y,c,s),null),c},useId:function(){var i=Qe(),s=Xt.identifierPrefix;if(Nt){var c=li,h=oi;c=(h&~(1<<32-re(h)-1)).toString(32)+c,s=""+s+"R"+c,c=Rl++,0<c&&(s+="H"+c.toString(32)),s+=""}else c=sE++,s=""+s+"r"+c.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:Eh,useFormState:Tg,useActionState:Tg,useOptimistic:function(i){var s=Qe();s.memoizedState=s.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=xh.bind(null,xt,!0,c),c.dispatch=s,[i,s]},useMemoCache:mh,useCacheRefresh:function(){return Qe().memoizedState=cE.bind(null,xt)}},$g={readContext:Ie,use:Ml,useCallback:Bg,useContext:Ie,useEffect:Lg,useImperativeHandle:kg,useInsertionEffect:Pg,useLayoutEffect:Og,useMemo:Fg,useReducer:Dl,useRef:Mg,useState:function(){return Dl(hi)},useDebugValue:Ah,useDeferredValue:function(i,s){var c=ve();return Ig(c,It.memoizedState,i,s)},useTransition:function(){var i=Dl(hi)[0],s=ve().memoizedState;return[typeof i=="boolean"?i:Pr(i),s]},useSyncExternalStore:fg,useId:zg,useHostTransitionStatus:Eh,useFormState:_g,useActionState:_g,useOptimistic:function(i,s){var c=ve();return bg(c,It,i,s)},useMemoCache:mh,useCacheRefresh:Hg},hE={readContext:Ie,use:Ml,useCallback:Bg,useContext:Ie,useEffect:Lg,useImperativeHandle:kg,useInsertionEffect:Pg,useLayoutEffect:Og,useMemo:Fg,useReducer:yh,useRef:Mg,useState:function(){return yh(hi)},useDebugValue:Ah,useDeferredValue:function(i,s){var c=ve();return It===null?Sh(c,i,s):Ig(c,It.memoizedState,i,s)},useTransition:function(){var i=yh(hi)[0],s=ve().memoizedState;return[typeof i=="boolean"?i:Pr(i),s]},useSyncExternalStore:fg,useId:zg,useHostTransitionStatus:Eh,useFormState:Rg,useActionState:Rg,useOptimistic:function(i,s){var c=ve();return It!==null?bg(c,It,i,s):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:mh,useCacheRefresh:Hg},ga=null,kr=0;function kl(i){var s=kr;return kr+=1,ga===null&&(ga=[]),ag(ga,i,s)}function Br(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Bl(i,s){throw s.$$typeof===g?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Kg(i){var s=i._init;return s(i._payload)}function Wg(i){function s(F,O){if(i){var U=F.deletions;U===null?(F.deletions=[O],F.flags|=16):U.push(O)}}function c(F,O){if(!i)return null;for(;O!==null;)s(F,O),O=O.sibling;return null}function h(F){for(var O=new Map;F!==null;)F.key!==null?O.set(F.key,F):O.set(F.index,F),F=F.sibling;return O}function m(F,O){return F=ri(F,O),F.index=0,F.sibling=null,F}function y(F,O,U){return F.index=U,i?(U=F.alternate,U!==null?(U=U.index,U<O?(F.flags|=67108866,O):U):(F.flags|=67108866,O)):(F.flags|=1048576,O)}function w(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function _(F,O,U,$){return O===null||O.tag!==6?(O=qu(U,F.mode,$),O.return=F,O):(O=m(O,U),O.return=F,O)}function M(F,O,U,$){var st=U.type;return st===S?X(F,O,U.props.children,$,U.key):O!==null&&(O.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===I&&Kg(st)===O.type)?(O=m(O,U.props),Br(O,U),O.return=F,O):(O=vl(U.type,U.key,U.props,null,F.mode,$),Br(O,U),O.return=F,O)}function V(F,O,U,$){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Xu(U,F.mode,$),O.return=F,O):(O=m(O,U.children||[]),O.return=F,O)}function X(F,O,U,$,st){return O===null||O.tag!==7?(O=fs(U,F.mode,$,st),O.return=F,O):(O=m(O,U),O.return=F,O)}function W(F,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=qu(""+O,F.mode,U),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case v:return U=vl(O.type,O.key,O.props,null,F.mode,U),Br(U,O),U.return=F,U;case b:return O=Xu(O,F.mode,U),O.return=F,O;case I:var $=O._init;return O=$(O._payload),W(F,O,U)}if(ct(O)||ot(O))return O=fs(O,F.mode,U,null),O.return=F,O;if(typeof O.then=="function")return W(F,kl(O),U);if(O.$$typeof===C)return W(F,wl(F,O),U);Bl(F,O)}return null}function H(F,O,U,$){var st=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return st!==null?null:_(F,O,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case v:return U.key===st?M(F,O,U,$):null;case b:return U.key===st?V(F,O,U,$):null;case I:return st=U._init,U=st(U._payload),H(F,O,U,$)}if(ct(U)||ot(U))return st!==null?null:X(F,O,U,$,null);if(typeof U.then=="function")return H(F,O,kl(U),$);if(U.$$typeof===C)return H(F,O,wl(F,U),$);Bl(F,U)}return null}function G(F,O,U,$,st){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return F=F.get(U)||null,_(O,F,""+$,st);if(typeof $=="object"&&$!==null){switch($.$$typeof){case v:return F=F.get($.key===null?U:$.key)||null,M(O,F,$,st);case b:return F=F.get($.key===null?U:$.key)||null,V(O,F,$,st);case I:var Tt=$._init;return $=Tt($._payload),G(F,O,U,$,st)}if(ct($)||ot($))return F=F.get(U)||null,X(O,F,$,st,null);if(typeof $.then=="function")return G(F,O,U,kl($),st);if($.$$typeof===C)return G(F,O,U,wl(O,$),st);Bl(O,$)}return null}function gt(F,O,U,$){for(var st=null,Tt=null,ut=O,pt=O=0,_e=null;ut!==null&&pt<U.length;pt++){ut.index>pt?(_e=ut,ut=null):_e=ut.sibling;var Ot=H(F,ut,U[pt],$);if(Ot===null){ut===null&&(ut=_e);break}i&&ut&&Ot.alternate===null&&s(F,ut),O=y(Ot,O,pt),Tt===null?st=Ot:Tt.sibling=Ot,Tt=Ot,ut=_e}if(pt===U.length)return c(F,ut),Nt&&ms(F,pt),st;if(ut===null){for(;pt<U.length;pt++)ut=W(F,U[pt],$),ut!==null&&(O=y(ut,O,pt),Tt===null?st=ut:Tt.sibling=ut,Tt=ut);return Nt&&ms(F,pt),st}for(ut=h(ut);pt<U.length;pt++)_e=G(ut,F,pt,U[pt],$),_e!==null&&(i&&_e.alternate!==null&&ut.delete(_e.key===null?pt:_e.key),O=y(_e,O,pt),Tt===null?st=_e:Tt.sibling=_e,Tt=_e);return i&&ut.forEach(function(Wi){return s(F,Wi)}),Nt&&ms(F,pt),st}function ft(F,O,U,$){if(U==null)throw Error(n(151));for(var st=null,Tt=null,ut=O,pt=O=0,_e=null,Ot=U.next();ut!==null&&!Ot.done;pt++,Ot=U.next()){ut.index>pt?(_e=ut,ut=null):_e=ut.sibling;var Wi=H(F,ut,Ot.value,$);if(Wi===null){ut===null&&(ut=_e);break}i&&ut&&Wi.alternate===null&&s(F,ut),O=y(Wi,O,pt),Tt===null?st=Wi:Tt.sibling=Wi,Tt=Wi,ut=_e}if(Ot.done)return c(F,ut),Nt&&ms(F,pt),st;if(ut===null){for(;!Ot.done;pt++,Ot=U.next())Ot=W(F,Ot.value,$),Ot!==null&&(O=y(Ot,O,pt),Tt===null?st=Ot:Tt.sibling=Ot,Tt=Ot);return Nt&&ms(F,pt),st}for(ut=h(ut);!Ot.done;pt++,Ot=U.next())Ot=G(ut,F,pt,Ot.value,$),Ot!==null&&(i&&Ot.alternate!==null&&ut.delete(Ot.key===null?pt:Ot.key),O=y(Ot,O,pt),Tt===null?st=Ot:Tt.sibling=Ot,Tt=Ot);return i&&ut.forEach(function(dx){return s(F,dx)}),Nt&&ms(F,pt),st}function jt(F,O,U,$){if(typeof U=="object"&&U!==null&&U.type===S&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case v:t:{for(var st=U.key;O!==null;){if(O.key===st){if(st=U.type,st===S){if(O.tag===7){c(F,O.sibling),$=m(O,U.props.children),$.return=F,F=$;break t}}else if(O.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===I&&Kg(st)===O.type){c(F,O.sibling),$=m(O,U.props),Br($,U),$.return=F,F=$;break t}c(F,O);break}else s(F,O);O=O.sibling}U.type===S?($=fs(U.props.children,F.mode,$,U.key),$.return=F,F=$):($=vl(U.type,U.key,U.props,null,F.mode,$),Br($,U),$.return=F,F=$)}return w(F);case b:t:{for(st=U.key;O!==null;){if(O.key===st)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){c(F,O.sibling),$=m(O,U.children||[]),$.return=F,F=$;break t}else{c(F,O);break}else s(F,O);O=O.sibling}$=Xu(U,F.mode,$),$.return=F,F=$}return w(F);case I:return st=U._init,U=st(U._payload),jt(F,O,U,$)}if(ct(U))return gt(F,O,U,$);if(ot(U)){if(st=ot(U),typeof st!="function")throw Error(n(150));return U=st.call(U),ft(F,O,U,$)}if(typeof U.then=="function")return jt(F,O,kl(U),$);if(U.$$typeof===C)return jt(F,O,wl(F,U),$);Bl(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(c(F,O.sibling),$=m(O,U),$.return=F,F=$):(c(F,O),$=qu(U,F.mode,$),$.return=F,F=$),w(F)):c(F,O)}return function(F,O,U,$){try{kr=0;var st=jt(F,O,U,$);return ga=null,st}catch(ut){if(ut===_r||ut===xl)throw ut;var Tt=on(29,ut,null,F.mode);return Tt.lanes=$,Tt.return=F,Tt}finally{}}}var ya=Wg(!0),Qg=Wg(!1),En=Y(null),jn=null;function ki(i){var s=i.alternate;Z(we,we.current&1),Z(En,i),jn===null&&(s===null||da.current!==null||s.memoizedState!==null)&&(jn=i)}function Zg(i){if(i.tag===22){if(Z(we,we.current),Z(En,i),jn===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(jn=i)}}else Bi()}function Bi(){Z(we,we.current),Z(En,En.current)}function di(i){tt(En),jn===i&&(jn=null),tt(we)}var we=Y(0);function Fl(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||pd(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Th(i,s,c,h){s=i.memoizedState,c=c(h,s),c=c==null?s:p({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var _h={enqueueSetState:function(i,s,c){i=i._reactInternals;var h=hn(),m=Pi(h);m.payload=s,c!=null&&(m.callback=c),s=Oi(i,m,h),s!==null&&(dn(s,i,h),Rr(s,i,h))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var h=hn(),m=Pi(h);m.tag=1,m.payload=s,c!=null&&(m.callback=c),s=Oi(i,m,h),s!==null&&(dn(s,i,h),Rr(s,i,h))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=hn(),h=Pi(c);h.tag=2,s!=null&&(h.callback=s),s=Oi(i,h,c),s!==null&&(dn(s,i,c),Rr(s,i,c))}};function Jg(i,s,c,h,m,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,w):s.prototype&&s.prototype.isPureReactComponent?!vr(c,h)||!vr(m,y):!0}function ty(i,s,c,h){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==i&&_h.enqueueReplaceState(s,s.state,null)}function ws(i,s){var c=s;if("ref"in s){c={};for(var h in s)h!=="ref"&&(c[h]=s[h])}if(i=i.defaultProps){c===s&&(c=p({},c));for(var m in i)c[m]===void 0&&(c[m]=i[m])}return c}var Il=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function ey(i){Il(i)}function ny(i){console.error(i)}function iy(i){Il(i)}function Ul(i,s){try{var c=i.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function sy(i,s,c){try{var h=i.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Ch(i,s,c){return c=Pi(c),c.tag=3,c.payload={element:null},c.callback=function(){Ul(i,s)},c}function ay(i){return i=Pi(i),i.tag=3,i}function ry(i,s,c,h){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;i.payload=function(){return m(y)},i.callback=function(){sy(s,c,h)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){sy(s,c,h),typeof m!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var _=h.stack;this.componentDidCatch(h.value,{componentStack:_!==null?_:""})})}function dE(i,s,c,h,m){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=c.alternate,s!==null&&Er(s,c,m,!0),c=En.current,c!==null){switch(c.tag){case 13:return jn===null?Qh():c.alternate===null&&le===0&&(le=3),c.flags&=-257,c.flags|=65536,c.lanes=m,h===nh?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([h]):s.add(h),Jh(i,h,m)),!1;case 22:return c.flags|=65536,h===nh?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([h]):c.add(h)),Jh(i,h,m)),!1}throw Error(n(435,c.tag))}return Jh(i,h,m),Qh(),!1}if(Nt)return s=En.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,h!==Ku&&(i=Error(n(422),{cause:h}),wr(bn(i,c)))):(h!==Ku&&(s=Error(n(423),{cause:h}),wr(bn(s,c))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,h=bn(h,c),m=Ch(i.stateNode,h,m),ah(i,m),le!==4&&(le=2)),!1;var y=Error(n(520),{cause:h});if(y=bn(y,c),Hr===null?Hr=[y]:Hr.push(y),le!==4&&(le=2),s===null)return!0;h=bn(h,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,i=m&-m,c.lanes|=i,i=Ch(c.stateNode,h,i),ah(c,i),!1;case 1:if(s=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zi===null||!zi.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=ay(m),ry(m,i,c,h),ah(c,m),!1}c=c.return}while(c!==null);return!1}var oy=Error(n(461)),xe=!1;function Le(i,s,c,h){s.child=i===null?Qg(s,null,c,h):ya(s,i.child,c,h)}function ly(i,s,c,h,m){c=c.render;var y=s.ref;if("ref"in h){var w={};for(var _ in h)_!=="ref"&&(w[_]=h[_])}else w=h;return bs(s),h=uh(i,s,c,w,y,m),_=hh(),i!==null&&!xe?(dh(i,s,m),fi(i,s,m)):(Nt&&_&&Yu(s),s.flags|=1,Le(i,s,h,m),s.child)}function cy(i,s,c,h,m){if(i===null){var y=c.type;return typeof y=="function"&&!Gu(y)&&y.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=y,uy(i,s,y,h,m)):(i=vl(c.type,null,h,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!kh(i,m)){var w=y.memoizedProps;if(c=c.compare,c=c!==null?c:vr,c(w,h)&&i.ref===s.ref)return fi(i,s,m)}return s.flags|=1,i=ri(y,h),i.ref=s.ref,i.return=s,s.child=i}function uy(i,s,c,h,m){if(i!==null){var y=i.memoizedProps;if(vr(y,h)&&i.ref===s.ref)if(xe=!1,s.pendingProps=h=y,kh(i,m))(i.flags&131072)!==0&&(xe=!0);else return s.lanes=i.lanes,fi(i,s,m)}return Rh(i,s,c,h,m)}function hy(i,s,c){var h=s.pendingProps,m=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((s.flags&128)!==0){if(h=y!==null?y.baseLanes|c:c,i!==null){for(m=s.child=i.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;s.childLanes=y&~h}else s.childLanes=0,s.child=null;return dy(i,s,h,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&El(s,y!==null?y.cachePool:null),y!==null?ug(s,y):oh(),Zg(s);else return s.lanes=s.childLanes=536870912,dy(i,s,y!==null?y.baseLanes|c:c,c)}else y!==null?(El(s,y.cachePool),ug(s,y),Bi(),s.memoizedState=null):(i!==null&&El(s,null),oh(),Bi());return Le(i,s,m,c),s.child}function dy(i,s,c,h){var m=eh();return m=m===null?null:{parent:Se._currentValue,pool:m},s.memoizedState={baseLanes:c,cachePool:m},i!==null&&El(s,null),oh(),Zg(s),i!==null&&Er(i,s,h,!0),null}function jl(i,s){var c=s.ref;if(c===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(s.flags|=4194816)}}function Rh(i,s,c,h,m){return bs(s),c=uh(i,s,c,h,void 0,m),h=hh(),i!==null&&!xe?(dh(i,s,m),fi(i,s,m)):(Nt&&h&&Yu(s),s.flags|=1,Le(i,s,c,m),s.child)}function fy(i,s,c,h,m,y){return bs(s),s.updateQueue=null,c=dg(s,h,c,m),hg(i),h=hh(),i!==null&&!xe?(dh(i,s,y),fi(i,s,y)):(Nt&&h&&Yu(s),s.flags|=1,Le(i,s,c,y),s.child)}function py(i,s,c,h,m){if(bs(s),s.stateNode===null){var y=oa,w=c.contextType;typeof w=="object"&&w!==null&&(y=Ie(w)),y=new c(h,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=_h,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=h,y.state=s.memoizedState,y.refs={},ih(s),w=c.contextType,y.context=typeof w=="object"&&w!==null?Ie(w):oa,y.state=s.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Th(s,c,w,h),y.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&_h.enqueueReplaceState(y,y.state,null),Dr(s,h,y,m),Mr(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(i===null){y=s.stateNode;var _=s.memoizedProps,M=ws(c,_);y.props=M;var V=y.context,X=c.contextType;w=oa,typeof X=="object"&&X!==null&&(w=Ie(X));var W=c.getDerivedStateFromProps;X=typeof W=="function"||typeof y.getSnapshotBeforeUpdate=="function",_=s.pendingProps!==_,X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_||V!==w)&&ty(s,y,h,w),Li=!1;var H=s.memoizedState;y.state=H,Dr(s,h,y,m),Mr(),V=s.memoizedState,_||H!==V||Li?(typeof W=="function"&&(Th(s,c,W,h),V=s.memoizedState),(M=Li||Jg(s,c,M,h,H,V,w))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=V),y.props=h,y.state=V,y.context=w,h=M):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{y=s.stateNode,sh(i,s),w=s.memoizedProps,X=ws(c,w),y.props=X,W=s.pendingProps,H=y.context,V=c.contextType,M=oa,typeof V=="object"&&V!==null&&(M=Ie(V)),_=c.getDerivedStateFromProps,(V=typeof _=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==W||H!==M)&&ty(s,y,h,M),Li=!1,H=s.memoizedState,y.state=H,Dr(s,h,y,m),Mr();var G=s.memoizedState;w!==W||H!==G||Li||i!==null&&i.dependencies!==null&&Sl(i.dependencies)?(typeof _=="function"&&(Th(s,c,_,h),G=s.memoizedState),(X=Li||Jg(s,c,X,h,H,G,M)||i!==null&&i.dependencies!==null&&Sl(i.dependencies))?(V||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,G,M),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,G,M)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&H===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&H===i.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=G),y.props=h,y.state=G,y.context=M,h=X):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&H===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&H===i.memoizedState||(s.flags|=1024),h=!1)}return y=h,jl(i,s),h=(s.flags&128)!==0,y||h?(y=s.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&h?(s.child=ya(s,i.child,null,m),s.child=ya(s,null,c,m)):Le(i,s,c,m),s.memoizedState=y.state,i=s.child):i=fi(i,s,m),i}function my(i,s,c,h){return Sr(),s.flags|=256,Le(i,s,c,h),s.child}var Mh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dh(i){return{baseLanes:i,cachePool:ng()}}function Lh(i,s,c){return i=i!==null?i.childLanes&~c:0,s&&(i|=xn),i}function gy(i,s,c){var h=s.pendingProps,m=!1,y=(s.flags&128)!==0,w;if((w=y)||(w=i!==null&&i.memoizedState===null?!1:(we.current&2)!==0),w&&(m=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Nt){if(m?ki(s):Bi(),Nt){var _=oe,M;if(M=_){t:{for(M=_,_=Un;M.nodeType!==8;){if(!_){_=null;break t}if(M=Nn(M.nextSibling),M===null){_=null;break t}}_=M}_!==null?(s.memoizedState={dehydrated:_,treeContext:ps!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},M=on(18,null,null,0),M.stateNode=_,M.return=s,s.child=M,Ge=s,oe=null,M=!0):M=!1}M||ys(s)}if(_=s.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return pd(_)?s.lanes=32:s.lanes=536870912,null;di(s)}return _=h.children,h=h.fallback,m?(Bi(),m=s.mode,_=Vl({mode:"hidden",children:_},m),h=fs(h,m,c,null),_.return=s,h.return=s,_.sibling=h,s.child=_,m=s.child,m.memoizedState=Dh(c),m.childLanes=Lh(i,w,c),s.memoizedState=Mh,h):(ki(s),Ph(s,_))}if(M=i.memoizedState,M!==null&&(_=M.dehydrated,_!==null)){if(y)s.flags&256?(ki(s),s.flags&=-257,s=Oh(i,s,c)):s.memoizedState!==null?(Bi(),s.child=i.child,s.flags|=128,s=null):(Bi(),m=h.fallback,_=s.mode,h=Vl({mode:"visible",children:h.children},_),m=fs(m,_,c,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,ya(s,i.child,null,c),h=s.child,h.memoizedState=Dh(c),h.childLanes=Lh(i,w,c),s.memoizedState=Mh,s=m);else if(ki(s),pd(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var V=w.dgst;w=V,h=Error(n(419)),h.stack="",h.digest=w,wr({value:h,source:null,stack:null}),s=Oh(i,s,c)}else if(xe||Er(i,s,c,!1),w=(c&i.childLanes)!==0,xe||w){if(w=Xt,w!==null&&(h=c&-c,h=(h&42)!==0?1:mu(h),h=(h&(w.suspendedLanes|c))!==0?0:h,h!==0&&h!==M.retryLane))throw M.retryLane=h,ra(i,h),dn(w,i,h),oy;_.data==="$?"||Qh(),s=Oh(i,s,c)}else _.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=M.treeContext,oe=Nn(_.nextSibling),Ge=s,Nt=!0,gs=null,Un=!1,i!==null&&(Sn[wn++]=oi,Sn[wn++]=li,Sn[wn++]=ps,oi=i.id,li=i.overflow,ps=s),s=Ph(s,h.children),s.flags|=4096);return s}return m?(Bi(),m=h.fallback,_=s.mode,M=i.child,V=M.sibling,h=ri(M,{mode:"hidden",children:h.children}),h.subtreeFlags=M.subtreeFlags&65011712,V!==null?m=ri(V,m):(m=fs(m,_,c,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,_=i.child.memoizedState,_===null?_=Dh(c):(M=_.cachePool,M!==null?(V=Se._currentValue,M=M.parent!==V?{parent:V,pool:V}:M):M=ng(),_={baseLanes:_.baseLanes|c,cachePool:M}),m.memoizedState=_,m.childLanes=Lh(i,w,c),s.memoizedState=Mh,h):(ki(s),c=i.child,i=c.sibling,c=ri(c,{mode:"visible",children:h.children}),c.return=s,c.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=c,s.memoizedState=null,c)}function Ph(i,s){return s=Vl({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Vl(i,s){return i=on(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Oh(i,s,c){return ya(s,i.child,null,c),i=Ph(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function yy(i,s,c){i.lanes|=s;var h=i.alternate;h!==null&&(h.lanes|=s),Qu(i.return,s,c)}function Nh(i,s,c,h,m){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=c,y.tailMode=m)}function vy(i,s,c){var h=s.pendingProps,m=h.revealOrder,y=h.tail;if(Le(i,s,h.children,c),h=we.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&yy(i,c,s);else if(i.tag===19)yy(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(Z(we,h),m){case"forwards":for(c=s.child,m=null;c!==null;)i=c.alternate,i!==null&&Fl(i)===null&&(m=c),c=c.sibling;c=m,c===null?(m=s.child,s.child=null):(m=c.sibling,c.sibling=null),Nh(s,!1,m,c,y);break;case"backwards":for(c=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Fl(i)===null){s.child=m;break}i=m.sibling,m.sibling=c,c=m,m=i}Nh(s,!0,c,null,y);break;case"together":Nh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function fi(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),Vi|=s.lanes,(c&s.childLanes)===0)if(i!==null){if(Er(i,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,c=ri(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=ri(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function kh(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Sl(i)))}function fE(i,s,c){switch(s.tag){case 3:Mt(s,s.stateNode.containerInfo),Di(s,Se,i.memoizedState.cache),Sr();break;case 27:case 5:zt(s);break;case 4:Mt(s,s.stateNode.containerInfo);break;case 10:Di(s,s.type,s.memoizedProps.value);break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(ki(s),s.flags|=128,null):(c&s.child.childLanes)!==0?gy(i,s,c):(ki(s),i=fi(i,s,c),i!==null?i.sibling:null);ki(s);break;case 19:var m=(i.flags&128)!==0;if(h=(c&s.childLanes)!==0,h||(Er(i,s,c,!1),h=(c&s.childLanes)!==0),m){if(h)return vy(i,s,c);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Z(we,we.current),h)break;return null;case 22:case 23:return s.lanes=0,hy(i,s,c);case 24:Di(s,Se,i.memoizedState.cache)}return fi(i,s,c)}function by(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps)xe=!0;else{if(!kh(i,c)&&(s.flags&128)===0)return xe=!1,fE(i,s,c);xe=(i.flags&131072)!==0}else xe=!1,Nt&&(s.flags&1048576)!==0&&Km(s,Al,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var h=s.elementType,m=h._init;if(h=m(h._payload),s.type=h,typeof h=="function")Gu(h)?(i=ws(h,i),s.tag=1,s=py(null,s,h,i,c)):(s.tag=0,s=Rh(null,s,h,i,c));else{if(h!=null){if(m=h.$$typeof,m===D){s.tag=11,s=ly(null,s,h,i,c);break t}else if(m===B){s.tag=14,s=cy(null,s,h,i,c);break t}}throw s=at(h)||h,Error(n(306,s,""))}}return s;case 0:return Rh(i,s,s.type,s.pendingProps,c);case 1:return h=s.type,m=ws(h,s.pendingProps),py(i,s,h,m,c);case 3:t:{if(Mt(s,s.stateNode.containerInfo),i===null)throw Error(n(387));h=s.pendingProps;var y=s.memoizedState;m=y.element,sh(i,s),Dr(s,h,null,c);var w=s.memoizedState;if(h=w.cache,Di(s,Se,h),h!==y.cache&&Zu(s,[Se],c,!0),Mr(),h=w.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=my(i,s,h,c);break t}else if(h!==m){m=bn(Error(n(424)),s),wr(m),s=my(i,s,h,c);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(oe=Nn(i.firstChild),Ge=s,Nt=!0,gs=null,Un=!0,c=Qg(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Sr(),h===m){s=fi(i,s,c);break t}Le(i,s,h,c)}s=s.child}return s;case 26:return jl(i,s),i===null?(c=E0(s.type,null,s.pendingProps,null))?s.memoizedState=c:Nt||(c=s.type,i=s.pendingProps,h=ec(rt.current).createElement(c),h[Fe]=s,h[Ke]=i,Oe(h,c,i),Ee(h),s.stateNode=h):s.memoizedState=E0(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return zt(s),i===null&&Nt&&(h=s.stateNode=A0(s.type,s.pendingProps,rt.current),Ge=s,Un=!0,m=oe,qi(s.type)?(md=m,oe=Nn(h.firstChild)):oe=m),Le(i,s,s.pendingProps.children,c),jl(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Nt&&((m=h=oe)&&(h=VE(h,s.type,s.pendingProps,Un),h!==null?(s.stateNode=h,Ge=s,oe=Nn(h.firstChild),Un=!1,m=!0):m=!1),m||ys(s)),zt(s),m=s.type,y=s.pendingProps,w=i!==null?i.memoizedProps:null,h=y.children,hd(m,y)?h=null:w!==null&&hd(m,w)&&(s.flags|=32),s.memoizedState!==null&&(m=uh(i,s,aE,null,null,c),Zr._currentValue=m),jl(i,s),Le(i,s,h,c),s.child;case 6:return i===null&&Nt&&((i=c=oe)&&(c=zE(c,s.pendingProps,Un),c!==null?(s.stateNode=c,Ge=s,oe=null,i=!0):i=!1),i||ys(s)),null;case 13:return gy(i,s,c);case 4:return Mt(s,s.stateNode.containerInfo),h=s.pendingProps,i===null?s.child=ya(s,null,h,c):Le(i,s,h,c),s.child;case 11:return ly(i,s,s.type,s.pendingProps,c);case 7:return Le(i,s,s.pendingProps,c),s.child;case 8:return Le(i,s,s.pendingProps.children,c),s.child;case 12:return Le(i,s,s.pendingProps.children,c),s.child;case 10:return h=s.pendingProps,Di(s,s.type,h.value),Le(i,s,h.children,c),s.child;case 9:return m=s.type._context,h=s.pendingProps.children,bs(s),m=Ie(m),h=h(m),s.flags|=1,Le(i,s,h,c),s.child;case 14:return cy(i,s,s.type,s.pendingProps,c);case 15:return uy(i,s,s.type,s.pendingProps,c);case 19:return vy(i,s,c);case 31:return h=s.pendingProps,c=s.mode,h={mode:h.mode,children:h.children},i===null?(c=Vl(h,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=ri(i.child,h),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return hy(i,s,c);case 24:return bs(s),h=Ie(Se),i===null?(m=eh(),m===null&&(m=Xt,y=Ju(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),s.memoizedState={parent:h,cache:m},ih(s),Di(s,Se,m)):((i.lanes&c)!==0&&(sh(i,s),Dr(s,null,null,c),Mr()),m=i.memoizedState,y=s.memoizedState,m.parent!==h?(m={parent:h,cache:h},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Di(s,Se,h)):(h=y.cache,Di(s,Se,h),h!==m.cache&&Zu(s,[Se],c,!0))),Le(i,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function pi(i){i.flags|=4}function Ay(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!R0(s)){if(s=En.current,s!==null&&((Pt&4194048)===Pt?jn!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||s!==jn))throw Cr=nh,ig;i.flags|=8192}}function zl(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Zp():536870912,i.lanes|=s,Sa|=s)}function Fr(i,s){if(!Nt)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Zt(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,h=0;if(s)for(var m=i.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=c,s}function pE(i,s,c){var h=s.pendingProps;switch($u(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(s),null;case 1:return Zt(s),null;case 3:return c=s.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),ui(Se),Yt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Ar(s)?pi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Zm())),Zt(s),null;case 26:return c=s.memoizedState,i===null?(pi(s),c!==null?(Zt(s),Ay(s,c)):(Zt(s),s.flags&=-16777217)):c?c!==i.memoizedState?(pi(s),Zt(s),Ay(s,c)):(Zt(s),s.flags&=-16777217):(i.memoizedProps!==h&&pi(s),Zt(s),s.flags&=-16777217),null;case 27:$e(s),c=rt.current;var m=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==h&&pi(s);else{if(!h){if(s.stateNode===null)throw Error(n(166));return Zt(s),null}i=et.current,Ar(s)?Wm(s):(i=A0(m,h,c),s.stateNode=i,pi(s))}return Zt(s),null;case 5:if($e(s),c=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==h&&pi(s);else{if(!h){if(s.stateNode===null)throw Error(n(166));return Zt(s),null}if(i=et.current,Ar(s))Wm(s);else{switch(m=ec(rt.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?m.createElement(c,{is:h.is}):m.createElement(c)}}i[Fe]=s,i[Ke]=h;t:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break t;for(;m.sibling===null;){if(m.return===null||m.return===s)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=i;t:switch(Oe(i,c,h),c){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&pi(s)}}return Zt(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==h&&pi(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(n(166));if(i=rt.current,Ar(s)){if(i=s.stateNode,c=s.memoizedProps,h=null,m=Ge,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}i[Fe]=s,i=!!(i.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||f0(i.nodeValue,c)),i||ys(s)}else i=ec(i).createTextNode(h),i[Fe]=s,s.stateNode=i}return Zt(s),null;case 13:if(h=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Ar(s),h!==null&&h.dehydrated!==null){if(i===null){if(!m)throw Error(n(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[Fe]=s}else Sr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Zt(s),m=!1}else m=Zm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(di(s),s):(di(s),null)}if(di(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=h!==null,i=i!==null&&i.memoizedState!==null,c){h=s.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)}return c!==i&&c&&(s.child.flags|=8192),zl(s,s.updateQueue),Zt(s),null;case 4:return Yt(),i===null&&rd(s.stateNode.containerInfo),Zt(s),null;case 10:return ui(s.type),Zt(s),null;case 19:if(tt(we),m=s.memoizedState,m===null)return Zt(s),null;if(h=(s.flags&128)!==0,y=m.rendering,y===null)if(h)Fr(m,!1);else{if(le!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=Fl(i),y!==null){for(s.flags|=128,Fr(m,!1),i=y.updateQueue,s.updateQueue=i,zl(s,i),s.subtreeFlags=0,i=c,c=s.child;c!==null;)$m(c,i),c=c.sibling;return Z(we,we.current&1|2),s.child}i=i.sibling}m.tail!==null&&De()>ql&&(s.flags|=128,h=!0,Fr(m,!1),s.lanes=4194304)}else{if(!h)if(i=Fl(y),i!==null){if(s.flags|=128,h=!0,i=i.updateQueue,s.updateQueue=i,zl(s,i),Fr(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Nt)return Zt(s),null}else 2*De()-m.renderingStartTime>ql&&c!==536870912&&(s.flags|=128,h=!0,Fr(m,!1),s.lanes=4194304);m.isBackwards?(y.sibling=s.child,s.child=y):(i=m.last,i!==null?i.sibling=y:s.child=y,m.last=y)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=De(),s.sibling=null,i=we.current,Z(we,h?i&1|2:i&1),s):(Zt(s),null);case 22:case 23:return di(s),lh(),h=s.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(c&536870912)!==0&&(s.flags&128)===0&&(Zt(s),s.subtreeFlags&6&&(s.flags|=8192)):Zt(s),c=s.updateQueue,c!==null&&zl(s,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==c&&(s.flags|=2048),i!==null&&tt(As),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ui(Se),Zt(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function mE(i,s){switch($u(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ui(Se),Yt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return $e(s),null;case 13:if(di(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Sr()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return tt(we),null;case 4:return Yt(),null;case 10:return ui(s.type),null;case 22:case 23:return di(s),lh(),i!==null&&tt(As),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ui(Se),null;case 25:return null;default:return null}}function Sy(i,s){switch($u(s),s.tag){case 3:ui(Se),Yt();break;case 26:case 27:case 5:$e(s);break;case 4:Yt();break;case 13:di(s);break;case 19:tt(we);break;case 10:ui(s.type);break;case 22:case 23:di(s),lh(),i!==null&&tt(As);break;case 24:ui(Se)}}function Ir(i,s){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&i)===i){h=void 0;var y=c.create,w=c.inst;h=y(),w.destroy=h}c=c.next}while(c!==m)}}catch(_){Ht(s,s.return,_)}}function Fi(i,s,c){try{var h=s.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&i)===i){var w=h.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,m=s;var M=c,V=_;try{V()}catch(X){Ht(m,M,X)}}}h=h.next}while(h!==y)}}catch(X){Ht(s,s.return,X)}}function wy(i){var s=i.updateQueue;if(s!==null){var c=i.stateNode;try{cg(s,c)}catch(h){Ht(i,i.return,h)}}}function Ey(i,s,c){c.props=ws(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(h){Ht(i,s,h)}}function Ur(i,s){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof c=="function"?i.refCleanup=c(h):c.current=h}}catch(m){Ht(i,s,m)}}function Vn(i,s){var c=i.ref,h=i.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(m){Ht(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){Ht(i,s,m)}else c.current=null}function xy(i){var s=i.type,c=i.memoizedProps,h=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break t;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(m){Ht(i,i.return,m)}}function Bh(i,s,c){try{var h=i.stateNode;BE(h,i.type,c,s),h[Ke]=s}catch(m){Ht(i,i.return,m)}}function Ty(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&qi(i.type)||i.tag===4}function Fh(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Ty(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&qi(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ih(i,s,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(i),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=tc));else if(h!==4&&(h===27&&qi(i.type)&&(c=i.stateNode,s=null),i=i.child,i!==null))for(Ih(i,s,c),i=i.sibling;i!==null;)Ih(i,s,c),i=i.sibling}function Hl(i,s,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(h!==4&&(h===27&&qi(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Hl(i,s,c),i=i.sibling;i!==null;)Hl(i,s,c),i=i.sibling}function _y(i){var s=i.stateNode,c=i.memoizedProps;try{for(var h=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Oe(s,h,c),s[Fe]=i,s[Ke]=c}catch(y){Ht(i,i.return,y)}}var mi=!1,de=!1,Uh=!1,Cy=typeof WeakSet=="function"?WeakSet:Set,Te=null;function gE(i,s){if(i=i.containerInfo,cd=oc,i=Im(i),Fu(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else t:{c=(c=i.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break t}var w=0,_=-1,M=-1,V=0,X=0,W=i,H=null;e:for(;;){for(var G;W!==c||m!==0&&W.nodeType!==3||(_=w+m),W!==y||h!==0&&W.nodeType!==3||(M=w+h),W.nodeType===3&&(w+=W.nodeValue.length),(G=W.firstChild)!==null;)H=W,W=G;for(;;){if(W===i)break e;if(H===c&&++V===m&&(_=w),H===y&&++X===h&&(M=w),(G=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=G}c=_===-1||M===-1?null:{start:_,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(ud={focusedElem:i,selectionRange:c},oc=!1,Te=s;Te!==null;)if(s=Te,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,Te=i;else for(;Te!==null;){switch(s=Te,y=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=s,m=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var gt=ws(c.type,m,c.elementType===c.type);i=h.getSnapshotBeforeUpdate(gt,y),h.__reactInternalSnapshotBeforeUpdate=i}catch(ft){Ht(c,c.return,ft)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,c=i.nodeType,c===9)fd(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":fd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,Te=i;break}Te=s.return}}function Ry(i,s,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Ii(i,c),h&4&&Ir(5,c);break;case 1:if(Ii(i,c),h&4)if(i=c.stateNode,s===null)try{i.componentDidMount()}catch(w){Ht(c,c.return,w)}else{var m=ws(c.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){Ht(c,c.return,w)}}h&64&&wy(c),h&512&&Ur(c,c.return);break;case 3:if(Ii(i,c),h&64&&(i=c.updateQueue,i!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{cg(i,s)}catch(w){Ht(c,c.return,w)}}break;case 27:s===null&&h&4&&_y(c);case 26:case 5:Ii(i,c),s===null&&h&4&&xy(c),h&512&&Ur(c,c.return);break;case 12:Ii(i,c);break;case 13:Ii(i,c),h&4&&Ly(i,c),h&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=TE.bind(null,c),HE(i,c))));break;case 22:if(h=c.memoizedState!==null||mi,!h){s=s!==null&&s.memoizedState!==null||de,m=mi;var y=de;mi=h,(de=s)&&!y?Ui(i,c,(c.subtreeFlags&8772)!==0):Ii(i,c),mi=m,de=y}break;case 30:break;default:Ii(i,c)}}function My(i){var s=i.alternate;s!==null&&(i.alternate=null,My(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&vu(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var $t=null,Ze=!1;function gi(i,s,c){for(c=c.child;c!==null;)Dy(i,s,c),c=c.sibling}function Dy(i,s,c){if(ae&&typeof ae.onCommitFiberUnmount=="function")try{ae.onCommitFiberUnmount(os,c)}catch{}switch(c.tag){case 26:de||Vn(c,s),gi(i,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:de||Vn(c,s);var h=$t,m=Ze;qi(c.type)&&($t=c.stateNode,Ze=!1),gi(i,s,c),$r(c.stateNode),$t=h,Ze=m;break;case 5:de||Vn(c,s);case 6:if(h=$t,m=Ze,$t=null,gi(i,s,c),$t=h,Ze=m,$t!==null)if(Ze)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(c.stateNode)}catch(y){Ht(c,s,y)}else try{$t.removeChild(c.stateNode)}catch(y){Ht(c,s,y)}break;case 18:$t!==null&&(Ze?(i=$t,v0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),no(i)):v0($t,c.stateNode));break;case 4:h=$t,m=Ze,$t=c.stateNode.containerInfo,Ze=!0,gi(i,s,c),$t=h,Ze=m;break;case 0:case 11:case 14:case 15:de||Fi(2,c,s),de||Fi(4,c,s),gi(i,s,c);break;case 1:de||(Vn(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Ey(c,s,h)),gi(i,s,c);break;case 21:gi(i,s,c);break;case 22:de=(h=de)||c.memoizedState!==null,gi(i,s,c),de=h;break;default:gi(i,s,c)}}function Ly(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{no(i)}catch(c){Ht(s,s.return,c)}}function yE(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Cy),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Cy),s;default:throw Error(n(435,i.tag))}}function jh(i,s){var c=yE(i);s.forEach(function(h){var m=_E.bind(null,i,h);c.has(h)||(c.add(h),h.then(m,m))})}function ln(i,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h],y=i,w=s,_=w;t:for(;_!==null;){switch(_.tag){case 27:if(qi(_.type)){$t=_.stateNode,Ze=!1;break t}break;case 5:$t=_.stateNode,Ze=!1;break t;case 3:case 4:$t=_.stateNode.containerInfo,Ze=!0;break t}_=_.return}if($t===null)throw Error(n(160));Dy(y,w,m),$t=null,Ze=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Py(s,i),s=s.sibling}var On=null;function Py(i,s){var c=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ln(s,i),cn(i),h&4&&(Fi(3,i,i.return),Ir(3,i),Fi(5,i,i.return));break;case 1:ln(s,i),cn(i),h&512&&(de||c===null||Vn(c,c.return)),h&64&&mi&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var m=On;if(ln(s,i),cn(i),h&512&&(de||c===null||Vn(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=i.memoizedState,c===null)if(h===null)if(i.stateNode===null){t:{h=i.type,c=i.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[cr]||y[Fe]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),Oe(y,h,c),y[Fe]=i,Ee(y),h=y;break t;case"link":var w=_0("link","href",m).get(h+(c.href||""));if(w){for(var _=0;_<w.length;_++)if(y=w[_],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(_,1);break e}}y=m.createElement(h),Oe(y,h,c),m.head.appendChild(y);break;case"meta":if(w=_0("meta","content",m).get(h+(c.content||""))){for(_=0;_<w.length;_++)if(y=w[_],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(_,1);break e}}y=m.createElement(h),Oe(y,h,c),m.head.appendChild(y);break;default:throw Error(n(468,h))}y[Fe]=i,Ee(y),h=y}i.stateNode=h}else C0(m,i.type,i.stateNode);else i.stateNode=T0(m,h,i.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?C0(m,i.type,i.stateNode):T0(m,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Bh(i,i.memoizedProps,c.memoizedProps)}break;case 27:ln(s,i),cn(i),h&512&&(de||c===null||Vn(c,c.return)),c!==null&&h&4&&Bh(i,i.memoizedProps,c.memoizedProps);break;case 5:if(ln(s,i),cn(i),h&512&&(de||c===null||Vn(c,c.return)),i.flags&32){m=i.stateNode;try{Js(m,"")}catch(G){Ht(i,i.return,G)}}h&4&&i.stateNode!=null&&(m=i.memoizedProps,Bh(i,m,c!==null?c.memoizedProps:m)),h&1024&&(Uh=!0);break;case 6:if(ln(s,i),cn(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,c=i.stateNode;try{c.nodeValue=h}catch(G){Ht(i,i.return,G)}}break;case 3:if(sc=null,m=On,On=nc(s.containerInfo),ln(s,i),On=m,cn(i),h&4&&c!==null&&c.memoizedState.isDehydrated)try{no(s.containerInfo)}catch(G){Ht(i,i.return,G)}Uh&&(Uh=!1,Oy(i));break;case 4:h=On,On=nc(i.stateNode.containerInfo),ln(s,i),cn(i),On=h;break;case 12:ln(s,i),cn(i);break;case 13:ln(s,i),cn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Xh=De()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jh(i,h)));break;case 22:m=i.memoizedState!==null;var M=c!==null&&c.memoizedState!==null,V=mi,X=de;if(mi=V||m,de=X||M,ln(s,i),de=X,mi=V,cn(i),h&8192)t:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(c===null||M||mi||de||Es(i)),c=null,s=i;;){if(s.tag===5||s.tag===26){if(c===null){M=c=s;try{if(y=M.stateNode,m)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=M.stateNode;var W=M.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;_.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){Ht(M,M.return,G)}}}else if(s.tag===6){if(c===null){M=s;try{M.stateNode.nodeValue=m?"":M.memoizedProps}catch(G){Ht(M,M.return,G)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=i.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,jh(i,c))));break;case 19:ln(s,i),cn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jh(i,h)));break;case 30:break;case 21:break;default:ln(s,i),cn(i)}}function cn(i){var s=i.flags;if(s&2){try{for(var c,h=i.return;h!==null;){if(Ty(h)){c=h;break}h=h.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var m=c.stateNode,y=Fh(i);Hl(i,y,m);break;case 5:var w=c.stateNode;c.flags&32&&(Js(w,""),c.flags&=-33);var _=Fh(i);Hl(i,_,w);break;case 3:case 4:var M=c.stateNode.containerInfo,V=Fh(i);Ih(i,V,M);break;default:throw Error(n(161))}}catch(X){Ht(i,i.return,X)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Oy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Oy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Ii(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ry(i,s.alternate,s),s=s.sibling}function Es(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Fi(4,s,s.return),Es(s);break;case 1:Vn(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&Ey(s,s.return,c),Es(s);break;case 27:$r(s.stateNode);case 26:case 5:Vn(s,s.return),Es(s);break;case 22:s.memoizedState===null&&Es(s);break;case 30:Es(s);break;default:Es(s)}i=i.sibling}}function Ui(i,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,m=i,y=s,w=y.flags;switch(y.tag){case 0:case 11:case 15:Ui(m,y,c),Ir(4,y);break;case 1:if(Ui(m,y,c),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(V){Ht(h,h.return,V)}if(h=y,m=h.updateQueue,m!==null){var _=h.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)lg(M[m],_)}catch(V){Ht(h,h.return,V)}}c&&w&64&&wy(y),Ur(y,y.return);break;case 27:_y(y);case 26:case 5:Ui(m,y,c),c&&h===null&&w&4&&xy(y),Ur(y,y.return);break;case 12:Ui(m,y,c);break;case 13:Ui(m,y,c),c&&w&4&&Ly(m,y);break;case 22:y.memoizedState===null&&Ui(m,y,c),Ur(y,y.return);break;case 30:break;default:Ui(m,y,c)}s=s.sibling}}function Vh(i,s){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&xr(c))}function zh(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&xr(i))}function zn(i,s,c,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ny(i,s,c,h),s=s.sibling}function Ny(i,s,c,h){var m=s.flags;switch(s.tag){case 0:case 11:case 15:zn(i,s,c,h),m&2048&&Ir(9,s);break;case 1:zn(i,s,c,h);break;case 3:zn(i,s,c,h),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&xr(i)));break;case 12:if(m&2048){zn(i,s,c,h),i=s.stateNode;try{var y=s.memoizedProps,w=y.id,_=y.onPostCommit;typeof _=="function"&&_(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(M){Ht(s,s.return,M)}}else zn(i,s,c,h);break;case 13:zn(i,s,c,h);break;case 23:break;case 22:y=s.stateNode,w=s.alternate,s.memoizedState!==null?y._visibility&2?zn(i,s,c,h):jr(i,s):y._visibility&2?zn(i,s,c,h):(y._visibility|=2,va(i,s,c,h,(s.subtreeFlags&10256)!==0)),m&2048&&Vh(w,s);break;case 24:zn(i,s,c,h),m&2048&&zh(s.alternate,s);break;default:zn(i,s,c,h)}}function va(i,s,c,h,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=i,w=s,_=c,M=h,V=w.flags;switch(w.tag){case 0:case 11:case 15:va(y,w,_,M,m),Ir(8,w);break;case 23:break;case 22:var X=w.stateNode;w.memoizedState!==null?X._visibility&2?va(y,w,_,M,m):jr(y,w):(X._visibility|=2,va(y,w,_,M,m)),m&&V&2048&&Vh(w.alternate,w);break;case 24:va(y,w,_,M,m),m&&V&2048&&zh(w.alternate,w);break;default:va(y,w,_,M,m)}s=s.sibling}}function jr(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=i,h=s,m=h.flags;switch(h.tag){case 22:jr(c,h),m&2048&&Vh(h.alternate,h);break;case 24:jr(c,h),m&2048&&zh(h.alternate,h);break;default:jr(c,h)}s=s.sibling}}var Vr=8192;function ba(i){if(i.subtreeFlags&Vr)for(i=i.child;i!==null;)ky(i),i=i.sibling}function ky(i){switch(i.tag){case 26:ba(i),i.flags&Vr&&i.memoizedState!==null&&nx(On,i.memoizedState,i.memoizedProps);break;case 5:ba(i);break;case 3:case 4:var s=On;On=nc(i.stateNode.containerInfo),ba(i),On=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Vr,Vr=16777216,ba(i),Vr=s):ba(i));break;default:ba(i)}}function By(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function zr(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];Te=h,Iy(h,i)}By(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fy(i),i=i.sibling}function Fy(i){switch(i.tag){case 0:case 11:case 15:zr(i),i.flags&2048&&Fi(9,i,i.return);break;case 3:zr(i);break;case 12:zr(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Gl(i)):zr(i);break;default:zr(i)}}function Gl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];Te=h,Iy(h,i)}By(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Fi(8,s,s.return),Gl(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Gl(s));break;default:Gl(s)}i=i.sibling}}function Iy(i,s){for(;Te!==null;){var c=Te;switch(c.tag){case 0:case 11:case 15:Fi(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:xr(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Te=h;else t:for(c=i;Te!==null;){h=Te;var m=h.sibling,y=h.return;if(My(h),h===c){Te=null;break t}if(m!==null){m.return=y,Te=m;break t}Te=y}}}var vE={getCacheForType:function(i){var s=Ie(Se),c=s.data.get(i);return c===void 0&&(c=i(),s.data.set(i,c)),c}},bE=typeof WeakMap=="function"?WeakMap:Map,kt=0,Xt=null,_t=null,Pt=0,Bt=0,un=null,ji=!1,Aa=!1,Hh=!1,yi=0,le=0,Vi=0,xs=0,Gh=0,xn=0,Sa=0,Hr=null,Je=null,qh=!1,Xh=0,ql=1/0,Xl=null,zi=null,Pe=0,Hi=null,wa=null,Ea=0,Yh=0,$h=null,Uy=null,Gr=0,Kh=null;function hn(){if((kt&2)!==0&&Pt!==0)return Pt&-Pt;if(k.T!==null){var i=ua;return i!==0?i:nd()}return em()}function jy(){xn===0&&(xn=(Pt&536870912)===0||Nt?Qp():536870912);var i=En.current;return i!==null&&(i.flags|=32),xn}function dn(i,s,c){(i===Xt&&(Bt===2||Bt===9)||i.cancelPendingCommit!==null)&&(xa(i,0),Gi(i,Pt,xn,!1)),lr(i,c),((kt&2)===0||i!==Xt)&&(i===Xt&&((kt&2)===0&&(xs|=c),le===4&&Gi(i,Pt,xn,!1)),Hn(i))}function Vy(i,s,c){if((kt&6)!==0)throw Error(n(327));var h=!c&&(s&124)===0&&(s&i.expiredLanes)===0||or(i,s),m=h?wE(i,s):Zh(i,s,!0),y=h;do{if(m===0){Aa&&!h&&Gi(i,s,0,!1);break}else{if(c=i.current.alternate,y&&!AE(c)){m=Zh(i,s,!1),y=!1;continue}if(m===2){if(y=s,i.errorRecoveryDisabledLanes&y)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var _=i;m=Hr;var M=_.current.memoizedState.isDehydrated;if(M&&(xa(_,w).flags|=256),w=Zh(_,w,!1),w!==2){if(Hh&&!M){_.errorRecoveryDisabledLanes|=y,xs|=y,m=4;break t}y=Je,Je=m,y!==null&&(Je===null?Je=y:Je.push.apply(Je,y))}m=w}if(y=!1,m!==2)continue}}if(m===1){xa(i,0),Gi(i,s,0,!0);break}t:{switch(h=i,y=m,y){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Gi(h,s,xn,!ji);break t;case 2:Je=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(m=Xh+300-De(),10<m)){if(Gi(h,s,xn,!ji),il(h,0,!0)!==0)break t;h.timeoutHandle=g0(zy.bind(null,h,c,Je,Xl,qh,s,xn,xs,Sa,ji,y,2,-0,0),m);break t}zy(h,c,Je,Xl,qh,s,xn,xs,Sa,ji,y,0,-0,0)}}break}while(!0);Hn(i)}function zy(i,s,c,h,m,y,w,_,M,V,X,W,H,G){if(i.timeoutHandle=-1,W=s.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Qr={stylesheets:null,count:0,unsuspend:ex},ky(s),W=ix(),W!==null)){i.cancelPendingCommit=W(Ky.bind(null,i,s,y,c,h,m,w,_,M,X,1,H,G)),Gi(i,y,w,!V);return}Ky(i,s,y,c,h,m,w,_,M)}function AE(i){for(var s=i;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var m=c[h],y=m.getSnapshot;m=m.value;try{if(!rn(y(),m))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gi(i,s,c,h){s&=~Gh,s&=~xs,i.suspendedLanes|=s,i.pingedLanes&=~s,h&&(i.warmLanes|=s),h=i.expirationTimes;for(var m=s;0<m;){var y=31-re(m),w=1<<y;h[y]=-1,m&=~w}c!==0&&Jp(i,c,s)}function Yl(){return(kt&6)===0?(qr(0),!1):!0}function Wh(){if(_t!==null){if(Bt===0)var i=_t.return;else i=_t,ci=vs=null,fh(i),ga=null,kr=0,i=_t;for(;i!==null;)Sy(i.alternate,i),i=i.return;_t=null}}function xa(i,s){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,IE(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Wh(),Xt=i,_t=c=ri(i.current,null),Pt=s,Bt=0,un=null,ji=!1,Aa=or(i,s),Hh=!1,Sa=xn=Gh=xs=Vi=le=0,Je=Hr=null,qh=!1,(s&8)!==0&&(s|=s&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=s;0<h;){var m=31-re(h),y=1<<m;s|=i[m],h&=~y}return yi=s,ml(),c}function Hy(i,s){xt=null,k.H=Nl,s===_r||s===xl?(s=rg(),Bt=3):s===ig?(s=rg(),Bt=4):Bt=s===oy?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,un=s,_t===null&&(le=1,Ul(i,bn(s,i.current)))}function Gy(){var i=k.H;return k.H=Nl,i===null?Nl:i}function qy(){var i=k.A;return k.A=vE,i}function Qh(){le=4,ji||(Pt&4194048)!==Pt&&En.current!==null||(Aa=!0),(Vi&134217727)===0&&(xs&134217727)===0||Xt===null||Gi(Xt,Pt,xn,!1)}function Zh(i,s,c){var h=kt;kt|=2;var m=Gy(),y=qy();(Xt!==i||Pt!==s)&&(Xl=null,xa(i,s)),s=!1;var w=le;t:do try{if(Bt!==0&&_t!==null){var _=_t,M=un;switch(Bt){case 8:Wh(),w=6;break t;case 3:case 2:case 9:case 6:En.current===null&&(s=!0);var V=Bt;if(Bt=0,un=null,Ta(i,_,M,V),c&&Aa){w=0;break t}break;default:V=Bt,Bt=0,un=null,Ta(i,_,M,V)}}SE(),w=le;break}catch(X){Hy(i,X)}while(!0);return s&&i.shellSuspendCounter++,ci=vs=null,kt=h,k.H=m,k.A=y,_t===null&&(Xt=null,Pt=0,ml()),w}function SE(){for(;_t!==null;)Xy(_t)}function wE(i,s){var c=kt;kt|=2;var h=Gy(),m=qy();Xt!==i||Pt!==s?(Xl=null,ql=De()+500,xa(i,s)):Aa=or(i,s);t:do try{if(Bt!==0&&_t!==null){s=_t;var y=un;e:switch(Bt){case 1:Bt=0,un=null,Ta(i,s,y,1);break;case 2:case 9:if(sg(y)){Bt=0,un=null,Yy(s);break}s=function(){Bt!==2&&Bt!==9||Xt!==i||(Bt=7),Hn(i)},y.then(s,s);break t;case 3:Bt=7;break t;case 4:Bt=5;break t;case 7:sg(y)?(Bt=0,un=null,Yy(s)):(Bt=0,un=null,Ta(i,s,y,7));break;case 5:var w=null;switch(_t.tag){case 26:w=_t.memoizedState;case 5:case 27:var _=_t;if(!w||R0(w)){Bt=0,un=null;var M=_.sibling;if(M!==null)_t=M;else{var V=_.return;V!==null?(_t=V,$l(V)):_t=null}break e}}Bt=0,un=null,Ta(i,s,y,5);break;case 6:Bt=0,un=null,Ta(i,s,y,6);break;case 8:Wh(),le=6;break t;default:throw Error(n(462))}}EE();break}catch(X){Hy(i,X)}while(!0);return ci=vs=null,k.H=h,k.A=m,kt=c,_t!==null?0:(Xt=null,Pt=0,ml(),le)}function EE(){for(;_t!==null&&!ue();)Xy(_t)}function Xy(i){var s=by(i.alternate,i,yi);i.memoizedProps=i.pendingProps,s===null?$l(i):_t=s}function Yy(i){var s=i,c=s.alternate;switch(s.tag){case 15:case 0:s=fy(c,s,s.pendingProps,s.type,void 0,Pt);break;case 11:s=fy(c,s,s.pendingProps,s.type.render,s.ref,Pt);break;case 5:fh(s);default:Sy(c,s),s=_t=$m(s,yi),s=by(c,s,yi)}i.memoizedProps=i.pendingProps,s===null?$l(i):_t=s}function Ta(i,s,c,h){ci=vs=null,fh(s),ga=null,kr=0;var m=s.return;try{if(dE(i,m,s,c,Pt)){le=1,Ul(i,bn(c,i.current)),_t=null;return}}catch(y){if(m!==null)throw _t=m,y;le=1,Ul(i,bn(c,i.current)),_t=null;return}s.flags&32768?(Nt||h===1?i=!0:Aa||(Pt&536870912)!==0?i=!1:(ji=i=!0,(h===2||h===9||h===3||h===6)&&(h=En.current,h!==null&&h.tag===13&&(h.flags|=16384))),$y(s,i)):$l(s)}function $l(i){var s=i;do{if((s.flags&32768)!==0){$y(s,ji);return}i=s.return;var c=pE(s.alternate,s,yi);if(c!==null){_t=c;return}if(s=s.sibling,s!==null){_t=s;return}_t=s=i}while(s!==null);le===0&&(le=5)}function $y(i,s){do{var c=mE(i.alternate,i);if(c!==null){c.flags&=32767,_t=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(i=i.sibling,i!==null)){_t=i;return}_t=i=c}while(i!==null);le=6,_t=null}function Ky(i,s,c,h,m,y,w,_,M){i.cancelPendingCommit=null;do Kl();while(Pe!==0);if((kt&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(y=s.lanes|s.childLanes,y|=zu,ew(i,c,y,w,_,M),i===Xt&&(_t=Xt=null,Pt=0),wa=s,Hi=i,Ea=c,Yh=y,$h=m,Uy=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,CE(ii,function(){return t0(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=k.T,k.T=null,m=z.p,z.p=2,w=kt,kt|=4;try{gE(i,s,c)}finally{kt=w,z.p=m,k.T=h}}Pe=1,Wy(),Qy(),Zy()}}function Wy(){if(Pe===1){Pe=0;var i=Hi,s=wa,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=k.T,k.T=null;var h=z.p;z.p=2;var m=kt;kt|=4;try{Py(s,i);var y=ud,w=Im(i.containerInfo),_=y.focusedElem,M=y.selectionRange;if(w!==_&&_&&_.ownerDocument&&Fm(_.ownerDocument.documentElement,_)){if(M!==null&&Fu(_)){var V=M.start,X=M.end;if(X===void 0&&(X=V),"selectionStart"in _)_.selectionStart=V,_.selectionEnd=Math.min(X,_.value.length);else{var W=_.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var G=H.getSelection(),gt=_.textContent.length,ft=Math.min(M.start,gt),jt=M.end===void 0?ft:Math.min(M.end,gt);!G.extend&&ft>jt&&(w=jt,jt=ft,ft=w);var F=Bm(_,ft),O=Bm(_,jt);if(F&&O&&(G.rangeCount!==1||G.anchorNode!==F.node||G.anchorOffset!==F.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var U=W.createRange();U.setStart(F.node,F.offset),G.removeAllRanges(),ft>jt?(G.addRange(U),G.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),G.addRange(U))}}}}for(W=[],G=_;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<W.length;_++){var $=W[_];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}oc=!!cd,ud=cd=null}finally{kt=m,z.p=h,k.T=c}}i.current=s,Pe=2}}function Qy(){if(Pe===2){Pe=0;var i=Hi,s=wa,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=k.T,k.T=null;var h=z.p;z.p=2;var m=kt;kt|=4;try{Ry(i,s.alternate,s)}finally{kt=m,z.p=h,k.T=c}}Pe=3}}function Zy(){if(Pe===4||Pe===3){Pe=0,ge();var i=Hi,s=wa,c=Ea,h=Uy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pe=5:(Pe=0,wa=Hi=null,Jy(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(zi=null),gu(c),s=s.stateNode,ae&&typeof ae.onCommitFiberRoot=="function")try{ae.onCommitFiberRoot(os,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=k.T,m=z.p,z.p=2,k.T=null;try{for(var y=i.onRecoverableError,w=0;w<h.length;w++){var _=h[w];y(_.value,{componentStack:_.stack})}}finally{k.T=s,z.p=m}}(Ea&3)!==0&&Kl(),Hn(i),m=i.pendingLanes,(c&4194090)!==0&&(m&42)!==0?i===Kh?Gr++:(Gr=0,Kh=i):Gr=0,qr(0)}}function Jy(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,xr(s)))}function Kl(i){return Wy(),Qy(),Zy(),t0()}function t0(){if(Pe!==5)return!1;var i=Hi,s=Yh;Yh=0;var c=gu(Ea),h=k.T,m=z.p;try{z.p=32>c?32:c,k.T=null,c=$h,$h=null;var y=Hi,w=Ea;if(Pe=0,wa=Hi=null,Ea=0,(kt&6)!==0)throw Error(n(331));var _=kt;if(kt|=4,Fy(y.current),Ny(y,y.current,w,c),kt=_,qr(0,!1),ae&&typeof ae.onPostCommitFiberRoot=="function")try{ae.onPostCommitFiberRoot(os,y)}catch{}return!0}finally{z.p=m,k.T=h,Jy(i,s)}}function e0(i,s,c){s=bn(c,s),s=Ch(i.stateNode,s,2),i=Oi(i,s,2),i!==null&&(lr(i,2),Hn(i))}function Ht(i,s,c){if(i.tag===3)e0(i,i,c);else for(;s!==null;){if(s.tag===3){e0(s,i,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zi===null||!zi.has(h))){i=bn(c,i),c=ay(2),h=Oi(s,c,2),h!==null&&(ry(c,h,s,i),lr(h,2),Hn(h));break}}s=s.return}}function Jh(i,s,c){var h=i.pingCache;if(h===null){h=i.pingCache=new bE;var m=new Set;h.set(s,m)}else m=h.get(s),m===void 0&&(m=new Set,h.set(s,m));m.has(c)||(Hh=!0,m.add(c),i=xE.bind(null,i,s,c),s.then(i,i))}function xE(i,s,c){var h=i.pingCache;h!==null&&h.delete(s),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Xt===i&&(Pt&c)===c&&(le===4||le===3&&(Pt&62914560)===Pt&&300>De()-Xh?(kt&2)===0&&xa(i,0):Gh|=c,Sa===Pt&&(Sa=0)),Hn(i)}function n0(i,s){s===0&&(s=Zp()),i=ra(i,s),i!==null&&(lr(i,s),Hn(i))}function TE(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),n0(i,c)}function _E(i,s){var c=0;switch(i.tag){case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(s),n0(i,c)}function CE(i,s){return Dt(i,s)}var Wl=null,_a=null,td=!1,Ql=!1,ed=!1,Ts=0;function Hn(i){i!==_a&&i.next===null&&(_a===null?Wl=_a=i:_a=_a.next=i),Ql=!0,td||(td=!0,ME())}function qr(i,s){if(!ed&&Ql){ed=!0;do for(var c=!1,h=Wl;h!==null;){if(i!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var w=h.suspendedLanes,_=h.pingedLanes;y=(1<<31-re(42|i)+1)-1,y&=m&~(w&~_),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,r0(h,y))}else y=Pt,y=il(h,h===Xt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||or(h,y)||(c=!0,r0(h,y));h=h.next}while(c);ed=!1}}function RE(){i0()}function i0(){Ql=td=!1;var i=0;Ts!==0&&(FE()&&(i=Ts),Ts=0);for(var s=De(),c=null,h=Wl;h!==null;){var m=h.next,y=s0(h,s);y===0?(h.next=null,c===null?Wl=m:c.next=m,m===null&&(_a=c)):(c=h,(i!==0||(y&3)!==0)&&(Ql=!0)),h=m}qr(i)}function s0(i,s){for(var c=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var w=31-re(y),_=1<<w,M=m[w];M===-1?((_&c)===0||(_&h)!==0)&&(m[w]=tw(_,s)):M<=s&&(i.expiredLanes|=_),y&=~_}if(s=Xt,c=Pt,c=il(i,i===s?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,c===0||i===s&&(Bt===2||Bt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ft(h),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||or(i,c)){if(s=c&-c,s===i.callbackPriority)return s;switch(h!==null&&Ft(h),gu(c)){case 2:case 8:c=Jo;break;case 32:c=ii;break;case 268435456:c=tl;break;default:c=ii}return h=a0.bind(null,i),c=Dt(c,h),i.callbackPriority=s,i.callbackNode=c,s}return h!==null&&h!==null&&Ft(h),i.callbackPriority=2,i.callbackNode=null,2}function a0(i,s){if(Pe!==0&&Pe!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Kl()&&i.callbackNode!==c)return null;var h=Pt;return h=il(i,i===Xt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(Vy(i,h,s),s0(i,De()),i.callbackNode!=null&&i.callbackNode===c?a0.bind(null,i):null)}function r0(i,s){if(Kl())return null;Vy(i,s,!0)}function ME(){UE(function(){(kt&6)!==0?Dt(qs,RE):i0()})}function nd(){return Ts===0&&(Ts=Qp()),Ts}function o0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ll(""+i)}function l0(i,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,i.id&&c.setAttribute("form",i.id),s.parentNode.insertBefore(c,s),i=new FormData(i),c.parentNode.removeChild(c),i}function DE(i,s,c,h,m){if(s==="submit"&&c&&c.stateNode===m){var y=o0((m[Ke]||null).action),w=h.submitter;w&&(s=(s=w[Ke]||null)?o0(s.formAction):w.getAttribute("formAction"),s!==null&&(y=s,w=null));var _=new dl("action","action",null,h,m);i.push({event:_,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ts!==0){var M=w?l0(m,w):new FormData(m);wh(c,{pending:!0,data:M,method:m.method,action:y},null,M)}}else typeof y=="function"&&(_.preventDefault(),M=w?l0(m,w):new FormData(m),wh(c,{pending:!0,data:M,method:m.method,action:y},y,M))},currentTarget:m}]})}}for(var id=0;id<Vu.length;id++){var sd=Vu[id],LE=sd.toLowerCase(),PE=sd[0].toUpperCase()+sd.slice(1);Pn(LE,"on"+PE)}Pn(Vm,"onAnimationEnd"),Pn(zm,"onAnimationIteration"),Pn(Hm,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(Kw,"onTransitionRun"),Pn(Ww,"onTransitionStart"),Pn(Qw,"onTransitionCancel"),Pn(Gm,"onTransitionEnd"),Ws("onMouseEnter",["mouseout","mouseover"]),Ws("onMouseLeave",["mouseout","mouseover"]),Ws("onPointerEnter",["pointerout","pointerover"]),Ws("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xr));function c0(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var h=i[c],m=h.event;h=h.listeners;t:{var y=void 0;if(s)for(var w=h.length-1;0<=w;w--){var _=h[w],M=_.instance,V=_.currentTarget;if(_=_.listener,M!==y&&m.isPropagationStopped())break t;y=_,m.currentTarget=V;try{y(m)}catch(X){Il(X)}m.currentTarget=null,y=M}else for(w=0;w<h.length;w++){if(_=h[w],M=_.instance,V=_.currentTarget,_=_.listener,M!==y&&m.isPropagationStopped())break t;y=_,m.currentTarget=V;try{y(m)}catch(X){Il(X)}m.currentTarget=null,y=M}}}}function Ct(i,s){var c=s[yu];c===void 0&&(c=s[yu]=new Set);var h=i+"__bubble";c.has(h)||(u0(s,i,2,!1),c.add(h))}function ad(i,s,c){var h=0;s&&(h|=4),u0(c,i,h,s)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function rd(i){if(!i[Zl]){i[Zl]=!0,im.forEach(function(c){c!=="selectionchange"&&(OE.has(c)||ad(c,!1,i),ad(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Zl]||(s[Zl]=!0,ad("selectionchange",!1,s))}}function u0(i,s,c,h){switch(N0(s)){case 2:var m=rx;break;case 8:m=ox;break;default:m=Ad}c=m.bind(null,s,c,i),m=void 0,!Ru||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(s,c,{capture:!0,passive:m}):i.addEventListener(s,c,!0):m!==void 0?i.addEventListener(s,c,{passive:m}):i.addEventListener(s,c,!1)}function od(i,s,c,h,m){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)t:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var _=h.stateNode.containerInfo;if(_===m)break;if(w===4)for(w=h.return;w!==null;){var M=w.tag;if((M===3||M===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;_!==null;){if(w=Ys(_),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){h=y=w;continue t}_=_.parentNode}}h=h.return}ym(function(){var V=y,X=_u(c),W=[];t:{var H=qm.get(i);if(H!==void 0){var G=dl,gt=i;switch(i){case"keypress":if(ul(c)===0)break t;case"keydown":case"keyup":G=Cw;break;case"focusin":gt="focus",G=Pu;break;case"focusout":gt="blur",G=Pu;break;case"beforeblur":case"afterblur":G=Pu;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Am;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Dw;break;case Vm:case zm:case Hm:G=vw;break;case Gm:G=Pw;break;case"scroll":case"scrollend":G=fw;break;case"wheel":G=Nw;break;case"copy":case"cut":case"paste":G=Aw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=wm;break;case"toggle":case"beforetoggle":G=Bw}var ft=(s&4)!==0,jt=!ft&&(i==="scroll"||i==="scrollend"),F=ft?H!==null?H+"Capture":null:H;ft=[];for(var O=V,U;O!==null;){var $=O;if(U=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||U===null||F===null||($=hr(O,F),$!=null&&ft.push(Yr(O,$,U))),jt)break;O=O.return}0<ft.length&&(H=new G(H,gt,null,c,X),W.push({event:H,listeners:ft}))}}if((s&7)===0){t:{if(H=i==="mouseover"||i==="pointerover",G=i==="mouseout"||i==="pointerout",H&&c!==Tu&&(gt=c.relatedTarget||c.fromElement)&&(Ys(gt)||gt[Xs]))break t;if((G||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,G?(gt=c.relatedTarget||c.toElement,G=V,gt=gt?Ys(gt):null,gt!==null&&(jt=o(gt),ft=gt.tag,gt!==jt||ft!==5&&ft!==27&&ft!==6)&&(gt=null)):(G=null,gt=V),G!==gt)){if(ft=Am,$="onMouseLeave",F="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(ft=wm,$="onPointerLeave",F="onPointerEnter",O="pointer"),jt=G==null?H:ur(G),U=gt==null?H:ur(gt),H=new ft($,O+"leave",G,c,X),H.target=jt,H.relatedTarget=U,$=null,Ys(X)===V&&(ft=new ft(F,O+"enter",gt,c,X),ft.target=U,ft.relatedTarget=jt,$=ft),jt=$,G&&gt)e:{for(ft=G,F=gt,O=0,U=ft;U;U=Ca(U))O++;for(U=0,$=F;$;$=Ca($))U++;for(;0<O-U;)ft=Ca(ft),O--;for(;0<U-O;)F=Ca(F),U--;for(;O--;){if(ft===F||F!==null&&ft===F.alternate)break e;ft=Ca(ft),F=Ca(F)}ft=null}else ft=null;G!==null&&h0(W,H,G,ft,!1),gt!==null&&jt!==null&&h0(W,jt,gt,ft,!0)}}t:{if(H=V?ur(V):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var st=Dm;else if(Rm(H))if(Lm)st=Xw;else{st=Gw;var Tt=Hw}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?V&&xu(V.elementType)&&(st=Dm):st=qw;if(st&&(st=st(i,V))){Mm(W,st,c,X);break t}Tt&&Tt(i,H,V),i==="focusout"&&V&&H.type==="number"&&V.memoizedProps.value!=null&&Eu(H,"number",H.value)}switch(Tt=V?ur(V):window,i){case"focusin":(Rm(Tt)||Tt.contentEditable==="true")&&(ia=Tt,Iu=V,br=null);break;case"focusout":br=Iu=ia=null;break;case"mousedown":Uu=!0;break;case"contextmenu":case"mouseup":case"dragend":Uu=!1,Um(W,c,X);break;case"selectionchange":if($w)break;case"keydown":case"keyup":Um(W,c,X)}var ut;if(Nu)t:{switch(i){case"compositionstart":var pt="onCompositionStart";break t;case"compositionend":pt="onCompositionEnd";break t;case"compositionupdate":pt="onCompositionUpdate";break t}pt=void 0}else na?_m(i,c)&&(pt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(pt="onCompositionStart");pt&&(Em&&c.locale!=="ko"&&(na||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&na&&(ut=vm()):(Mi=X,Mu="value"in Mi?Mi.value:Mi.textContent,na=!0)),Tt=Jl(V,pt),0<Tt.length&&(pt=new Sm(pt,i,null,c,X),W.push({event:pt,listeners:Tt}),ut?pt.data=ut:(ut=Cm(c),ut!==null&&(pt.data=ut)))),(ut=Iw?Uw(i,c):jw(i,c))&&(pt=Jl(V,"onBeforeInput"),0<pt.length&&(Tt=new Sm("onBeforeInput","beforeinput",null,c,X),W.push({event:Tt,listeners:pt}),Tt.data=ut)),DE(W,i,V,c,X)}c0(W,s)})}function Yr(i,s,c){return{instance:i,listener:s,currentTarget:c}}function Jl(i,s){for(var c=s+"Capture",h=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=hr(i,c),m!=null&&h.unshift(Yr(i,m,y)),m=hr(i,s),m!=null&&h.push(Yr(i,m,y))),i.tag===3)return h;i=i.return}return[]}function Ca(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function h0(i,s,c,h,m){for(var y=s._reactName,w=[];c!==null&&c!==h;){var _=c,M=_.alternate,V=_.stateNode;if(_=_.tag,M!==null&&M===h)break;_!==5&&_!==26&&_!==27||V===null||(M=V,m?(V=hr(c,y),V!=null&&w.unshift(Yr(c,V,M))):m||(V=hr(c,y),V!=null&&w.push(Yr(c,V,M)))),c=c.return}w.length!==0&&i.push({event:s,listeners:w})}var NE=/\r\n?/g,kE=/\u0000|\uFFFD/g;function d0(i){return(typeof i=="string"?i:""+i).replace(NE,`
`).replace(kE,"")}function f0(i,s){return s=d0(s),d0(i)===s}function tc(){}function Ut(i,s,c,h,m,y){switch(c){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||Js(i,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&Js(i,""+h);break;case"className":al(i,"class",h);break;case"tabIndex":al(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":al(i,c,h);break;case"style":mm(i,h,y);break;case"data":if(s!=="object"){al(i,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||c!=="href")){i.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=ll(""+h),i.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(s!=="input"&&Ut(i,s,"name",m.name,m,null),Ut(i,s,"formEncType",m.formEncType,m,null),Ut(i,s,"formMethod",m.formMethod,m,null),Ut(i,s,"formTarget",m.formTarget,m,null)):(Ut(i,s,"encType",m.encType,m,null),Ut(i,s,"method",m.method,m,null),Ut(i,s,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=ll(""+h),i.setAttribute(c,h);break;case"onClick":h!=null&&(i.onclick=tc);break;case"onScroll":h!=null&&Ct("scroll",i);break;case"onScrollEnd":h!=null&&Ct("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}c=ll(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""+h):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":h===!0?i.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,h):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(c,h):i.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(c):i.setAttribute(c,h);break;case"popover":Ct("beforetoggle",i),Ct("toggle",i),sl(i,"popover",h);break;case"xlinkActuate":si(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":si(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":si(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":si(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":si(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":si(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":si(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":si(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":si(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":sl(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=hw.get(c)||c,sl(i,c,h))}}function ld(i,s,c,h,m,y){switch(c){case"style":mm(i,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof h=="string"?Js(i,h):(typeof h=="number"||typeof h=="bigint")&&Js(i,""+h);break;case"onScroll":h!=null&&Ct("scroll",i);break;case"onScrollEnd":h!=null&&Ct("scrollend",i);break;case"onClick":h!=null&&(i.onclick=tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sm.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),s=c.slice(2,m?c.length-7:void 0),y=i[Ke]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(s,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(s,h,m);break t}c in i?i[c]=h:h===!0?i.setAttribute(c,""):sl(i,c,h)}}}function Oe(i,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",i),Ct("load",i);var h=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var w=c[y];if(w!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ut(i,s,y,w,c,null)}}m&&Ut(i,s,"srcSet",c.srcSet,c,null),h&&Ut(i,s,"src",c.src,c,null);return;case"input":Ct("invalid",i);var _=y=w=m=null,M=null,V=null;for(h in c)if(c.hasOwnProperty(h)){var X=c[h];if(X!=null)switch(h){case"name":m=X;break;case"type":w=X;break;case"checked":M=X;break;case"defaultChecked":V=X;break;case"value":y=X;break;case"defaultValue":_=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(137,s));break;default:Ut(i,s,h,X,c,null)}}hm(i,y,_,M,V,w,m,!1),rl(i);return;case"select":Ct("invalid",i),h=w=y=null;for(m in c)if(c.hasOwnProperty(m)&&(_=c[m],_!=null))switch(m){case"value":y=_;break;case"defaultValue":w=_;break;case"multiple":h=_;default:Ut(i,s,m,_,c,null)}s=y,c=w,i.multiple=!!h,s!=null?Zs(i,!!h,s,!1):c!=null&&Zs(i,!!h,c,!0);return;case"textarea":Ct("invalid",i),y=m=h=null;for(w in c)if(c.hasOwnProperty(w)&&(_=c[w],_!=null))switch(w){case"value":h=_;break;case"defaultValue":m=_;break;case"children":y=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:Ut(i,s,w,_,c,null)}fm(i,h,m,y),rl(i);return;case"option":for(M in c)if(c.hasOwnProperty(M)&&(h=c[M],h!=null))switch(M){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ut(i,s,M,h,c,null)}return;case"dialog":Ct("beforetoggle",i),Ct("toggle",i),Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":Ct("load",i);break;case"video":case"audio":for(h=0;h<Xr.length;h++)Ct(Xr[h],i);break;case"image":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"embed":case"source":case"link":Ct("error",i),Ct("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in c)if(c.hasOwnProperty(V)&&(h=c[V],h!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ut(i,s,V,h,c,null)}return;default:if(xu(s)){for(X in c)c.hasOwnProperty(X)&&(h=c[X],h!==void 0&&ld(i,s,X,h,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(h=c[_],h!=null&&Ut(i,s,_,h,c,null))}function BE(i,s,c,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,w=null,_=null,M=null,V=null,X=null;for(G in c){var W=c[G];if(c.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":M=W;default:h.hasOwnProperty(G)||Ut(i,s,G,null,h,W)}}for(var H in h){var G=h[H];if(W=c[H],h.hasOwnProperty(H)&&(G!=null||W!=null))switch(H){case"type":y=G;break;case"name":m=G;break;case"checked":V=G;break;case"defaultChecked":X=G;break;case"value":w=G;break;case"defaultValue":_=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,s));break;default:G!==W&&Ut(i,s,H,G,h,W)}}wu(i,w,_,M,V,X,y,m);return;case"select":G=w=_=H=null;for(y in c)if(M=c[y],c.hasOwnProperty(y)&&M!=null)switch(y){case"value":break;case"multiple":G=M;default:h.hasOwnProperty(y)||Ut(i,s,y,null,h,M)}for(m in h)if(y=h[m],M=c[m],h.hasOwnProperty(m)&&(y!=null||M!=null))switch(m){case"value":H=y;break;case"defaultValue":_=y;break;case"multiple":w=y;default:y!==M&&Ut(i,s,m,y,h,M)}s=_,c=w,h=G,H!=null?Zs(i,!!c,H,!1):!!h!=!!c&&(s!=null?Zs(i,!!c,s,!0):Zs(i,!!c,c?[]:"",!1));return;case"textarea":G=H=null;for(_ in c)if(m=c[_],c.hasOwnProperty(_)&&m!=null&&!h.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ut(i,s,_,null,h,m)}for(w in h)if(m=h[w],y=c[w],h.hasOwnProperty(w)&&(m!=null||y!=null))switch(w){case"value":H=m;break;case"defaultValue":G=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==y&&Ut(i,s,w,m,h,y)}dm(i,H,G);return;case"option":for(var gt in c)if(H=c[gt],c.hasOwnProperty(gt)&&H!=null&&!h.hasOwnProperty(gt))switch(gt){case"selected":i.selected=!1;break;default:Ut(i,s,gt,null,h,H)}for(M in h)if(H=h[M],G=c[M],h.hasOwnProperty(M)&&H!==G&&(H!=null||G!=null))switch(M){case"selected":i.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ut(i,s,M,H,h,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in c)H=c[ft],c.hasOwnProperty(ft)&&H!=null&&!h.hasOwnProperty(ft)&&Ut(i,s,ft,null,h,H);for(V in h)if(H=h[V],G=c[V],h.hasOwnProperty(V)&&H!==G&&(H!=null||G!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(137,s));break;default:Ut(i,s,V,H,h,G)}return;default:if(xu(s)){for(var jt in c)H=c[jt],c.hasOwnProperty(jt)&&H!==void 0&&!h.hasOwnProperty(jt)&&ld(i,s,jt,void 0,h,H);for(X in h)H=h[X],G=c[X],!h.hasOwnProperty(X)||H===G||H===void 0&&G===void 0||ld(i,s,X,H,h,G);return}}for(var F in c)H=c[F],c.hasOwnProperty(F)&&H!=null&&!h.hasOwnProperty(F)&&Ut(i,s,F,null,h,H);for(W in h)H=h[W],G=c[W],!h.hasOwnProperty(W)||H===G||H==null&&G==null||Ut(i,s,W,H,h,G)}var cd=null,ud=null;function ec(i){return i.nodeType===9?i:i.ownerDocument}function p0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m0(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function hd(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var dd=null;function FE(){var i=window.event;return i&&i.type==="popstate"?i===dd?!1:(dd=i,!0):(dd=null,!1)}var g0=typeof setTimeout=="function"?setTimeout:void 0,IE=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,UE=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(i){return y0.resolve(null).then(i).catch(jE)}:g0;function jE(i){setTimeout(function(){throw i})}function qi(i){return i==="head"}function v0(i,s){var c=s,h=0,m=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<h&&8>h){c=h;var w=i.ownerDocument;if(c&1&&$r(w.documentElement),c&2&&$r(w.body),c&4)for(c=w.head,$r(c),w=c.firstChild;w;){var _=w.nextSibling,M=w.nodeName;w[cr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=_}}if(m===0){i.removeChild(y),no(s);return}m--}else c==="$"||c==="$?"||c==="$!"?m++:h=c.charCodeAt(0)-48;else h=0;c=y}while(c);no(s)}function fd(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":fd(c),vu(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function VE(i,s,c,h){for(;i.nodeType===1;){var m=c;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[cr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Nn(i.nextSibling),i===null)break}return null}function zE(i,s,c){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Nn(i.nextSibling),i===null))return null;return i}function pd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function HE(i,s){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")s();else{var h=function(){s(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Nn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var md=null;function b0(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return i;s--}else c==="/$"&&s++}i=i.previousSibling}return null}function A0(i,s,c){switch(s=ec(c),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function $r(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);vu(i)}var Tn=new Map,S0=new Set;function nc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var vi=z.d;z.d={f:GE,r:qE,D:XE,C:YE,L:$E,m:KE,X:QE,S:WE,M:ZE};function GE(){var i=vi.f(),s=Yl();return i||s}function qE(i){var s=$s(i);s!==null&&s.tag===5&&s.type==="form"?Vg(s):vi.r(i)}var Ra=typeof document>"u"?null:document;function w0(i,s,c){var h=Ra;if(h&&typeof s=="string"&&s){var m=vn(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),S0.has(m)||(S0.add(m),i={rel:i,crossOrigin:c,href:s},h.querySelector(m)===null&&(s=h.createElement("link"),Oe(s,"link",i),Ee(s),h.head.appendChild(s)))}}function XE(i){vi.D(i),w0("dns-prefetch",i,null)}function YE(i,s){vi.C(i,s),w0("preconnect",i,s)}function $E(i,s,c){vi.L(i,s,c);var h=Ra;if(h&&i&&s){var m='link[rel="preload"][as="'+vn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+vn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+vn(c.imageSizes)+'"]')):m+='[href="'+vn(i)+'"]';var y=m;switch(s){case"style":y=Ma(i);break;case"script":y=Da(i)}Tn.has(y)||(i=p({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:i,as:s},c),Tn.set(y,i),h.querySelector(m)!==null||s==="style"&&h.querySelector(Kr(y))||s==="script"&&h.querySelector(Wr(y))||(s=h.createElement("link"),Oe(s,"link",i),Ee(s),h.head.appendChild(s)))}}function KE(i,s){vi.m(i,s);var c=Ra;if(c&&i){var h=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+vn(h)+'"][href="'+vn(i)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Da(i)}if(!Tn.has(y)&&(i=p({rel:"modulepreload",href:i},s),Tn.set(y,i),c.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Wr(y)))return}h=c.createElement("link"),Oe(h,"link",i),Ee(h),c.head.appendChild(h)}}}function WE(i,s,c){vi.S(i,s,c);var h=Ra;if(h&&i){var m=Ks(h).hoistableStyles,y=Ma(i);s=s||"default";var w=m.get(y);if(!w){var _={loading:0,preload:null};if(w=h.querySelector(Kr(y)))_.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":s},c),(c=Tn.get(y))&&gd(i,c);var M=w=h.createElement("link");Ee(M),Oe(M,"link",i),M._p=new Promise(function(V,X){M.onload=V,M.onerror=X}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,ic(w,s,h)}w={type:"stylesheet",instance:w,count:1,state:_},m.set(y,w)}}}function QE(i,s){vi.X(i,s);var c=Ra;if(c&&i){var h=Ks(c).hoistableScripts,m=Da(i),y=h.get(m);y||(y=c.querySelector(Wr(m)),y||(i=p({src:i,async:!0},s),(s=Tn.get(m))&&yd(i,s),y=c.createElement("script"),Ee(y),Oe(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function ZE(i,s){vi.M(i,s);var c=Ra;if(c&&i){var h=Ks(c).hoistableScripts,m=Da(i),y=h.get(m);y||(y=c.querySelector(Wr(m)),y||(i=p({src:i,async:!0,type:"module"},s),(s=Tn.get(m))&&yd(i,s),y=c.createElement("script"),Ee(y),Oe(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function E0(i,s,c,h){var m=(m=rt.current)?nc(m):null;if(!m)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Ma(c.href),c=Ks(m).hoistableStyles,h=c.get(s),h||(h={type:"style",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ma(c.href);var y=Ks(m).hoistableStyles,w=y.get(i);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,w),(y=m.querySelector(Kr(i)))&&!y._p&&(w.instance=y,w.state.loading=5),Tn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Tn.set(i,c),y||JE(m,i,c,w.state))),s&&h===null)throw Error(n(528,""));return w}if(s&&h!==null)throw Error(n(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Da(c),c=Ks(m).hoistableScripts,h=c.get(s),h||(h={type:"script",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Ma(i){return'href="'+vn(i)+'"'}function Kr(i){return'link[rel="stylesheet"]['+i+"]"}function x0(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function JE(i,s,c,h){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=i.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),Oe(s,"link",c),Ee(s),i.head.appendChild(s))}function Da(i){return'[src="'+vn(i)+'"]'}function Wr(i){return"script[async]"+i}function T0(i,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var h=i.querySelector('style[data-href~="'+vn(c.href)+'"]');if(h)return s.instance=h,Ee(h),h;var m=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Ee(h),Oe(h,"style",m),ic(h,c.precedence,i),s.instance=h;case"stylesheet":m=Ma(c.href);var y=i.querySelector(Kr(m));if(y)return s.state.loading|=4,s.instance=y,Ee(y),y;h=x0(c),(m=Tn.get(m))&&gd(h,m),y=(i.ownerDocument||i).createElement("link"),Ee(y);var w=y;return w._p=new Promise(function(_,M){w.onload=_,w.onerror=M}),Oe(y,"link",h),s.state.loading|=4,ic(y,c.precedence,i),s.instance=y;case"script":return y=Da(c.src),(m=i.querySelector(Wr(y)))?(s.instance=m,Ee(m),m):(h=c,(m=Tn.get(y))&&(h=p({},c),yd(h,m)),i=i.ownerDocument||i,m=i.createElement("script"),Ee(m),Oe(m,"link",h),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,ic(h,c.precedence,i));return s.instance}function ic(i,s,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,w=0;w<h.length;w++){var _=h[w];if(_.dataset.precedence===s)y=_;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(i,s.firstChild))}function gd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function yd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var sc=null;function _0(i,s,c){if(sc===null){var h=new Map,m=sc=new Map;m.set(c,h)}else m=sc,h=m.get(c),h||(h=new Map,m.set(c,h));if(h.has(i))return h;for(h.set(i,null),c=c.getElementsByTagName(i),m=0;m<c.length;m++){var y=c[m];if(!(y[cr]||y[Fe]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(s)||"";w=i+w;var _=h.get(w);_?_.push(y):h.set(w,[y])}}return h}function C0(i,s,c){i=i.ownerDocument||i,i.head.insertBefore(c,s==="title"?i.querySelector("head > title"):null)}function tx(i,s,c){if(c===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function R0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Qr=null;function ex(){}function nx(i,s,c){if(Qr===null)throw Error(n(475));var h=Qr;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=Ma(c.href),y=i.querySelector(Kr(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=ac.bind(h),i.then(h,h)),s.state.loading|=4,s.instance=y,Ee(y);return}y=i.ownerDocument||i,c=x0(c),(m=Tn.get(m))&&gd(c,m),y=y.createElement("link"),Ee(y);var w=y;w._p=new Promise(function(_,M){w.onload=_,w.onerror=M}),Oe(y,"link",c),s.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(h.count++,s=ac.bind(h),i.addEventListener("load",s),i.addEventListener("error",s))}}function ix(){if(Qr===null)throw Error(n(475));var i=Qr;return i.stylesheets&&i.count===0&&vd(i,i.stylesheets),0<i.count?function(s){var c=setTimeout(function(){if(i.stylesheets&&vd(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(c)}}:null}function ac(){if(this.count--,this.count===0){if(this.stylesheets)vd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rc=null;function vd(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rc=new Map,s.forEach(sx,i),rc=null,ac.call(i))}function sx(i,s){if(!(s.state.loading&4)){var c=rc.get(i);if(c)var h=c.get(null);else{c=new Map,rc.set(i,c);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var w=m[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),h=w)}h&&c.set(null,h)}m=s.instance,w=m.getAttribute("data-precedence"),y=c.get(w)||h,y===h&&c.set(null,m),c.set(w,m),this.count++,h=ac.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var Zr={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function ax(i,s,c,h,m,y,w,_){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.hiddenUpdates=pu(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function M0(i,s,c,h,m,y,w,_,M,V,X,W){return i=new ax(i,s,c,w,_,M,V,W),s=1,y===!0&&(s|=24),y=on(3,null,null,s),i.current=y,y.stateNode=i,s=Ju(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:s},ih(y),i}function D0(i){return i?(i=oa,i):oa}function L0(i,s,c,h,m,y){m=D0(m),h.context===null?h.context=m:h.pendingContext=m,h=Pi(s),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=Oi(i,h,s),c!==null&&(dn(c,i,s),Rr(c,i,s))}function P0(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function bd(i,s){P0(i,s),(i=i.alternate)&&P0(i,s)}function O0(i){if(i.tag===13){var s=ra(i,67108864);s!==null&&dn(s,i,67108864),bd(i,67108864)}}var oc=!0;function rx(i,s,c,h){var m=k.T;k.T=null;var y=z.p;try{z.p=2,Ad(i,s,c,h)}finally{z.p=y,k.T=m}}function ox(i,s,c,h){var m=k.T;k.T=null;var y=z.p;try{z.p=8,Ad(i,s,c,h)}finally{z.p=y,k.T=m}}function Ad(i,s,c,h){if(oc){var m=Sd(h);if(m===null)od(i,s,h,lc,c),k0(i,h);else if(cx(m,i,s,c,h))h.stopPropagation();else if(k0(i,h),s&4&&-1<lx.indexOf(i)){for(;m!==null;){var y=$s(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=ls(y.pendingLanes);if(w!==0){var _=y;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var M=1<<31-re(w);_.entanglements[1]|=M,w&=~M}Hn(y),(kt&6)===0&&(ql=De()+500,qr(0))}}break;case 13:_=ra(y,2),_!==null&&dn(_,y,2),Yl(),bd(y,2)}if(y=Sd(h),y===null&&od(i,s,h,lc,c),y===m)break;m=y}m!==null&&h.stopPropagation()}else od(i,s,h,null,c)}}function Sd(i){return i=_u(i),wd(i)}var lc=null;function wd(i){if(lc=null,i=Ys(i),i!==null){var s=o(i);if(s===null)i=null;else{var c=s.tag;if(c===13){if(i=l(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return lc=i,null}function N0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rs()){case qs:return 2;case Jo:return 8;case ii:case hu:return 32;case tl:return 268435456;default:return 32}default:return 32}}var Ed=!1,Xi=null,Yi=null,$i=null,Jr=new Map,to=new Map,Ki=[],lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k0(i,s){switch(i){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(s.pointerId)}}function eo(i,s,c,h,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},s!==null&&(s=$s(s),s!==null&&O0(s)),i):(i.eventSystemFlags|=h,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function cx(i,s,c,h,m){switch(s){case"focusin":return Xi=eo(Xi,i,s,c,h,m),!0;case"dragenter":return Yi=eo(Yi,i,s,c,h,m),!0;case"mouseover":return $i=eo($i,i,s,c,h,m),!0;case"pointerover":var y=m.pointerId;return Jr.set(y,eo(Jr.get(y)||null,i,s,c,h,m)),!0;case"gotpointercapture":return y=m.pointerId,to.set(y,eo(to.get(y)||null,i,s,c,h,m)),!0}return!1}function B0(i){var s=Ys(i.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=l(c),s!==null){i.blockedOn=s,nw(i.priority,function(){if(c.tag===13){var h=hn();h=mu(h);var m=ra(c,h);m!==null&&dn(m,c,h),bd(c,h)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=Sd(i.nativeEvent);if(c===null){c=i.nativeEvent;var h=new c.constructor(c.type,c);Tu=h,c.target.dispatchEvent(h),Tu=null}else return s=$s(c),s!==null&&O0(s),i.blockedOn=c,!1;s.shift()}return!0}function F0(i,s,c){cc(i)&&c.delete(s)}function ux(){Ed=!1,Xi!==null&&cc(Xi)&&(Xi=null),Yi!==null&&cc(Yi)&&(Yi=null),$i!==null&&cc($i)&&($i=null),Jr.forEach(F0),to.forEach(F0)}function uc(i,s){i.blockedOn===s&&(i.blockedOn=null,Ed||(Ed=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,ux)))}var hc=null;function I0(i){hc!==i&&(hc=i,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){hc===i&&(hc=null);for(var s=0;s<i.length;s+=3){var c=i[s],h=i[s+1],m=i[s+2];if(typeof h!="function"){if(wd(h||c)===null)continue;break}var y=$s(c);y!==null&&(i.splice(s,3),s-=3,wh(y,{pending:!0,data:m,method:c.method,action:h},h,m))}}))}function no(i){function s(M){return uc(M,i)}Xi!==null&&uc(Xi,i),Yi!==null&&uc(Yi,i),$i!==null&&uc($i,i),Jr.forEach(s),to.forEach(s);for(var c=0;c<Ki.length;c++){var h=Ki[c];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Ki.length&&(c=Ki[0],c.blockedOn===null);)B0(c),c.blockedOn===null&&Ki.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var m=c[h],y=c[h+1],w=m[Ke]||null;if(typeof y=="function")w||I0(c);else if(w){var _=null;if(y&&y.hasAttribute("formAction")){if(m=y,w=y[Ke]||null)_=w.formAction;else if(wd(m)!==null)continue}else _=w.action;typeof _=="function"?c[h+1]=_:(c.splice(h,3),h-=3),I0(c)}}}function xd(i){this._internalRoot=i}dc.prototype.render=xd.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var c=s.current,h=hn();L0(c,h,i,s,null,null)},dc.prototype.unmount=xd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;L0(i.current,2,null,i,null,null),Yl(),s[Xs]=null}};function dc(i){this._internalRoot=i}dc.prototype.unstable_scheduleHydration=function(i){if(i){var s=em();i={blockedOn:null,target:i,priority:s};for(var c=0;c<Ki.length&&s!==0&&s<Ki[c].priority;c++);Ki.splice(c,0,i),c===0&&B0(i)}};var U0=t.version;if(U0!=="19.1.1")throw Error(n(527,U0,"19.1.1"));z.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=d(s),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var hx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{os=fc.inject(hx),ae=fc}catch{}}return so.createRoot=function(i,s){if(!r(i))throw Error(n(299));var c=!1,h="",m=ey,y=ny,w=iy,_=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(_=s.unstable_transitionCallbacks)),s=M0(i,1,!1,null,null,c,h,m,y,w,_,null),i[Xs]=s.current,rd(i),new xd(s)},so.hydrateRoot=function(i,s,c){if(!r(i))throw Error(n(299));var h=!1,m="",y=ey,w=ny,_=iy,M=null,V=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(M=c.unstable_transitionCallbacks),c.formState!==void 0&&(V=c.formState)),s=M0(i,1,!0,s,c??null,h,m,y,w,_,M,V),s.context=D0(null),c=s.current,h=hn(),h=mu(h),m=Pi(h),m.callback=null,Oi(c,m,h),c=h,s.current.lanes=c,lr(s,c),Hn(s),i[Xs]=s.current,rd(i),new dc(s)},so.version="19.1.1",so}var Q0;function Sx(){if(Q0)return Rd.exports;Q0=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Rd.exports=Ax(),Rd.exports}var wx=Sx();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Z0="popstate";function Ex(a={}){function t(n,r){let{pathname:o,search:l,hash:u}=n.location;return rf("",{pathname:o,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(n,r){return typeof r=="string"?r:Eo(r)}return Tx(t,e,null,a)}function ie(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function ei(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xx(){return Math.random().toString(36).substring(2,10)}function J0(a,t){return{usr:a.state,key:a.key,idx:t}}function rf(a,t,e=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof t=="string"?Ja(t):t,state:e,key:t&&t.key||n||xx()}}function Eo({pathname:a="/",search:t="",hash:e=""}){return t&&t!=="?"&&(a+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(a+=e.charAt(0)==="#"?e:"#"+e),a}function Ja(a){let t={};if(a){let e=a.indexOf("#");e>=0&&(t.hash=a.substring(e),a=a.substring(0,e));let n=a.indexOf("?");n>=0&&(t.search=a.substring(n),a=a.substring(0,n)),a&&(t.pathname=a)}return t}function Tx(a,t,e,n={}){let{window:r=document.defaultView,v5Compat:o=!1}=n,l=r.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function g(){u="POP";let x=p(),E=x==null?null:x-f;f=x,d&&d({action:u,location:A.location,delta:E})}function v(x,E){u="PUSH";let T=rf(A.location,x,E);f=p()+1;let C=J0(T,f),D=A.createHref(T);try{l.pushState(C,"",D)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(D)}o&&d&&d({action:u,location:A.location,delta:1})}function b(x,E){u="REPLACE";let T=rf(A.location,x,E);f=p();let C=J0(T,f),D=A.createHref(T);l.replaceState(C,"",D),o&&d&&d({action:u,location:A.location,delta:0})}function S(x){return _x(x)}let A={get action(){return u},get location(){return a(r,l)},listen(x){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Z0,g),d=x,()=>{r.removeEventListener(Z0,g),d=null}},createHref(x){return t(r,x)},createURL:S,encodeLocation(x){let E=S(x);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:b,go(x){return l.go(x)}};return A}function _x(a,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),ie(e,"No window.location.(origin|href) available to create URL");let n=typeof a=="string"?a:Eo(a);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function nA(a,t,e="/"){return Cx(a,t,e,!1)}function Cx(a,t,e,n){let r=typeof t=="string"?Ja(t):t,o=wi(r.pathname||"/",e);if(o==null)return null;let l=iA(a);Rx(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=Ux(o);u=Fx(l[d],f,n)}return u}function iA(a,t=[],e=[],n="",r=!1){let o=(l,u,d=r,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&d)return;ie(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=Si([n,p.relativePath]),v=e.concat(p);l.children&&l.children.length>0&&(ie(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),iA(l.children,t,v,g,d)),!(l.path==null&&!l.index)&&t.push({path:g,score:kx(g,l.index),routesMeta:v})};return a.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of sA(l.path))o(l,u,!0,d)}),t}function sA(a){let t=a.split("/");if(t.length===0)return[];let[e,...n]=t,r=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let l=sA(n.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&u.push(...l),u.map(d=>a.startsWith("/")&&d===""?"/":d)}function Rx(a){a.sort((t,e)=>t.score!==e.score?e.score-t.score:Bx(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var Mx=/^:[\w-]+$/,Dx=3,Lx=2,Px=1,Ox=10,Nx=-2,tv=a=>a==="*";function kx(a,t){let e=a.split("/"),n=e.length;return e.some(tv)&&(n+=Nx),t&&(n+=Lx),e.filter(r=>!tv(r)).reduce((r,o)=>r+(Mx.test(o)?Dx:o===""?Px:Ox),n)}function Bx(a,t){return a.length===t.length&&a.slice(0,-1).every((n,r)=>n===t[r])?a[a.length-1]-t[t.length-1]:0}function Fx(a,t,e=!1){let{routesMeta:n}=a,r={},o="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,p=o==="/"?t:t.slice(o.length)||"/",g=Fc({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!g&&f&&e&&!n[n.length-1].route.index&&(g=Fc({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!g)return null;Object.assign(r,g.params),l.push({params:r,pathname:Si([o,g.pathname]),pathnameBase:Hx(Si([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=Si([o,g.pathnameBase]))}return l}function Fc(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[e,n]=Ix(a.path,a.caseSensitive,a.end),r=t.match(e);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((f,{paramName:p,isOptional:g},v)=>{if(p==="*"){let S=u[v]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const b=u[v];return g&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:a}}function Ix(a,t=!1,e=!0){ei(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],r="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(n.push({paramName:"*"}),r+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":a!==""&&a!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}function Ux(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ei(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),a}}function wi(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=a.charAt(e);return n&&n!=="/"?null:a.slice(e)||"/"}function jx(a,t="/"){let{pathname:e,search:n="",hash:r=""}=typeof a=="string"?Ja(a):a;return{pathname:e?e.startsWith("/")?e:Vx(e,t):t,search:Gx(n),hash:qx(r)}}function Vx(a,t){let e=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function Pd(a,t,e,n){return`Cannot include a '${a}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zx(a){return a.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function aA(a){let t=zx(a);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function rA(a,t,e,n=!1){let r;typeof a=="string"?r=Ja(a):(r={...a},ie(!r.pathname||!r.pathname.includes("?"),Pd("?","pathname","search",r)),ie(!r.pathname||!r.pathname.includes("#"),Pd("#","pathname","hash",r)),ie(!r.search||!r.search.includes("#"),Pd("#","search","hash",r)));let o=a===""||r.pathname==="",l=o?"/":r.pathname,u;if(l==null)u=e;else{let g=t.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}u=g>=0?t[g]:"/"}let d=jx(r,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var Si=a=>a.join("/").replace(/\/\/+/g,"/"),Hx=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),Gx=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,qx=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function Xx(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var oA=["POST","PUT","PATCH","DELETE"];new Set(oA);var Yx=["GET",...oA];new Set(Yx);var tr=P.createContext(null);tr.displayName="DataRouter";var Wc=P.createContext(null);Wc.displayName="DataRouterState";P.createContext(!1);var lA=P.createContext({isTransitioning:!1});lA.displayName="ViewTransition";var $x=P.createContext(new Map);$x.displayName="Fetchers";var Kx=P.createContext(null);Kx.displayName="Await";var ni=P.createContext(null);ni.displayName="Navigation";var Fo=P.createContext(null);Fo.displayName="Location";var Ci=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ci.displayName="Route";var qf=P.createContext(null);qf.displayName="RouteError";function Wx(a,{relative:t}={}){ie(Io(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=P.useContext(ni),{hash:r,pathname:o,search:l}=Uo(a,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:Si([e,o])),n.createHref({pathname:u,search:l,hash:r})}function Io(){return P.useContext(Fo)!=null}function zs(){return ie(Io(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Fo).location}var cA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uA(a){P.useContext(ni).static||P.useLayoutEffect(a)}function Qx(){let{isDataRoute:a}=P.useContext(Ci);return a?uT():Zx()}function Zx(){ie(Io(),"useNavigate() may be used only in the context of a <Router> component.");let a=P.useContext(tr),{basename:t,navigator:e}=P.useContext(ni),{matches:n}=P.useContext(Ci),{pathname:r}=zs(),o=JSON.stringify(aA(n)),l=P.useRef(!1);return uA(()=>{l.current=!0}),P.useCallback((d,f={})=>{if(ei(l.current,cA),!l.current)return;if(typeof d=="number"){e.go(d);return}let p=rA(d,JSON.parse(o),r,f.relative==="path");a==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Si([t,p.pathname])),(f.replace?e.replace:e.push)(p,f.state,f)},[t,e,o,r,a])}P.createContext(null);function Uo(a,{relative:t}={}){let{matches:e}=P.useContext(Ci),{pathname:n}=zs(),r=JSON.stringify(aA(e));return P.useMemo(()=>rA(a,JSON.parse(r),n,t==="path"),[a,r,n,t])}function Jx(a,t){return hA(a,t)}function hA(a,t,e,n,r){ie(Io(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=P.useContext(ni),{matches:l}=P.useContext(Ci),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let T=g&&g.path||"";dA(f,!g||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let v=zs(),b;if(t){let T=typeof t=="string"?Ja(t):t;ie(p==="/"||T.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),b=T}else b=v;let S=b.pathname||"/",A=S;if(p!=="/"){let T=p.replace(/^\//,"").split("/");A="/"+S.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=nA(a,{pathname:A});ei(g||x!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ei(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=sT(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:Si([p,o.encodeLocation?o.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:Si([p,o.encodeLocation?o.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),l,e,n,r);return t&&E?P.createElement(Fo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},E):E}function tT(){let a=cT(),t=Xx(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),e=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",a),l=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),e?P.createElement("pre",{style:r},e):null,l)}var eT=P.createElement(tT,null),nT=class extends P.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,t){return t.location!==a.location||t.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:t.error,location:t.location,revalidation:a.revalidation||t.revalidation}}componentDidCatch(a,t){this.props.unstable_onError?this.props.unstable_onError(a,t):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?P.createElement(Ci.Provider,{value:this.props.routeContext},P.createElement(qf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iT({routeContext:a,match:t,children:e}){let n=P.useContext(tr);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(Ci.Provider,{value:a},e)}function sT(a,t=[],e=null,n=null,r=null){if(a==null){if(!e)return null;if(e.errors)a=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)a=e.matches;else return null}let o=a,l=e?.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);ie(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(e)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:v}=e,b=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||b){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let v,b=!1,S=null,A=null;e&&(v=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||eT,u&&(d<0&&g===0?(dA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,A=null):d===g&&(b=!0,A=p.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,g+1)),E=()=>{let T;return v?T=S:b?T=A:p.route.Component?T=P.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,P.createElement(iT,{match:p,routeContext:{outlet:f,matches:x,isDataRoute:e!=null},children:T})};return e&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(nT,{location:e.location,revalidation:e.revalidation,component:S,error:v,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:n}):E()},null)}function Xf(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aT(a){let t=P.useContext(tr);return ie(t,Xf(a)),t}function rT(a){let t=P.useContext(Wc);return ie(t,Xf(a)),t}function oT(a){let t=P.useContext(Ci);return ie(t,Xf(a)),t}function Yf(a){let t=oT(a),e=t.matches[t.matches.length-1];return ie(e.route.id,`${a} can only be used on routes that contain a unique "id"`),e.route.id}function lT(){return Yf("useRouteId")}function cT(){let a=P.useContext(qf),t=rT("useRouteError"),e=Yf("useRouteError");return a!==void 0?a:t.errors?.[e]}function uT(){let{router:a}=aT("useNavigate"),t=Yf("useNavigate"),e=P.useRef(!1);return uA(()=>{e.current=!0}),P.useCallback(async(r,o={})=>{ei(e.current,cA),e.current&&(typeof r=="number"?a.navigate(r):await a.navigate(r,{fromRouteId:t,...o}))},[a,t])}var ev={};function dA(a,t,e){!t&&!ev[a]&&(ev[a]=!0,ei(!1,e))}P.memo(hT);function hT({routes:a,future:t,state:e,unstable_onError:n}){return hA(a,void 0,e,n,t)}function of(a){ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dT({basename:a="/",children:t=null,location:e,navigationType:n="POP",navigator:r,static:o=!1}){ie(!Io(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=a.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);typeof e=="string"&&(e=Ja(e));let{pathname:d="/",search:f="",hash:p="",state:g=null,key:v="default"}=e,b=P.useMemo(()=>{let S=wi(d,l);return S==null?null:{location:{pathname:S,search:f,hash:p,state:g,key:v},navigationType:n}},[l,d,f,p,g,v,n]);return ei(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:P.createElement(ni.Provider,{value:u},P.createElement(Fo.Provider,{children:t,value:b}))}function fT({children:a,location:t}){return Jx(lf(a),t)}function lf(a,t=[]){let e=[];return P.Children.forEach(a,(n,r)=>{if(!P.isValidElement(n))return;let o=[...t,r];if(n.type===P.Fragment){e.push.apply(e,lf(n.props.children,o));return}ie(n.type===of,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ie(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=lf(n.props.children,o)),e.push(l)}),e}var Mc="get",Dc="application/x-www-form-urlencoded";function Qc(a){return a!=null&&typeof a.tagName=="string"}function pT(a){return Qc(a)&&a.tagName.toLowerCase()==="button"}function mT(a){return Qc(a)&&a.tagName.toLowerCase()==="form"}function gT(a){return Qc(a)&&a.tagName.toLowerCase()==="input"}function yT(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function vT(a,t){return a.button===0&&(!t||t==="_self")&&!yT(a)}var pc=null;function bT(){if(pc===null)try{new FormData(document.createElement("form"),0),pc=!1}catch{pc=!0}return pc}var AT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Od(a){return a!=null&&!AT.has(a)?(ei(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dc}"`),null):a}function ST(a,t){let e,n,r,o,l;if(mT(a)){let u=a.getAttribute("action");n=u?wi(u,t):null,e=a.getAttribute("method")||Mc,r=Od(a.getAttribute("enctype"))||Dc,o=new FormData(a)}else if(pT(a)||gT(a)&&(a.type==="submit"||a.type==="image")){let u=a.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=a.getAttribute("formaction")||u.getAttribute("action");if(n=d?wi(d,t):null,e=a.getAttribute("formmethod")||u.getAttribute("method")||Mc,r=Od(a.getAttribute("formenctype"))||Od(u.getAttribute("enctype"))||Dc,o=new FormData(u,a),!bT()){let{name:f,type:p,value:g}=a;if(p==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,g)}}else{if(Qc(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Mc,n=null,r=Dc,l=a}return o&&r==="text/plain"&&(l=o,o=void 0),{action:n,method:e.toLowerCase(),encType:r,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $f(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function wT(a,t,e){let n=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&wi(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function ET(a,t){if(a.id in t)return t[a.id];try{let e=await import(a.module);return t[a.id]=e,e}catch(e){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xT(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function TT(a,t,e){let n=await Promise.all(a.map(async r=>{let o=t.routes[r.route.id];if(o){let l=await ET(o,e);return l.links?l.links():[]}return[]}));return MT(n.flat(1).filter(xT).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function nv(a,t,e,n,r,o){let l=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,u=(d,f)=>e[f].pathname!==d.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function _T(a,t,{includeHydrateFallback:e}={}){return CT(a.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function CT(a){return[...new Set(a)]}function RT(a){let t={},e=Object.keys(a).sort();for(let n of e)t[n]=a[n];return t}function MT(a,t){let e=new Set;return new Set(t),a.reduce((n,r)=>{let o=JSON.stringify(RT(r));return e.has(o)||(e.add(o),n.push({key:o,link:r})),n},[])}function fA(){let a=P.useContext(tr);return $f(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function DT(){let a=P.useContext(Wc);return $f(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Kf=P.createContext(void 0);Kf.displayName="FrameworkContext";function pA(){let a=P.useContext(Kf);return $f(a,"You must render this element inside a <HydratedRouter> element"),a}function LT(a,t){let e=P.useContext(Kf),[n,r]=P.useState(!1),[o,l]=P.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=t,v=P.useRef(null);P.useEffect(()=>{if(a==="render"&&l(!0),a==="viewport"){let A=E=>{E.forEach(T=>{l(T.isIntersecting)})},x=new IntersectionObserver(A,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[a]),P.useEffect(()=>{if(n){let A=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(A)}}},[n]);let b=()=>{r(!0)},S=()=>{r(!1),l(!1)};return e?a!=="intent"?[o,v,{}]:[o,v,{onFocus:ao(u,b),onBlur:ao(d,S),onMouseEnter:ao(f,b),onMouseLeave:ao(p,S),onTouchStart:ao(g,b)}]:[!1,v,{}]}function ao(a,t){return e=>{a&&a(e),e.defaultPrevented||t(e)}}function PT({page:a,...t}){let{router:e}=fA(),n=P.useMemo(()=>nA(e.routes,a,e.basename),[e.routes,a,e.basename]);return n?P.createElement(NT,{page:a,matches:n,...t}):null}function OT(a){let{manifest:t,routeModules:e}=pA(),[n,r]=P.useState([]);return P.useEffect(()=>{let o=!1;return TT(a,t,e).then(l=>{o||r(l)}),()=>{o=!0}},[a,t,e]),n}function NT({page:a,matches:t,...e}){let n=zs(),{manifest:r,routeModules:o}=pA(),{basename:l}=fA(),{loaderData:u,matches:d}=DT(),f=P.useMemo(()=>nv(a,t,d,r,n,"data"),[a,t,d,r,n]),p=P.useMemo(()=>nv(a,t,d,r,n,"assets"),[a,t,d,r,n]),g=P.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let S=new Set,A=!1;if(t.forEach(E=>{let T=r.routes[E.route.id];!T||!T.hasLoader||(!f.some(C=>C.route.id===E.route.id)&&E.route.id in u&&o[E.route.id]?.shouldRevalidate||T.hasClientLoader?A=!0:S.add(E.route.id))}),S.size===0)return[];let x=wT(a,l,"data");return A&&S.size>0&&x.searchParams.set("_routes",t.filter(E=>S.has(E.route.id)).map(E=>E.route.id).join(",")),[x.pathname+x.search]},[l,u,n,r,f,t,a,o]),v=P.useMemo(()=>_T(p,r),[p,r]),b=OT(p);return P.createElement(P.Fragment,null,g.map(S=>P.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),v.map(S=>P.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),b.map(({key:S,link:A})=>P.createElement("link",{key:S,nonce:e.nonce,...A})))}function kT(...a){return t=>{a.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var mA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mA&&(window.__reactRouterVersion="7.9.1")}catch{}function BT({basename:a,children:t,window:e}){let n=P.useRef();n.current==null&&(n.current=Ex({window:e,v5Compat:!0}));let r=n.current,[o,l]=P.useState({action:r.action,location:r.location}),u=P.useCallback(d=>{P.startTransition(()=>l(d))},[l]);return P.useLayoutEffect(()=>r.listen(u),[r,u]),P.createElement(dT,{basename:a,children:t,location:o.location,navigationType:o.action,navigator:r})}var gA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yA=P.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:r,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:g,...v},b){let{basename:S}=P.useContext(ni),A=typeof f=="string"&&gA.test(f),x,E=!1;if(typeof f=="string"&&A&&(x=f,mA))try{let q=new URL(window.location.href),K=f.startsWith("//")?new URL(q.protocol+f):new URL(f),J=wi(K.pathname,S);K.origin===q.origin&&J!=null?f=J+K.search+K.hash:E=!0}catch{ei(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=Wx(f,{relative:r}),[C,D,R]=LT(n,v),N=jT(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:r,viewTransition:g});function B(q){t&&t(q),q.defaultPrevented||N(q)}let I=P.createElement("a",{...v,...R,href:x||T,onClick:E||o?t:B,ref:kT(b,D),target:d,"data-discover":!A&&e==="render"?"true":void 0});return C&&!A?P.createElement(P.Fragment,null,I,P.createElement(PT,{page:T})):I});yA.displayName="Link";var FT=P.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:r=!1,style:o,to:l,viewTransition:u,children:d,...f},p){let g=Uo(l,{relative:f.relative}),v=zs(),b=P.useContext(Wc),{navigator:S,basename:A}=P.useContext(ni),x=b!=null&&qT(g)&&u===!0,E=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,T=v.pathname,C=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;e||(T=T.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&A&&(C=wi(C,A)||C);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let R=T===E||!r&&T.startsWith(E)&&T.charAt(D)==="/",N=C!=null&&(C===E||!r&&C.startsWith(E)&&C.charAt(E.length)==="/"),B={isActive:R,isPending:N,isTransitioning:x},I=R?t:void 0,q;typeof n=="function"?q=n(B):q=[n,R?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let K=typeof o=="function"?o(B):o;return P.createElement(yA,{...f,"aria-current":I,className:q,ref:p,style:K,to:l,viewTransition:u},typeof d=="function"?d(B):d)});FT.displayName="NavLink";var IT=P.forwardRef(({discover:a="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:r,state:o,method:l=Mc,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:g,...v},b)=>{let S=HT(),A=GT(u,{relative:f}),x=l.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&gA.test(u),T=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let D=C.nativeEvent.submitter,R=D?.getAttribute("formmethod")||l;S(D||C.currentTarget,{fetcherKey:t,method:R,navigate:e,replace:r,state:o,relative:f,preventScrollReset:p,viewTransition:g})};return P.createElement("form",{ref:b,method:x,action:A,onSubmit:n?d:T,...v,"data-discover":!E&&a==="render"?"true":void 0})});IT.displayName="Form";function UT(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vA(a){let t=P.useContext(tr);return ie(t,UT(a)),t}function jT(a,{target:t,replace:e,state:n,preventScrollReset:r,relative:o,viewTransition:l}={}){let u=Qx(),d=zs(),f=Uo(a,{relative:o});return P.useCallback(p=>{if(vT(p,t)){p.preventDefault();let g=e!==void 0?e:Eo(d)===Eo(f);u(a,{replace:g,state:n,preventScrollReset:r,relative:o,viewTransition:l})}},[d,u,f,e,n,t,a,r,o,l])}var VT=0,zT=()=>`__${String(++VT)}__`;function HT(){let{router:a}=vA("useSubmit"),{basename:t}=P.useContext(ni),e=lT();return P.useCallback(async(n,r={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=ST(n,t);if(r.navigate===!1){let p=r.fetcherKey||zT();await a.fetch(p,e,r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||l,formEncType:r.encType||u,flushSync:r.flushSync})}else await a.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||l,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[a,t,e])}function GT(a,{relative:t}={}){let{basename:e}=P.useContext(ni),n=P.useContext(Ci);ie(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),o={...Uo(a||".",{relative:t})},l=zs();if(a==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();o.search=p?`?${p}`:""}}return(!a||a===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Si([e,o.pathname])),Eo(o)}function qT(a,{relative:t}={}){let e=P.useContext(lA);ie(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vA("useViewTransitionState"),r=Uo(a,{relative:t});if(!e.isTransitioning)return!1;let o=wi(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=wi(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Fc(r.pathname,l)!=null||Fc(r.pathname,o)!=null}const iv=a=>{let t;const e=new Set,n=(f,p)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(b=>b(t,v))}},r=()=>t,u={setState:n,getState:r,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=a(n,r,u);return u},XT=(a=>a?iv(a):iv),YT=a=>a;function $T(a,t=YT){const e=Fn.useSyncExternalStore(a.subscribe,Fn.useCallback(()=>t(a.getState()),[a,t]),Fn.useCallback(()=>t(a.getInitialState()),[a,t]));return Fn.useDebugValue(e),e}const KT=a=>{const t=XT(a),e=n=>$T(t,n);return Object.assign(e,t),e},Wf=(a=>KT),sv={BASE_URL:"/landing-page/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},xo=new Map,mc=a=>{const t=xo.get(a);return t?Object.fromEntries(Object.entries(t.stores).map(([e,n])=>[e,n.getState()])):{}},WT=(a,t,e)=>{if(a===void 0)return{type:"untracked",connection:t.connect(e)};const n=xo.get(e.name);if(n)return{type:"tracked",store:a,...n};const r={connection:t.connect(e),stores:{}};return xo.set(e.name,r),{type:"tracked",store:a,...r}},QT=(a,t)=>{if(t===void 0)return;const e=xo.get(a);e&&(delete e.stores[t],Object.keys(e.stores).length===0&&xo.delete(a))},ZT=a=>{var t,e;if(!a)return;const n=a.split(`
`),r=n.findIndex(l=>l.includes("api.setState"));if(r<0)return;const o=((t=n[r+1])==null?void 0:t.trim())||"";return(e=/.+ (.+) .+/.exec(o))==null?void 0:e[1]},JT=(a,t={})=>(e,n,r)=>{const{enabled:o,anonymousActionType:l,store:u,...d}=t;let f;try{f=(o??(sv?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!f)return a(e,n,r);const{connection:p,...g}=WT(u,f,d);let v=!0;r.setState=((A,x,E)=>{const T=e(A,x);if(!v)return T;const C=E===void 0?{type:l||ZT(new Error().stack)||"anonymous"}:typeof E=="string"?{type:E}:E;return u===void 0?(p?.send(C,n()),T):(p?.send({...C,type:`${u}/${C.type}`},{...mc(d.name),[u]:r.getState()}),T)}),r.devtools={cleanup:()=>{p&&typeof p.unsubscribe=="function"&&p.unsubscribe(),QT(d.name,u)}};const b=(...A)=>{const x=v;v=!1,e(...A),v=x},S=a(r.setState,n,r);if(g.type==="untracked"?p?.init(S):(g.stores[g.store]=r,p?.init(Object.fromEntries(Object.entries(g.stores).map(([A,x])=>[A,A===g.store?S:x.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let A=!1;const x=r.dispatch;r.dispatch=(...E)=>{(sv?"production":void 0)!=="production"&&E[0].type==="__setState"&&!A&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),A=!0),x(...E)}}return p.subscribe(A=>{var x;switch(A.type){case"ACTION":if(typeof A.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Nd(A.payload,E=>{if(E.type==="__setState"){if(u===void 0){b(E.state);return}Object.keys(E.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=E.state[u];if(T==null)return;JSON.stringify(r.getState())!==JSON.stringify(T)&&b(T);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(E)});case"DISPATCH":switch(A.payload.type){case"RESET":return b(S),u===void 0?p?.init(r.getState()):p?.init(mc(d.name));case"COMMIT":if(u===void 0){p?.init(r.getState());return}return p?.init(mc(d.name));case"ROLLBACK":return Nd(A.state,E=>{if(u===void 0){b(E),p?.init(r.getState());return}b(E[u]),p?.init(mc(d.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Nd(A.state,E=>{if(u===void 0){b(E);return}JSON.stringify(r.getState())!==JSON.stringify(E[u])&&b(E[u])});case"IMPORT_STATE":{const{nextLiftedState:E}=A.payload,T=(x=E.computedStates.slice(-1)[0])==null?void 0:x.state;if(!T)return;b(u===void 0?T:T[u]),p?.send(null,E);return}case"PAUSE_RECORDING":return v=!v}return}}),S},bA=JT,Nd=(a,t)=>{let e;try{e=JSON.parse(a)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}e!==void 0&&t(e)};function t_(a,t){let e;try{e=a()}catch{return}return{getItem:r=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),u=(o=e.getItem(r))!=null?o:null;return u instanceof Promise?u.then(l):l(u)},setItem:(r,o)=>e.setItem(r,JSON.stringify(o,void 0)),removeItem:r=>e.removeItem(r)}}const cf=a=>t=>{try{const e=a(t);return e instanceof Promise?e:{then(n){return cf(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return cf(n)(e)}}}},e_=(a,t)=>(e,n,r)=>{let o={storage:t_(()=>localStorage),partialize:A=>A,version:0,merge:(A,x)=>({...x,...A}),...t},l=!1;const u=new Set,d=new Set;let f=o.storage;if(!f)return a((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...A)},n,r);const p=()=>{const A=o.partialize({...n()});return f.setItem(o.name,{state:A,version:o.version})},g=r.setState;r.setState=(A,x)=>(g(A,x),p());const v=a((...A)=>(e(...A),p()),n,r);r.getInitialState=()=>v;let b;const S=()=>{var A,x;if(!f)return;l=!1,u.forEach(T=>{var C;return T((C=n())!=null?C:v)});const E=((x=o.onRehydrateStorage)==null?void 0:x.call(o,(A=n())!=null?A:v))||void 0;return cf(f.getItem.bind(f))(o.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==o.version){if(o.migrate){const C=o.migrate(T.state,T.version);return C instanceof Promise?C.then(D=>[!0,D]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var C;const[D,R]=T;if(b=o.merge(R,(C=n())!=null?C:v),e(b,!0),D)return p()}).then(()=>{E?.(b,void 0),b=n(),l=!0,d.forEach(T=>T(b))}).catch(T=>{E?.(void 0,T)})};return r.persist={setOptions:A=>{o={...o,...A},A.storage&&(f=A.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>S(),hasHydrated:()=>l,onHydrate:A=>(u.add(A),()=>{u.delete(A)}),onFinishHydration:A=>(d.add(A),()=>{d.delete(A)})},o.skipHydration||S(),b||v},n_=e_,is=Wf()(bA(a=>({tabState:0,toggleTabState:t=>a({tabState:t})}),{name:"tabStates"})),Is=Wf()(bA(a=>({modalState:!1,indexState:!1,modalData:null,indexModalData:null,toggleModalState:t=>a({modalState:!t}),toggleIndexState:t=>a({indexState:!t})}),{name:"modalStates"})),AA=Wf()(n_(a=>({themeState:!1,toggleThemeState:t=>a({themeState:!t})}),{name:"themeState"}));var SA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},av=Fn.createContext&&Fn.createContext(SA),i_=["attr","size","title"];function s_(a,t){if(a==null)return{};var e=a_(a,t),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(e[n]=a[n])}return e}function a_(a,t){if(a==null)return{};var e={};for(var n in a)if(Object.prototype.hasOwnProperty.call(a,n)){if(t.indexOf(n)>=0)continue;e[n]=a[n]}return e}function Ic(){return Ic=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Ic.apply(this,arguments)}function rv(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),e.push.apply(e,n)}return e}function Uc(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?rv(Object(e),!0).forEach(function(n){r_(a,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):rv(Object(e)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(e,n))})}return a}function r_(a,t,e){return t=o_(t),t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function o_(a){var t=l_(a,"string");return typeof t=="symbol"?t:t+""}function l_(a,t){if(typeof a!="object"||!a)return a;var e=a[Symbol.toPrimitive];if(e!==void 0){var n=e.call(a,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function wA(a){return a&&a.map((t,e)=>Fn.createElement(t.tag,Uc({key:e},t.attr),wA(t.child)))}function ss(a){return t=>Fn.createElement(c_,Ic({attr:Uc({},a.attr)},t),wA(a.child))}function c_(a){var t=e=>{var{attr:n,size:r,title:o}=a,l=s_(a,i_),u=r||e.size||"1em",d;return e.className&&(d=e.className),a.className&&(d=(d?d+" ":"")+a.className),Fn.createElement("svg",Ic({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,l,{className:d,style:Uc(Uc({color:a.color||e.color},e.style),a.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Fn.createElement("title",null,o),a.children)};return av!==void 0?Fn.createElement(av.Consumer,null,e=>t(e)):t(SA)}function u_(a){return ss({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(a)}function h_(a){return ss({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(a)}function uf(a){return ss({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64Zm127.978 274.82-.034.006c-.023.007-.042.018-.083.059L512 466.745l-127.86-127.86c-.042-.041-.06-.052-.084-.059a.118.118 0 0 0-.07 0c-.022.007-.041.018-.082.059l-45.02 45.019c-.04.04-.05.06-.058.083a.118.118 0 0 0 0 .07l.01.022a.268.268 0 0 0 .049.06L466.745 512l-127.86 127.862c-.041.04-.052.06-.059.083a.118.118 0 0 0 0 .07c.007.022.018.041.059.082l45.019 45.02c.04.04.06.05.083.058a.118.118 0 0 0 .07 0c.022-.007.041-.018.082-.059L512 557.254l127.862 127.861c.04.041.06.052.083.059a.118.118 0 0 0 .07 0c.022-.007.041-.018.082-.059l45.02-45.019c.04-.04.05-.06.058-.083a.118.118 0 0 0 0-.07l-.01-.022a.268.268 0 0 0-.049-.06L557.254 512l127.861-127.86c.041-.042.052-.06.059-.084a.118.118 0 0 0 0-.07c-.007-.022-.018-.041-.059-.082l-45.019-45.02c-.04-.04-.06-.05-.083-.058a.118.118 0 0 0-.07 0Z"},child:[]}]})(a)}function d_(a){return ss({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M548 818v126c0 8.837-7.163 16-16 16h-40c-8.837 0-16-7.163-16-16V818c15.845 1.643 27.845 2.464 36 2.464 8.155 0 20.155-.821 36-2.464m205.251-115.66 89.096 89.095c6.248 6.248 6.248 16.38 0 22.627l-28.285 28.285c-6.248 6.248-16.379 6.248-22.627 0L702.34 753.25c12.365-10.043 21.431-17.947 27.198-23.713 5.766-5.767 13.67-14.833 23.713-27.198m-482.502 0c10.043 12.365 17.947 21.431 23.713 27.198 5.767 5.766 14.833 13.67 27.198 23.713l-89.095 89.096c-6.248 6.248-16.38 6.248-22.627 0l-28.285-28.285c-6.248-6.248-6.248-16.379 0-22.627zM512 278c129.235 0 234 104.765 234 234S641.235 746 512 746 278 641.235 278 512s104.765-234 234-234M206 476c-1.643 15.845-2.464 27.845-2.464 36 0 8.155.821 20.155 2.464 36H80c-8.837 0-16-7.163-16-16v-40c0-8.837 7.163-16 16-16zm738 0c8.837 0 16 7.163 16 16v40c0 8.837-7.163 16-16 16H818c1.643-15.845 2.464-27.845 2.464-36 0-8.155-.821-20.155-2.464-36ZM814.062 180.653l28.285 28.285c6.248 6.248 6.248 16.379 0 22.627L753.25 320.66c-10.043-12.365-17.947-21.431-23.713-27.198-5.767-5.766-14.833-13.67-27.198-23.713l89.095-89.096c6.248-6.248 16.38-6.248 22.627 0m-581.497 0 89.095 89.096c-12.365 10.043-21.431 17.947-27.198 23.713-5.766 5.767-13.67 14.833-23.713 27.198l-89.096-89.095c-6.248-6.248-6.248-16.38 0-22.627l28.285-28.285c6.248-6.248 16.379-6.248 22.627 0M532 64c8.837 0 16 7.163 16 16v126c-15.845-1.643-27.845-2.464-36-2.464-8.155 0-20.155.821-36 2.464V80c0-8.837 7.163-16 16-16z"},child:[]}]})(a)}function f_(){const{tabState:a}=is(),{themeState:t,toggleThemeState:e}=AA(),n=[{label:"Agency Details",link:"#agency-details"},{label:"Registration",link:"#registration"},{label:"License",link:"#license"},{label:"LETAS",link:"#letas"},{label:"Our Activities",link:"#our-activities"},{label:"About Us",link:"#about"}];return j.jsx("div",{className:`bg-[#0037af] dark:bg-[#2e2929] w-screen h-[3rem] px-2 ${t&&"dark"} transition-colors duration-300`,children:j.jsxs("div",{className:"flex items-center h-full w-full justify-between px-[2rem]",children:[j.jsx("div",{className:"flex items-center gap-2 cursor-pointer",children:j.jsx("a",{href:"#lto-bayombong",className:` ${a===0?"border-b-2 dark:border-amber-500 border-white":"border-b-2 border-[#fff0]"} transition-all duration-300 uppercase text-white text-[.8rem] font-semibold pb-[.15rem]`,children:"LTO Bayombong"})}),j.jsxs("div",{className:"flex items-center gap-5",children:[j.jsx("div",{className:"flex gap-4",children:n.map((r,o)=>j.jsx("a",{href:r.link,className:` ${o+1===a?"border-b-2 dark:border-amber-500 border-white":"border-b-2 border-[#fff0]"} transition-all duration-300 uppercase text-white text-[.8rem] font-semibold pb-[.15rem]`,children:r.label},o))}),j.jsxs("div",{className:"flex p-1 dark:bg-[#1f1c1c] bg-slate-200 rounded-sm gap-1",children:[j.jsx("div",{onClick:()=>e(!0),className:`dark:bg-[#2e2929] dark:hover:bg-[#352f2f] bg-white hover:bg-slate-300 p-1 rounded-sm cursor-pointer ${!t&&"!bg-slate-300"}`,children:j.jsx(d_,{className:"text-[#0037af] dark:text-white"})}),j.jsx("div",{onClick:()=>e(!1),className:`dark:bg-[#2e2929] dark:hover:bg-[#352f2f] bg-white hover:bg-slate-300 p-1 rounded-sm cursor-pointer ${t&&"!bg-[#484141]"}`,children:j.jsx(h_,{className:"text-[#0037af] dark:text-white"})})]})]})]})})}function p_({children:a}){return j.jsxs("div",{className:"flex flex-col w-screen h-screen relative select-none overflow-hidden",children:[j.jsx(f_,{}),j.jsx("div",{className:"flex w-full h-full overflow-hidden",children:j.jsx("div",{className:"w-full relative",children:j.jsx("div",{className:"bg-[#1f1c1c] h-full overflow-auto no-scrollbar scroll-smooth snap-y snap-mandatory snap-always",children:a})})})]})}const EA=P.createContext({});function m_(a){const t=P.useRef(null);return t.current===null&&(t.current=a()),t.current}const Qf=typeof window<"u",g_=Qf?P.useLayoutEffect:P.useEffect,Zf=P.createContext(null);function Jf(a,t){a.indexOf(t)===-1&&a.push(t)}function tp(a,t){const e=a.indexOf(t);e>-1&&a.splice(e,1)}const Ei=(a,t,e)=>e>t?t:e<a?a:e;let ep=()=>{};const xi={},xA=a=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(a);function TA(a){return typeof a=="object"&&a!==null}const _A=a=>/^0[^.\s]+$/u.test(a);function np(a){let t;return()=>(t===void 0&&(t=a()),t)}const Ln=a=>a,y_=(a,t)=>e=>t(a(e)),jo=(...a)=>a.reduce(y_),To=(a,t,e)=>{const n=t-a;return n===0?1:(e-a)/n};class ip{constructor(){this.subscriptions=[]}add(t){return Jf(this.subscriptions,t),()=>tp(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,n);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zn=a=>a*1e3,Jn=a=>a/1e3;function CA(a,t){return t?a*(1e3/t):0}const RA=(a,t,e)=>(((1-3*e+3*t)*a+(3*e-6*t))*a+3*t)*a,v_=1e-7,b_=12;function A_(a,t,e,n,r){let o,l,u=0;do l=t+(e-t)/2,o=RA(l,n,r)-a,o>0?e=l:t=l;while(Math.abs(o)>v_&&++u<b_);return l}function Vo(a,t,e,n){if(a===t&&e===n)return Ln;const r=o=>A_(o,0,1,a,e);return o=>o===0||o===1?o:RA(r(o),t,n)}const MA=a=>t=>t<=.5?a(2*t)/2:(2-a(2*(1-t)))/2,DA=a=>t=>1-a(1-t),LA=Vo(.33,1.53,.69,.99),sp=DA(LA),PA=MA(sp),OA=a=>(a*=2)<1?.5*sp(a):.5*(2-Math.pow(2,-10*(a-1))),ap=a=>1-Math.sin(Math.acos(a)),NA=DA(ap),kA=MA(ap),S_=Vo(.42,0,1,1),w_=Vo(0,0,.58,1),BA=Vo(.42,0,.58,1),E_=a=>Array.isArray(a)&&typeof a[0]!="number",FA=a=>Array.isArray(a)&&typeof a[0]=="number",x_={linear:Ln,easeIn:S_,easeInOut:BA,easeOut:w_,circIn:ap,circInOut:kA,circOut:NA,backIn:sp,backInOut:PA,backOut:LA,anticipate:OA},T_=a=>typeof a=="string",ov=a=>{if(FA(a)){ep(a.length===4);const[t,e,n,r]=a;return Vo(t,e,n,r)}else if(T_(a))return x_[a];return a},gc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function __(a,t){let e=new Set,n=new Set,r=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(p){l.has(p)&&(f.schedule(p),a()),p(u)}const f={schedule:(p,g=!1,v=!1)=>{const S=v&&r?e:n;return g&&l.add(p),S.has(p)||S.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(u=p,r){o=!0;return}r=!0,[e,n]=[n,e],e.forEach(d),e.clear(),r=!1,o&&(o=!1,f.process(p))}};return f}const C_=40;function IA(a,t){let e=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,l=gc.reduce((C,D)=>(C[D]=__(o),C),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:p,update:g,preRender:v,render:b,postRender:S}=l,A=()=>{const C=xi.useManualTiming?r.timestamp:performance.now();e=!1,xi.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(C-r.timestamp,C_),1)),r.timestamp=C,r.isProcessing=!0,u.process(r),d.process(r),f.process(r),p.process(r),g.process(r),v.process(r),b.process(r),S.process(r),r.isProcessing=!1,e&&t&&(n=!1,a(A))},x=()=>{e=!0,n=!0,r.isProcessing||a(A)};return{schedule:gc.reduce((C,D)=>{const R=l[D];return C[D]=(N,B=!1,I=!1)=>(e||x(),R.schedule(N,B,I)),C},{}),cancel:C=>{for(let D=0;D<gc.length;D++)l[gc[D]].cancel(C)},state:r,steps:l}}const{schedule:Qt,cancel:ts,state:ke,steps:kd}=IA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ln,!0);let Lc;function R_(){Lc=void 0}const sn={now:()=>(Lc===void 0&&sn.set(ke.isProcessing||xi.useManualTiming?ke.timestamp:performance.now()),Lc),set:a=>{Lc=a,queueMicrotask(R_)}},UA=a=>t=>typeof t=="string"&&t.startsWith(a),rp=UA("--"),M_=UA("var(--"),op=a=>M_(a)?D_.test(a.split("/*")[0].trim()):!1,D_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,er={test:a=>typeof a=="number",parse:parseFloat,transform:a=>a},_o={...er,transform:a=>Ei(0,1,a)},yc={...er,default:1},go=a=>Math.round(a*1e5)/1e5,lp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function L_(a){return a==null}const P_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cp=(a,t)=>e=>!!(typeof e=="string"&&P_.test(e)&&e.startsWith(a)||t&&!L_(e)&&Object.prototype.hasOwnProperty.call(e,t)),jA=(a,t,e)=>n=>{if(typeof n!="string")return n;const[r,o,l,u]=n.match(lp);return{[a]:parseFloat(r),[t]:parseFloat(o),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},O_=a=>Ei(0,255,a),Bd={...er,transform:a=>Math.round(O_(a))},Ds={test:cp("rgb","red"),parse:jA("red","green","blue"),transform:({red:a,green:t,blue:e,alpha:n=1})=>"rgba("+Bd.transform(a)+", "+Bd.transform(t)+", "+Bd.transform(e)+", "+go(_o.transform(n))+")"};function N_(a){let t="",e="",n="",r="";return a.length>5?(t=a.substring(1,3),e=a.substring(3,5),n=a.substring(5,7),r=a.substring(7,9)):(t=a.substring(1,2),e=a.substring(2,3),n=a.substring(3,4),r=a.substring(4,5),t+=t,e+=e,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const hf={test:cp("#"),parse:N_,transform:Ds.transform},zo=a=>({test:t=>typeof t=="string"&&t.endsWith(a)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${a}`}),Qi=zo("deg"),ti=zo("%"),yt=zo("px"),k_=zo("vh"),B_=zo("vw"),lv={...ti,parse:a=>ti.parse(a)/100,transform:a=>ti.transform(a*100)},Na={test:cp("hsl","hue"),parse:jA("hue","saturation","lightness"),transform:({hue:a,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(a)+", "+ti.transform(go(t))+", "+ti.transform(go(e))+", "+go(_o.transform(n))+")"},Ae={test:a=>Ds.test(a)||hf.test(a)||Na.test(a),parse:a=>Ds.test(a)?Ds.parse(a):Na.test(a)?Na.parse(a):hf.parse(a),transform:a=>typeof a=="string"?a:a.hasOwnProperty("red")?Ds.transform(a):Na.transform(a),getAnimatableNone:a=>{const t=Ae.parse(a);return t.alpha=0,Ae.transform(t)}},F_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function I_(a){return isNaN(a)&&typeof a=="string"&&(a.match(lp)?.length||0)+(a.match(F_)?.length||0)>0}const VA="number",zA="color",U_="var",j_="var(",cv="${}",V_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Co(a){const t=a.toString(),e=[],n={color:[],number:[],var:[]},r=[];let o=0;const u=t.replace(V_,d=>(Ae.test(d)?(n.color.push(o),r.push(zA),e.push(Ae.parse(d))):d.startsWith(j_)?(n.var.push(o),r.push(U_),e.push(d)):(n.number.push(o),r.push(VA),e.push(parseFloat(d))),++o,cv)).split(cv);return{values:e,split:u,indexes:n,types:r}}function HA(a){return Co(a).values}function GA(a){const{split:t,types:e}=Co(a),n=t.length;return r=>{let o="";for(let l=0;l<n;l++)if(o+=t[l],r[l]!==void 0){const u=e[l];u===VA?o+=go(r[l]):u===zA?o+=Ae.transform(r[l]):o+=r[l]}return o}}const z_=a=>typeof a=="number"?0:Ae.test(a)?Ae.getAnimatableNone(a):a;function H_(a){const t=HA(a);return GA(a)(t.map(z_))}const es={test:I_,parse:HA,createTransformer:GA,getAnimatableNone:H_};function Fd(a,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?a+(t-a)*6*e:e<1/2?t:e<2/3?a+(t-a)*(2/3-e)*6:a}function G_({hue:a,saturation:t,lightness:e,alpha:n}){a/=360,t/=100,e/=100;let r=0,o=0,l=0;if(!t)r=o=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,d=2*e-u;r=Fd(d,u,a+1/3),o=Fd(d,u,a),l=Fd(d,u,a-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:n}}function jc(a,t){return e=>e>0?t:a}const ne=(a,t,e)=>a+(t-a)*e,Id=(a,t,e)=>{const n=a*a,r=e*(t*t-n)+n;return r<0?0:Math.sqrt(r)},q_=[hf,Ds,Na],X_=a=>q_.find(t=>t.test(a));function uv(a){const t=X_(a);if(!t)return!1;let e=t.parse(a);return t===Na&&(e=G_(e)),e}const hv=(a,t)=>{const e=uv(a),n=uv(t);if(!e||!n)return jc(a,t);const r={...e};return o=>(r.red=Id(e.red,n.red,o),r.green=Id(e.green,n.green,o),r.blue=Id(e.blue,n.blue,o),r.alpha=ne(e.alpha,n.alpha,o),Ds.transform(r))},df=new Set(["none","hidden"]);function Y_(a,t){return df.has(a)?e=>e<=0?a:t:e=>e>=1?t:a}function $_(a,t){return e=>ne(a,t,e)}function up(a){return typeof a=="number"?$_:typeof a=="string"?op(a)?jc:Ae.test(a)?hv:Q_:Array.isArray(a)?qA:typeof a=="object"?Ae.test(a)?hv:K_:jc}function qA(a,t){const e=[...a],n=e.length,r=a.map((o,l)=>up(o)(o,t[l]));return o=>{for(let l=0;l<n;l++)e[l]=r[l](o);return e}}function K_(a,t){const e={...a,...t},n={};for(const r in e)a[r]!==void 0&&t[r]!==void 0&&(n[r]=up(a[r])(a[r],t[r]));return r=>{for(const o in n)e[o]=n[o](r);return e}}function W_(a,t){const e=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],l=a.indexes[o][n[o]],u=a.values[l]??0;e[r]=u,n[o]++}return e}const Q_=(a,t)=>{const e=es.createTransformer(t),n=Co(a),r=Co(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?df.has(a)&&!r.values.length||df.has(t)&&!n.values.length?Y_(a,t):jo(qA(W_(n,r),r.values),e):jc(a,t)};function XA(a,t,e){return typeof a=="number"&&typeof t=="number"&&typeof e=="number"?ne(a,t,e):up(a)(a,t)}const Z_=a=>{const t=({timestamp:e})=>a(e);return{start:(e=!0)=>Qt.update(t,e),stop:()=>ts(t),now:()=>ke.isProcessing?ke.timestamp:sn.now()}},YA=(a,t,e=10)=>{let n="";const r=Math.max(Math.round(t/e),2);for(let o=0;o<r;o++)n+=Math.round(a(o/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Vc=2e4;function hp(a){let t=0;const e=50;let n=a.next(t);for(;!n.done&&t<Vc;)t+=e,n=a.next(t);return t>=Vc?1/0:t}function J_(a,t=100,e){const n=e({...a,keyframes:[0,t]}),r=Math.min(hp(n),Vc);return{type:"keyframes",ease:o=>n.next(r*o).value/t,duration:Jn(r)}}const tC=5;function $A(a,t,e){const n=Math.max(t-tC,0);return CA(e-a(n),t-n)}const ce={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ud=.001;function eC({duration:a=ce.duration,bounce:t=ce.bounce,velocity:e=ce.velocity,mass:n=ce.mass}){let r,o,l=1-t;l=Ei(ce.minDamping,ce.maxDamping,l),a=Ei(ce.minDuration,ce.maxDuration,Jn(a)),l<1?(r=f=>{const p=f*l,g=p*a,v=p-e,b=ff(f,l),S=Math.exp(-g);return Ud-v/b*S},o=f=>{const g=f*l*a,v=g*e+e,b=Math.pow(l,2)*Math.pow(f,2)*a,S=Math.exp(-g),A=ff(Math.pow(f,2),l);return(-r(f)+Ud>0?-1:1)*((v-b)*S)/A}):(r=f=>{const p=Math.exp(-f*a),g=(f-e)*a+1;return-Ud+p*g},o=f=>{const p=Math.exp(-f*a),g=(e-f)*(a*a);return p*g});const u=5/a,d=iC(r,o,u);if(a=Zn(a),isNaN(d))return{stiffness:ce.stiffness,damping:ce.damping,duration:a};{const f=Math.pow(d,2)*n;return{stiffness:f,damping:l*2*Math.sqrt(n*f),duration:a}}}const nC=12;function iC(a,t,e){let n=e;for(let r=1;r<nC;r++)n=n-a(n)/t(n);return n}function ff(a,t){return a*Math.sqrt(1-t*t)}const sC=["duration","bounce"],aC=["stiffness","damping","mass"];function dv(a,t){return t.some(e=>a[e]!==void 0)}function rC(a){let t={velocity:ce.velocity,stiffness:ce.stiffness,damping:ce.damping,mass:ce.mass,isResolvedFromDuration:!1,...a};if(!dv(a,aC)&&dv(a,sC))if(a.visualDuration){const e=a.visualDuration,n=2*Math.PI/(e*1.2),r=n*n,o=2*Ei(.05,1,1-(a.bounce||0))*Math.sqrt(r);t={...t,mass:ce.mass,stiffness:r,damping:o}}else{const e=eC(a);t={...t,...e,mass:ce.mass},t.isResolvedFromDuration=!0}return t}function zc(a=ce.visualDuration,t=ce.bounce){const e=typeof a!="object"?{visualDuration:a,keyframes:[0,1],bounce:t}:a;let{restSpeed:n,restDelta:r}=e;const o=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:g,velocity:v,isResolvedFromDuration:b}=rC({...e,velocity:-Jn(e.velocity||0)}),S=v||0,A=f/(2*Math.sqrt(d*p)),x=l-o,E=Jn(Math.sqrt(d/p)),T=Math.abs(x)<5;n||(n=T?ce.restSpeed.granular:ce.restSpeed.default),r||(r=T?ce.restDelta.granular:ce.restDelta.default);let C;if(A<1){const R=ff(E,A);C=N=>{const B=Math.exp(-A*E*N);return l-B*((S+A*E*x)/R*Math.sin(R*N)+x*Math.cos(R*N))}}else if(A===1)C=R=>l-Math.exp(-E*R)*(x+(S+E*x)*R);else{const R=E*Math.sqrt(A*A-1);C=N=>{const B=Math.exp(-A*E*N),I=Math.min(R*N,300);return l-B*((S+A*E*x)*Math.sinh(I)+R*x*Math.cosh(I))/R}}const D={calculatedDuration:b&&g||null,next:R=>{const N=C(R);if(b)u.done=R>=g;else{let B=R===0?S:0;A<1&&(B=R===0?Zn(S):$A(C,R,N));const I=Math.abs(B)<=n,q=Math.abs(l-N)<=r;u.done=I&&q}return u.value=u.done?l:N,u},toString:()=>{const R=Math.min(hp(D),Vc),N=YA(B=>D.next(R*B).value,R,30);return R+"ms "+N},toTransition:()=>{}};return D}zc.applyToOptions=a=>{const t=J_(a,100,zc);return a.ease=t.ease,a.duration=Zn(t.duration),a.type="keyframes",a};function pf({keyframes:a,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:p}){const g=a[0],v={done:!1,value:g},b=I=>u!==void 0&&I<u||d!==void 0&&I>d,S=I=>u===void 0?d:d===void 0||Math.abs(u-I)<Math.abs(d-I)?u:d;let A=e*t;const x=g+A,E=l===void 0?x:l(x);E!==x&&(A=E-g);const T=I=>-A*Math.exp(-I/n),C=I=>E+T(I),D=I=>{const q=T(I),K=C(I);v.done=Math.abs(q)<=f,v.value=v.done?E:K};let R,N;const B=I=>{b(v.value)&&(R=I,N=zc({keyframes:[v.value,S(v.value)],velocity:$A(C,I,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return B(0),{calculatedDuration:null,next:I=>{let q=!1;return!N&&R===void 0&&(q=!0,D(I),B(I)),R!==void 0&&I>=R?N.next(I-R):(!q&&D(I),v)}}}function oC(a,t,e){const n=[],r=e||xi.mix||XA,o=a.length-1;for(let l=0;l<o;l++){let u=r(a[l],a[l+1]);if(t){const d=Array.isArray(t)?t[l]||Ln:t;u=jo(d,u)}n.push(u)}return n}function lC(a,t,{clamp:e=!0,ease:n,mixer:r}={}){const o=a.length;if(ep(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const l=a[0]===a[1];a[0]>a[o-1]&&(a=[...a].reverse(),t=[...t].reverse());const u=oC(t,n,r),d=u.length,f=p=>{if(l&&p<a[0])return t[0];let g=0;if(d>1)for(;g<a.length-2&&!(p<a[g+1]);g++);const v=To(a[g],a[g+1],p);return u[g](v)};return e?p=>f(Ei(a[0],a[o-1],p)):f}function cC(a,t){const e=a[a.length-1];for(let n=1;n<=t;n++){const r=To(0,t,n);a.push(ne(e,1,r))}}function uC(a){const t=[0];return cC(t,a.length-1),t}function hC(a,t){return a.map(e=>e*t)}function dC(a,t){return a.map(()=>t||BA).splice(0,a.length-1)}function yo({duration:a=300,keyframes:t,times:e,ease:n="easeInOut"}){const r=E_(n)?n.map(ov):ov(n),o={done:!1,value:t[0]},l=hC(e&&e.length===t.length?e:uC(t),a),u=lC(l,t,{ease:Array.isArray(r)?r:dC(t,r)});return{calculatedDuration:a,next:d=>(o.value=u(d),o.done=d>=a,o)}}const fC=a=>a!==null;function dp(a,{repeat:t,repeatType:e="loop"},n,r=1){const o=a.filter(fC),u=r<0||t&&e!=="loop"&&t%2===1?0:o.length-1;return!u||n===void 0?o[u]:n}const pC={decay:pf,inertia:pf,tween:yo,keyframes:yo,spring:zc};function KA(a){typeof a.type=="string"&&(a.type=pC[a.type])}class fp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const mC=a=>a/100;class pp extends fp{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==sn.now()&&this.tick(sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;KA(t);const{type:e=yo,repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=t;let{keyframes:u}=t;const d=e||yo;d!==yo&&typeof u[0]!="number"&&(this.mixKeyframes=jo(mC,XA(u[0],u[1])),u=[0,100]);const f=d({...t,keyframes:u});o==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=hp(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:r,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:p,repeat:g,repeatType:v,repeatDelay:b,type:S,onUpdate:A,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const E=this.currentTime-f*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?E<0:E>r;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let C=this.currentTime,D=n;if(g){const I=Math.min(this.currentTime,r)/u;let q=Math.floor(I),K=I%1;!K&&I>=1&&(K=1),K===1&&q--,q=Math.min(q,g+1),!!(q%2)&&(v==="reverse"?(K=1-K,b&&(K-=b/u)):v==="mirror"&&(D=l)),C=Ei(0,1,K)*u}const R=T?{done:!1,value:p[0]}:D.next(C);o&&(R.value=o(R.value));let{done:N}=R;!T&&d!==null&&(N=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return B&&S!==pf&&(R.value=dp(p,this.options,x,this.speed)),A&&A(R.value),B&&this.finish(),R}then(t,e){return this.finished.then(t,e)}get duration(){return Jn(this.calculatedDuration)}get time(){return Jn(this.currentTime)}set time(t){t=Zn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(sn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Jn(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Z_,startTime:e}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function gC(a){for(let t=1;t<a.length;t++)a[t]??(a[t]=a[t-1])}const Ls=a=>a*180/Math.PI,mf=a=>{const t=Ls(Math.atan2(a[1],a[0]));return gf(t)},yC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:a=>(Math.abs(a[0])+Math.abs(a[3]))/2,rotate:mf,rotateZ:mf,skewX:a=>Ls(Math.atan(a[1])),skewY:a=>Ls(Math.atan(a[2])),skew:a=>(Math.abs(a[1])+Math.abs(a[2]))/2},gf=a=>(a=a%360,a<0&&(a+=360),a),fv=mf,pv=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]),mv=a=>Math.sqrt(a[4]*a[4]+a[5]*a[5]),vC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:pv,scaleY:mv,scale:a=>(pv(a)+mv(a))/2,rotateX:a=>gf(Ls(Math.atan2(a[6],a[5]))),rotateY:a=>gf(Ls(Math.atan2(-a[2],a[0]))),rotateZ:fv,rotate:fv,skewX:a=>Ls(Math.atan(a[4])),skewY:a=>Ls(Math.atan(a[1])),skew:a=>(Math.abs(a[1])+Math.abs(a[4]))/2};function yf(a){return a.includes("scale")?1:0}function vf(a,t){if(!a||a==="none")return yf(t);const e=a.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(e)n=vC,r=e;else{const u=a.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=yC,r=u}if(!r)return yf(t);const o=n[t],l=r[1].split(",").map(AC);return typeof o=="function"?o(l):l[o]}const bC=(a,t)=>{const{transform:e="none"}=getComputedStyle(a);return vf(e,t)};function AC(a){return parseFloat(a.trim())}const nr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ir=new Set(nr),gv=a=>a===er||a===yt,SC=new Set(["x","y","z"]),wC=nr.filter(a=>!SC.has(a));function EC(a){const t=[];return wC.forEach(e=>{const n=a.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Bs={width:({x:a},{paddingLeft:t="0",paddingRight:e="0"})=>a.max-a.min-parseFloat(t)-parseFloat(e),height:({y:a},{paddingTop:t="0",paddingBottom:e="0"})=>a.max-a.min-parseFloat(t)-parseFloat(e),top:(a,{top:t})=>parseFloat(t),left:(a,{left:t})=>parseFloat(t),bottom:({y:a},{top:t})=>parseFloat(t)+(a.max-a.min),right:({x:a},{left:t})=>parseFloat(t)+(a.max-a.min),x:(a,{transform:t})=>vf(t,"x"),y:(a,{transform:t})=>vf(t,"y")};Bs.translateX=Bs.x;Bs.translateY=Bs.y;const Fs=new Set;let bf=!1,Af=!1,Sf=!1;function WA(){if(Af){const a=Array.from(Fs).filter(n=>n.needsMeasurement),t=new Set(a.map(n=>n.element)),e=new Map;t.forEach(n=>{const r=EC(n);r.length&&(e.set(n,r),n.render())}),a.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const r=e.get(n);r&&r.forEach(([o,l])=>{n.getValue(o)?.set(l)})}),a.forEach(n=>n.measureEndState()),a.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Af=!1,bf=!1,Fs.forEach(a=>a.complete(Sf)),Fs.clear()}function QA(){Fs.forEach(a=>{a.readKeyframes(),a.needsMeasurement&&(Af=!0)})}function xC(){Sf=!0,QA(),WA(),Sf=!1}class mp{constructor(t,e,n,r,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Fs.add(this),bf||(bf=!0,Qt.read(QA),Qt.resolveKeyframes(WA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;if(t[0]===null){const o=r?.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&e){const u=n.readValue(e,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),r&&o===void 0&&r.set(t[0])}gC(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Fs.delete(this)}cancel(){this.state==="scheduled"&&(Fs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const TC=a=>a.startsWith("--");function _C(a,t,e){TC(t)?a.style.setProperty(t,e):a.style[t]=e}const CC=np(()=>window.ScrollTimeline!==void 0),RC={};function MC(a,t){const e=np(a);return()=>RC[t]??e()}const ZA=MC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ho=([a,t,e,n])=>`cubic-bezier(${a}, ${t}, ${e}, ${n})`,yv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ho([0,.65,.55,1]),circOut:ho([.55,0,1,.45]),backIn:ho([.31,.01,.66,-.59]),backOut:ho([.33,1.53,.69,.99])};function JA(a,t){if(a)return typeof a=="function"?ZA()?YA(a,t):"ease-out":FA(a)?ho(a):Array.isArray(a)?a.map(e=>JA(e,t)||yv.easeOut):yv[a]}function DC(a,t,e,{delay:n=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const p={[t]:e};d&&(p.offset=d);const g=JA(u,r);Array.isArray(g)&&(p.easing=g);const v={delay:n,duration:r,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),a.animate(p,v)}function tS(a){return typeof a=="function"&&"applyToOptions"in a}function LC({type:a,...t}){return tS(a)&&ZA()?a.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class PC extends fp{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:r,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=t;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=t,ep(typeof t.type!="string");const f=LC(t);this.animation=DC(e,n,r,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=dp(r,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):_C(e,n,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Jn(Number(t))}get time(){return Jn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Zn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&CC()?(this.animation.timeline=t,Ln):e(this)}}const eS={anticipate:OA,backInOut:PA,circInOut:kA};function OC(a){return a in eS}function NC(a){typeof a.ease=="string"&&OC(a.ease)&&(a.ease=eS[a.ease])}const vv=10;class kC extends PC{constructor(t){NC(t),KA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:r,element:o,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new pp({...l,autoplay:!1}),d=Zn(this.finishedTime??this.time);e.setWithVelocity(u.sample(d-vv).value,u.sample(d).value,vv),u.stop()}}const bv=(a,t)=>t==="zIndex"?!1:!!(typeof a=="number"||Array.isArray(a)||typeof a=="string"&&(es.test(a)||a==="0")&&!a.startsWith("url("));function BC(a){const t=a[0];if(a.length===1)return!0;for(let e=0;e<a.length;e++)if(a[e]!==t)return!0}function FC(a,t,e,n){const r=a[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const o=a[a.length-1],l=bv(r,t),u=bv(o,t);return!l||!u?!1:BC(a)||(e==="spring"||tS(e))&&n}function wf(a){a.duration=0,a.type}const IC=new Set(["opacity","clipPath","filter","transform"]),UC=np(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function jC(a){const{motionValue:t,name:e,repeatDelay:n,repeatType:r,damping:o,type:l}=a;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return UC()&&e&&IC.has(e)&&(e!=="transform"||!f)&&!d&&!n&&r!=="mirror"&&o!==0&&l!=="inertia"}const VC=40;class zC extends fp{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:p,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=sn.now();const v={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:p,...g},b=p?.KeyframeResolver||mp;this.keyframeResolver=new b(u,(S,A,x)=>this.onKeyframesResolved(S,A,v,!x),d,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,r){this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:p}=n;this.resolvedAt=sn.now(),FC(t,o,l,u)||((xi.instantAnimations||!d)&&p?.(dp(t,n,e)),t[0]=t[t.length-1],wf(n),n.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>VC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},b=!f&&jC(v)?new kC({...v,element:v.motionValue.owner.current}):new pp(v);b.finished.then(()=>this.notifyFinished()).catch(Ln),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),xC()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const HC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function GC(a){const t=HC.exec(a);if(!t)return[,];const[,e,n,r]=t;return[`--${e??n}`,r]}function nS(a,t,e=1){const[n,r]=GC(a);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const l=o.trim();return xA(l)?parseFloat(l):l}return op(r)?nS(r,t,e+1):r}function gp(a,t){return a?.[t]??a?.default??a}const iS=new Set(["width","height","top","left","right","bottom",...nr]),qC={test:a=>a==="auto",parse:a=>a},sS=a=>t=>t.test(a),aS=[er,yt,ti,Qi,B_,k_,qC],Av=a=>aS.find(sS(a));function XC(a){return typeof a=="number"?a===0:a!==null?a==="none"||a==="0"||_A(a):!0}const YC=new Set(["brightness","contrast","saturate","opacity"]);function $C(a){const[t,e]=a.slice(0,-1).split("(");if(t==="drop-shadow")return a;const[n]=e.match(lp)||[];if(!n)return a;const r=e.replace(n,"");let o=YC.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+r+")"}const KC=/\b([a-z-]*)\(.*?\)/gu,Ef={...es,getAnimatableNone:a=>{const t=a.match(KC);return t?t.map($C).join(" "):a}},Sv={...er,transform:Math.round},WC={rotate:Qi,rotateX:Qi,rotateY:Qi,rotateZ:Qi,scale:yc,scaleX:yc,scaleY:yc,scaleZ:yc,skew:Qi,skewX:Qi,skewY:Qi,distance:yt,translateX:yt,translateY:yt,translateZ:yt,x:yt,y:yt,z:yt,perspective:yt,transformPerspective:yt,opacity:_o,originX:lv,originY:lv,originZ:yt},yp={borderWidth:yt,borderTopWidth:yt,borderRightWidth:yt,borderBottomWidth:yt,borderLeftWidth:yt,borderRadius:yt,radius:yt,borderTopLeftRadius:yt,borderTopRightRadius:yt,borderBottomRightRadius:yt,borderBottomLeftRadius:yt,width:yt,maxWidth:yt,height:yt,maxHeight:yt,top:yt,right:yt,bottom:yt,left:yt,padding:yt,paddingTop:yt,paddingRight:yt,paddingBottom:yt,paddingLeft:yt,margin:yt,marginTop:yt,marginRight:yt,marginBottom:yt,marginLeft:yt,backgroundPositionX:yt,backgroundPositionY:yt,...WC,zIndex:Sv,fillOpacity:_o,strokeOpacity:_o,numOctaves:Sv},QC={...yp,color:Ae,backgroundColor:Ae,outlineColor:Ae,fill:Ae,stroke:Ae,borderColor:Ae,borderTopColor:Ae,borderRightColor:Ae,borderBottomColor:Ae,borderLeftColor:Ae,filter:Ef,WebkitFilter:Ef},rS=a=>QC[a];function oS(a,t){let e=rS(a);return e!==Ef&&(e=es),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const ZC=new Set(["auto","none","0"]);function JC(a,t,e){let n=0,r;for(;n<a.length&&!r;){const o=a[n];typeof o=="string"&&!ZC.has(o)&&Co(o).values.length&&(r=a[n]),n++}if(r&&e)for(const o of t)a[o]=oS(e,r)}class t2 extends mp{constructor(t,e,n,r,o){super(t,e,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),op(f))){const p=nS(f,e.current);p!==void 0&&(t[d]=p),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!iS.has(n)||t.length!==2)return;const[r,o]=t,l=Av(r),u=Av(o);if(l!==u)if(gv(l)&&gv(u))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else Bs[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let r=0;r<t.length;r++)(t[r]===null||XC(t[r]))&&n.push(r);n.length&&JC(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bs[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(n,r).jump(r,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const o=n.length-1,l=n[o];n[o]=Bs[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{t.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function e2(a,t,e){if(a instanceof EventTarget)return[a];if(typeof a=="string"){let n=document;const r=e?.[a]??n.querySelectorAll(a);return r?Array.from(r):[]}return Array.from(a)}const lS=(a,t)=>t&&typeof a=="number"?t.transform(a):a;function n2(a){return TA(a)&&"offsetHeight"in a}const wv=30,i2=a=>!isNaN(parseFloat(a));class s2{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const r=sn.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=sn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=i2(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ip);const n=this.events[t].add(e);return t==="change"?()=>{n(),Qt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>wv)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,wv);return CA(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $a(a,t){return new s2(a,t)}const{schedule:vp}=IA(queueMicrotask,!1),kn={x:!1,y:!1};function cS(){return kn.x||kn.y}function a2(a){return a==="x"||a==="y"?kn[a]?null:(kn[a]=!0,()=>{kn[a]=!1}):kn.x||kn.y?null:(kn.x=kn.y=!0,()=>{kn.x=kn.y=!1})}function uS(a,t){const e=e2(a),n=new AbortController,r={passive:!0,...t,signal:n.signal};return[e,r,()=>n.abort()]}function Ev(a){return!(a.pointerType==="touch"||cS())}function r2(a,t,e={}){const[n,r,o]=uS(a,e),l=u=>{if(!Ev(u))return;const{target:d}=u,f=t(d,u);if(typeof f!="function"||!d)return;const p=g=>{Ev(g)&&(f(g),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,r)};return n.forEach(u=>{u.addEventListener("pointerenter",l,r)}),o}const hS=(a,t)=>t?a===t?!0:hS(a,t.parentElement):!1,bp=a=>a.pointerType==="mouse"?typeof a.button!="number"||a.button<=0:a.isPrimary!==!1,o2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function l2(a){return o2.has(a.tagName)||a.tabIndex!==-1}const Pc=new WeakSet;function xv(a){return t=>{t.key==="Enter"&&a(t)}}function jd(a,t){a.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const c2=(a,t)=>{const e=a.currentTarget;if(!e)return;const n=xv(()=>{if(Pc.has(e))return;jd(e,"down");const r=xv(()=>{jd(e,"up")}),o=()=>jd(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function Tv(a){return bp(a)&&!cS()}function u2(a,t,e={}){const[n,r,o]=uS(a,e),l=u=>{const d=u.currentTarget;if(!Tv(u))return;Pc.add(d);const f=t(d,u),p=(b,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),Pc.has(d)&&Pc.delete(d),Tv(b)&&typeof f=="function"&&f(b,{success:S})},g=b=>{p(b,d===window||d===document||e.useGlobalTarget||hS(d,b.target))},v=b=>{p(b,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",v,r)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,r),n2(u)&&(u.addEventListener("focus",f=>c2(f,r)),!l2(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function dS(a){return TA(a)&&"ownerSVGElement"in a}function h2(a){return dS(a)&&a.tagName==="svg"}const ze=a=>!!(a&&a.getVelocity),d2=[...aS,Ae,es],f2=a=>d2.find(sS(a)),fS=P.createContext({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"});function p2(a=!0){const t=P.useContext(Zf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,o=P.useId();P.useEffect(()=>{if(a)return r(o)},[a]);const l=P.useCallback(()=>a&&n&&n(o),[o,n,a]);return!e&&n?[!1,l]:[!0]}const pS=P.createContext({strict:!1}),_v={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ka={};for(const a in _v)Ka[a]={isEnabled:t=>_v[a].some(e=>!!t[e])};function m2(a){for(const t in a)Ka[t]={...Ka[t],...a[t]}}const g2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hc(a){return a.startsWith("while")||a.startsWith("drag")&&a!=="draggable"||a.startsWith("layout")||a.startsWith("onTap")||a.startsWith("onPan")||a.startsWith("onLayout")||g2.has(a)}let mS=a=>!Hc(a);function y2(a){typeof a=="function"&&(mS=t=>t.startsWith("on")?!Hc(t):a(t))}try{y2(require("@emotion/is-prop-valid").default)}catch{}function v2(a,t,e){const n={};for(const r in a)r==="values"&&typeof a.values=="object"||(mS(r)||e===!0&&Hc(r)||!t&&!Hc(r)||a.draggable&&r.startsWith("onDrag"))&&(n[r]=a[r]);return n}const Zc=P.createContext({});function Jc(a){return a!==null&&typeof a=="object"&&typeof a.start=="function"}function Ro(a){return typeof a=="string"||Array.isArray(a)}const Ap=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sp=["initial",...Ap];function tu(a){return Jc(a.animate)||Sp.some(t=>Ro(a[t]))}function gS(a){return!!(tu(a)||a.variants)}function b2(a,t){if(tu(a)){const{initial:e,animate:n}=a;return{initial:e===!1||Ro(e)?e:void 0,animate:Ro(n)?n:void 0}}return a.inherit!==!1?t:{}}function A2(a){const{initial:t,animate:e}=b2(a,P.useContext(Zc));return P.useMemo(()=>({initial:t,animate:e}),[Cv(t),Cv(e)])}function Cv(a){return Array.isArray(a)?a.join(" "):a}const Mo={};function S2(a){for(const t in a)Mo[t]=a[t],rp(t)&&(Mo[t].isCSSVariable=!0)}function yS(a,{layout:t,layoutId:e}){return ir.has(a)||a.startsWith("origin")||(t||e!==void 0)&&(!!Mo[a]||a==="opacity")}const w2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},E2=nr.length;function x2(a,t,e){let n="",r=!0;for(let o=0;o<E2;o++){const l=nr[o],u=a[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||e){const f=lS(u,yp[l]);if(!d){r=!1;const p=w2[l]||l;n+=`${p}(${f}) `}e&&(t[l]=f)}}return n=n.trim(),e?n=e(t,r?"":n):r&&(n="none"),n}function wp(a,t,e){const{style:n,vars:r,transformOrigin:o}=a;let l=!1,u=!1;for(const d in t){const f=t[d];if(ir.has(d)){l=!0;continue}else if(rp(d)){r[d]=f;continue}else{const p=lS(f,yp[d]);d.startsWith("origin")?(u=!0,o[d]=p):n[d]=p}}if(t.transform||(l||e?n.transform=x2(t,a.transform,e):n.transform&&(n.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;n.transformOrigin=`${d} ${f} ${p}`}}const Ep=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vS(a,t,e){for(const n in t)!ze(t[n])&&!yS(n,e)&&(a[n]=t[n])}function T2({transformTemplate:a},t){return P.useMemo(()=>{const e=Ep();return wp(e,t,a),Object.assign({},e.vars,e.style)},[t])}function _2(a,t){const e=a.style||{},n={};return vS(n,e,a),Object.assign(n,T2(a,t)),n}function C2(a,t){const e={},n=_2(a,t);return a.drag&&a.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=a.drag===!0?"none":`pan-${a.drag==="x"?"y":"x"}`),a.tabIndex===void 0&&(a.onTap||a.onTapStart||a.whileTap)&&(e.tabIndex=0),e.style=n,e}const R2={offset:"stroke-dashoffset",array:"stroke-dasharray"},M2={offset:"strokeDashoffset",array:"strokeDasharray"};function D2(a,t,e=1,n=0,r=!0){a.pathLength=1;const o=r?R2:M2;a[o.offset]=yt.transform(-n);const l=yt.transform(t),u=yt.transform(e);a[o.array]=`${l} ${u}`}function bS(a,{attrX:t,attrY:e,attrScale:n,pathLength:r,pathSpacing:o=1,pathOffset:l=0,...u},d,f,p){if(wp(a,u,f),d){a.style.viewBox&&(a.attrs.viewBox=a.style.viewBox);return}a.attrs=a.style,a.style={};const{attrs:g,style:v}=a;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete g.transformBox),t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),n!==void 0&&(g.scale=n),r!==void 0&&D2(g,r,o,l,!1)}const AS=()=>({...Ep(),attrs:{}}),SS=a=>typeof a=="string"&&a.toLowerCase()==="svg";function L2(a,t,e,n){const r=P.useMemo(()=>{const o=AS();return bS(o,t,SS(n),a.transformTemplate,a.style),{...o.attrs,style:{...o.style}}},[t]);if(a.style){const o={};vS(o,a.style,a),r.style={...o,...r.style}}return r}const P2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xp(a){return typeof a!="string"||a.includes("-")?!1:!!(P2.indexOf(a)>-1||/[A-Z]/u.test(a))}function O2(a,t,e,{latestValues:n},r,o=!1){const u=(xp(a)?L2:C2)(t,n,r,a),d=v2(t,typeof a=="string",o),f=a!==P.Fragment?{...d,...u,ref:e}:{},{children:p}=t,g=P.useMemo(()=>ze(p)?p.get():p,[p]);return P.createElement(a,{...f,children:g})}function Rv(a){const t=[{},{}];return a?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Tp(a,t,e,n){if(typeof t=="function"){const[r,o]=Rv(n);t=t(e!==void 0?e:a.custom,r,o)}if(typeof t=="string"&&(t=a.variants&&a.variants[t]),typeof t=="function"){const[r,o]=Rv(n);t=t(e!==void 0?e:a.custom,r,o)}return t}function Oc(a){return ze(a)?a.get():a}function N2({scrapeMotionValuesFromProps:a,createRenderState:t},e,n,r){return{latestValues:k2(e,n,r,a),renderState:t()}}function k2(a,t,e,n){const r={},o=n(a,{});for(const v in o)r[v]=Oc(o[v]);let{initial:l,animate:u}=a;const d=tu(a),f=gS(a);t&&f&&!d&&a.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const g=p?u:l;if(g&&typeof g!="boolean"&&!Jc(g)){const v=Array.isArray(g)?g:[g];for(let b=0;b<v.length;b++){const S=Tp(a,v[b]);if(S){const{transitionEnd:A,transition:x,...E}=S;for(const T in E){let C=E[T];if(Array.isArray(C)){const D=p?C.length-1:0;C=C[D]}C!==null&&(r[T]=C)}for(const T in A)r[T]=A[T]}}}return r}const wS=a=>(t,e)=>{const n=P.useContext(Zc),r=P.useContext(Zf),o=()=>N2(a,t,n,r);return e?o():m_(o)};function _p(a,t,e){const{style:n}=a,r={};for(const o in n)(ze(n[o])||t.style&&ze(t.style[o])||yS(o,a)||e?.getValue(o)?.liveStyle!==void 0)&&(r[o]=n[o]);return r}const B2=wS({scrapeMotionValuesFromProps:_p,createRenderState:Ep});function ES(a,t,e){const n=_p(a,t,e);for(const r in a)if(ze(a[r])||ze(t[r])){const o=nr.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=a[r]}return n}const F2=wS({scrapeMotionValuesFromProps:ES,createRenderState:AS}),I2=Symbol.for("motionComponentSymbol");function ka(a){return a&&typeof a=="object"&&Object.prototype.hasOwnProperty.call(a,"current")}function U2(a,t,e){return P.useCallback(n=>{n&&a.onMount&&a.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):ka(e)&&(e.current=n))},[t])}const Cp=a=>a.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),j2="framerAppearId",xS="data-"+Cp(j2),TS=P.createContext({});function V2(a,t,e,n,r){const{visualElement:o}=P.useContext(Zc),l=P.useContext(pS),u=P.useContext(Zf),d=P.useContext(fS).reducedMotion,f=P.useRef(null);n=n||l.renderer,!f.current&&n&&(f.current=n(a,{visualState:t,parent:o,props:e,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,g=P.useContext(TS);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&z2(f.current,e,r,g);const v=P.useRef(!1);P.useInsertionEffect(()=>{p&&v.current&&p.update(e,u)});const b=e[xS],S=P.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return g_(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),S.current&&p.animationState&&p.animationState.animateChanges())}),P.useEffect(()=>{p&&(!S.current&&p.animationState&&p.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),S.current=!1),p.enteringChildren=void 0)}),p}function z2(a,t,e,n){const{layoutId:r,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=t;a.projection=new e(a.latestValues,t["data-framer-portal-id"]?void 0:_S(a.parent)),a.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||u&&ka(u),visualElement:a,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:d,layoutRoot:f})}function _S(a){if(a)return a.options.allowProjection!==!1?a.projection:_S(a.parent)}function Vd(a,{forwardMotionProps:t=!1}={},e,n){e&&m2(e);const r=xp(a)?F2:B2;function o(u,d){let f;const p={...P.useContext(fS),...u,layoutId:H2(u)},{isStatic:g}=p,v=A2(u),b=r(u,g);if(!g&&Qf){G2();const S=q2(p);f=S.MeasureLayout,v.visualElement=V2(a,b,p,n,S.ProjectionNode)}return j.jsxs(Zc.Provider,{value:v,children:[f&&v.visualElement?j.jsx(f,{visualElement:v.visualElement,...p}):null,O2(a,u,U2(b,v.visualElement,d),b,g,t)]})}o.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const l=P.forwardRef(o);return l[I2]=a,l}function H2({layoutId:a}){const t=P.useContext(EA).id;return t&&a!==void 0?t+"-"+a:a}function G2(a,t){P.useContext(pS).strict}function q2(a){const{drag:t,layout:e}=Ka;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(a)||e?.isEnabled(a)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function X2(a,t){if(typeof Proxy>"u")return Vd;const e=new Map,n=(o,l)=>Vd(o,l,a,t),r=(o,l)=>n(o,l);return new Proxy(r,{get:(o,l)=>l==="create"?n:(e.has(l)||e.set(l,Vd(l,void 0,a,t)),e.get(l))})}function CS({top:a,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:a,max:n}}}function Y2({x:a,y:t}){return{top:t.min,right:a.max,bottom:t.max,left:a.min}}function $2(a,t){if(!t)return a;const e=t({x:a.left,y:a.top}),n=t({x:a.right,y:a.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function zd(a){return a===void 0||a===1}function xf({scale:a,scaleX:t,scaleY:e}){return!zd(a)||!zd(t)||!zd(e)}function Rs(a){return xf(a)||RS(a)||a.z||a.rotate||a.rotateX||a.rotateY||a.skewX||a.skewY}function RS(a){return Mv(a.x)||Mv(a.y)}function Mv(a){return a&&a!=="0%"}function Gc(a,t,e){const n=a-e,r=t*n;return e+r}function Dv(a,t,e,n,r){return r!==void 0&&(a=Gc(a,r,n)),Gc(a,e,n)+t}function Tf(a,t=0,e=1,n,r){a.min=Dv(a.min,t,e,n,r),a.max=Dv(a.max,t,e,n,r)}function MS(a,{x:t,y:e}){Tf(a.x,t.translate,t.scale,t.originPoint),Tf(a.y,e.translate,e.scale,e.originPoint)}const Lv=.999999999999,Pv=1.0000000000001;function K2(a,t,e,n=!1){const r=e.length;if(!r)return;t.x=t.y=1;let o,l;for(let u=0;u<r;u++){o=e[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Fa(a,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,MS(a,l)),n&&Rs(o.latestValues)&&Fa(a,o.latestValues))}t.x<Pv&&t.x>Lv&&(t.x=1),t.y<Pv&&t.y>Lv&&(t.y=1)}function Ba(a,t){a.min=a.min+t,a.max=a.max+t}function Ov(a,t,e,n,r=.5){const o=ne(a.min,a.max,r);Tf(a,t,e,o,n)}function Fa(a,t){Ov(a.x,t.x,t.scaleX,t.scale,t.originX),Ov(a.y,t.y,t.scaleY,t.scale,t.originY)}function DS(a,t){return CS($2(a.getBoundingClientRect(),t))}function W2(a,t,e){const n=DS(a,e),{scroll:r}=t;return r&&(Ba(n.x,r.offset.x),Ba(n.y,r.offset.y)),n}const Nv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ia=()=>({x:Nv(),y:Nv()}),kv=()=>({min:0,max:0}),me=()=>({x:kv(),y:kv()}),_f={current:null},LS={current:!1};function Q2(){if(LS.current=!0,!!Qf)if(window.matchMedia){const a=window.matchMedia("(prefers-reduced-motion)"),t=()=>_f.current=a.matches;a.addEventListener("change",t),t()}else _f.current=!1}const Z2=new WeakMap;function J2(a,t,e){for(const n in t){const r=t[n],o=e[n];if(ze(r))a.addValue(n,r);else if(ze(o))a.addValue(n,$a(r,{owner:a}));else if(o!==r)if(a.hasValue(n)){const l=a.getValue(n);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=a.getStaticValue(n);a.addValue(n,$a(l!==void 0?l:r,{owner:a}))}}for(const n in e)t[n]===void 0&&a.removeValue(n);return t}const Bv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tR{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=sn.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Qt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=tu(e),this.isVariantNode=gS(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const v in g){const b=g[v];d[v]!==void 0&&ze(b)&&b.set(d[v])}}mount(t){this.current=t,Z2.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),LS.current||Q2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_f.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ts(this.notifyUpdate),ts(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ir.has(t);n&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Qt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ka){const e=Ka[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):me()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<Bv.length;n++){const r=Bv[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=t[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=J2(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=$a(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(xA(n)||_A(n))?n=parseFloat(n):!f2(n)&&es.test(e)&&(n=oS(t,e)),this.setBaseTarget(t,ze(n)?n.get():n)),ze(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const o=Tp(this.props,e,this.presenceContext?.custom);o&&(n=o[t])}if(e&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!ze(r)?r:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new ip),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){vp.render(this.render)}}class PS extends tR{constructor(){super(...arguments),this.KeyframeResolver=t2}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ze(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function OS(a,{style:t,vars:e},n,r){const o=a.style;let l;for(l in t)o[l]=t[l];r?.applyProjectionStyles(o,n);for(l in e)o.setProperty(l,e[l])}function eR(a){return window.getComputedStyle(a)}class nR extends PS{constructor(){super(...arguments),this.type="html",this.renderInstance=OS}readValueFromInstance(t,e){if(ir.has(e))return this.projection?.isProjecting?yf(e):bC(t,e);{const n=eR(t),r=(rp(e)?n.getPropertyValue(e):n[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return DS(t,e)}build(t,e,n){wp(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return _p(t,e,n)}}const NS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iR(a,t,e,n){OS(a,t,void 0,n);for(const r in t.attrs)a.setAttribute(NS.has(r)?r:Cp(r),t.attrs[r])}class sR extends PS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=me}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ir.has(e)){const n=rS(e);return n&&n.default||0}return e=NS.has(e)?e:Cp(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return ES(t,e,n)}build(t,e,n){bS(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,r){iR(t,e,n,r)}mount(t){this.isSVGTag=SS(t.tagName),super.mount(t)}}const aR=(a,t)=>xp(a)?new sR(t):new nR(t,{allowProjection:a!==P.Fragment});function Va(a,t,e){const n=a.getProps();return Tp(n,t,e!==void 0?e:n.custom,a)}const Cf=a=>Array.isArray(a);function rR(a,t,e){a.hasValue(t)?a.getValue(t).set(e):a.addValue(t,$a(e))}function oR(a){return Cf(a)?a[a.length-1]||0:a}function lR(a,t){const e=Va(a,t);let{transitionEnd:n={},transition:r={},...o}=e||{};o={...o,...n};for(const l in o){const u=oR(o[l]);rR(a,l,u)}}function cR(a){return!!(ze(a)&&a.add)}function Rf(a,t){const e=a.getValue("willChange");if(cR(e))return e.add(t);if(!e&&xi.WillChange){const n=new xi.WillChange("auto");a.addValue("willChange",n),n.add(t)}}function kS(a){return a.props[xS]}const uR=a=>a!==null;function hR(a,{repeat:t,repeatType:e="loop"},n){const r=a.filter(uR),o=t&&e!=="loop"&&t%2===1?0:r.length-1;return r[o]}const dR={type:"spring",stiffness:500,damping:25,restSpeed:10},fR=a=>({type:"spring",stiffness:550,damping:a===0?2*Math.sqrt(550):30,restSpeed:10}),pR={type:"keyframes",duration:.8},mR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gR=(a,{keyframes:t})=>t.length>2?pR:ir.has(a)?a.startsWith("scale")?fR(t[1]):dR:mR;function yR({when:a,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const Rp=(a,t,e,n={},r,o)=>l=>{const u=gp(n,a)||{},d=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-Zn(d);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:v=>{t.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:a,motionValue:t,element:o?void 0:r};yR(u)||Object.assign(p,gR(a,p)),p.duration&&(p.duration=Zn(p.duration)),p.repeatDelay&&(p.repeatDelay=Zn(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(wf(p),p.delay===0&&(g=!0)),(xi.instantAnimations||xi.skipAnimations)&&(g=!0,wf(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,g&&!o&&t.get()!==void 0){const v=hR(p.keyframes,u);if(v!==void 0){Qt.update(()=>{p.onUpdate(v),p.onComplete()});return}}return u.isSync?new pp(p):new zC(p)};function vR({protectedKeys:a,needsAnimating:t},e){const n=a.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function BS(a,t,{delay:e=0,transitionOverride:n,type:r}={}){let{transition:o=a.getDefaultTransition(),transitionEnd:l,...u}=t;n&&(o=n);const d=[],f=r&&a.animationState&&a.animationState.getState()[r];for(const p in u){const g=a.getValue(p,a.latestValues[p]??null),v=u[p];if(v===void 0||f&&vR(f,p))continue;const b={delay:e,...gp(o||{},p)},S=g.get();if(S!==void 0&&!g.isAnimating&&!Array.isArray(v)&&v===S&&!b.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const E=kS(a);if(E){const T=window.MotionHandoffAnimation(E,p,Qt);T!==null&&(b.startTime=T,A=!0)}}Rf(a,p),g.start(Rp(p,g,v,a.shouldReduceMotion&&iS.has(p)?{type:!1}:b,a,A));const x=g.animation;x&&d.push(x)}return l&&Promise.all(d).then(()=>{Qt.update(()=>{l&&lR(a,l)})}),d}function FS(a,t,e,n=0,r=1){const o=Array.from(a).sort((f,p)=>f.sortNodePosition(p)).indexOf(t),l=a.size,u=(l-1)*n;return typeof e=="function"?e(o,l):r===1?o*n:u-o*n}function Mf(a,t,e={}){const n=Va(a,t,e.type==="exit"?a.presenceContext?.custom:void 0);let{transition:r=a.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(r=e.transitionOverride);const o=n?()=>Promise.all(BS(a,n,e)):()=>Promise.resolve(),l=a.variantChildren&&a.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:g}=r;return bR(a,t,d,f,p,g,e)}:()=>Promise.resolve(),{when:u}=r;if(u){const[d,f]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>f())}else return Promise.all([o(),l(e.delay)])}function bR(a,t,e=0,n=0,r=0,o=1,l){const u=[];for(const d of a.variantChildren)d.notify("AnimationStart",t),u.push(Mf(d,t,{...l,delay:e+(typeof n=="function"?0:n)+FS(a.variantChildren,d,n,r,o)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(u)}function AR(a,t,e={}){a.notify("AnimationStart",t);let n;if(Array.isArray(t)){const r=t.map(o=>Mf(a,o,e));n=Promise.all(r)}else if(typeof t=="string")n=Mf(a,t,e);else{const r=typeof t=="function"?Va(a,t,e.custom):t;n=Promise.all(BS(a,r,e))}return n.then(()=>{a.notify("AnimationComplete",t)})}function IS(a,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==a.length)return!1;for(let n=0;n<e;n++)if(t[n]!==a[n])return!1;return!0}const SR=Sp.length;function US(a){if(!a)return;if(!a.isControllingVariants){const e=a.parent?US(a.parent)||{}:{};return a.props.initial!==void 0&&(e.initial=a.props.initial),e}const t={};for(let e=0;e<SR;e++){const n=Sp[e],r=a.props[n];(Ro(r)||r===!1)&&(t[n]=r)}return t}const wR=[...Ap].reverse(),ER=Ap.length;function xR(a){return t=>Promise.all(t.map(({animation:e,options:n})=>AR(a,e,n)))}function TR(a){let t=xR(a),e=Fv(),n=!0;const r=d=>(f,p)=>{const g=Va(a,p,d==="exit"?a.presenceContext?.custom:void 0);if(g){const{transition:v,transitionEnd:b,...S}=g;f={...f,...S,...b}}return f};function o(d){t=d(a)}function l(d){const{props:f}=a,p=US(a.parent)||{},g=[],v=new Set;let b={},S=1/0;for(let x=0;x<ER;x++){const E=wR[x],T=e[E],C=f[E]!==void 0?f[E]:p[E],D=Ro(C),R=E===d?T.isActive:null;R===!1&&(S=x);let N=C===p[E]&&C!==f[E]&&D;if(N&&n&&a.manuallyAnimateOnMount&&(N=!1),T.protectedKeys={...b},!T.isActive&&R===null||!C&&!T.prevProp||Jc(C)||typeof C=="boolean")continue;const B=_R(T.prevProp,C);let I=B||E===d&&T.isActive&&!N&&D||x>S&&D,q=!1;const K=Array.isArray(C)?C:[C];let J=K.reduce(r(E),{});R===!1&&(J={});const{prevResolvedValues:ot={}}=T,dt={...ot,...J},at=z=>{I=!0,v.has(z)&&(q=!0,v.delete(z)),T.needsAnimating[z]=!0;const Q=a.getValue(z);Q&&(Q.liveStyle=!1)};for(const z in dt){const Q=J[z],lt=ot[z];if(b.hasOwnProperty(z))continue;let L=!1;Cf(Q)&&Cf(lt)?L=!IS(Q,lt):L=Q!==lt,L?Q!=null?at(z):v.add(z):Q!==void 0&&v.has(z)?at(z):T.protectedKeys[z]=!0}T.prevProp=C,T.prevResolvedValues=J,T.isActive&&(b={...b,...J}),n&&a.blockInitialAnimation&&(I=!1);const ct=N&&B;I&&(!ct||q)&&g.push(...K.map(z=>{const Q={type:E};if(typeof z=="string"&&n&&!ct&&a.manuallyAnimateOnMount&&a.parent){const{parent:lt}=a,L=Va(lt,z);if(lt.enteringChildren&&L){const{delayChildren:Y}=L.transition||{};Q.delay=FS(lt.enteringChildren,a,Y)}}return{animation:z,options:Q}}))}if(v.size){const x={};if(typeof f.initial!="boolean"){const E=Va(a,Array.isArray(f.initial)?f.initial[0]:f.initial);E&&E.transition&&(x.transition=E.transition)}v.forEach(E=>{const T=a.getBaseTarget(E),C=a.getValue(E);C&&(C.liveStyle=!0),x[E]=T??null}),g.push({animation:x})}let A=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!a.manuallyAnimateOnMount&&(A=!1),n=!1,A?t(g):Promise.resolve()}function u(d,f){if(e[d].isActive===f)return Promise.resolve();a.variantChildren?.forEach(g=>g.animationState?.setActive(d,f)),e[d].isActive=f;const p=l(d);for(const g in e)e[g].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>e,reset:()=>{e=Fv(),n=!0}}}function _R(a,t){return typeof t=="string"?t!==a:Array.isArray(t)?!IS(t,a):!1}function _s(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Fv(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class as{constructor(t){this.isMounted=!1,this.node=t}update(){}}class CR extends as{constructor(t){super(t),t.animationState||(t.animationState=TR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Jc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let RR=0;class MR extends as{constructor(){super(...arguments),this.id=RR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const DR={animation:{Feature:CR},exit:{Feature:MR}};function Do(a,t,e,n={passive:!0}){return a.addEventListener(t,e,n),()=>a.removeEventListener(t,e)}function Ho(a){return{point:{x:a.pageX,y:a.pageY}}}const LR=a=>t=>bp(t)&&a(t,Ho(t));function vo(a,t,e,n){return Do(a,t,LR(e),n)}const jS=1e-4,PR=1-jS,OR=1+jS,VS=.01,NR=0-VS,kR=0+VS;function Xe(a){return a.max-a.min}function BR(a,t,e){return Math.abs(a-t)<=e}function Iv(a,t,e,n=.5){a.origin=n,a.originPoint=ne(t.min,t.max,a.origin),a.scale=Xe(e)/Xe(t),a.translate=ne(e.min,e.max,a.origin)-a.originPoint,(a.scale>=PR&&a.scale<=OR||isNaN(a.scale))&&(a.scale=1),(a.translate>=NR&&a.translate<=kR||isNaN(a.translate))&&(a.translate=0)}function bo(a,t,e,n){Iv(a.x,t.x,e.x,n?n.originX:void 0),Iv(a.y,t.y,e.y,n?n.originY:void 0)}function Uv(a,t,e){a.min=e.min+t.min,a.max=a.min+Xe(t)}function FR(a,t,e){Uv(a.x,t.x,e.x),Uv(a.y,t.y,e.y)}function jv(a,t,e){a.min=t.min-e.min,a.max=a.min+Xe(t)}function Ao(a,t,e){jv(a.x,t.x,e.x),jv(a.y,t.y,e.y)}function Dn(a){return[a("x"),a("y")]}const zS=({current:a})=>a?a.ownerDocument.defaultView:null,Vv=(a,t)=>Math.abs(a-t);function IR(a,t){const e=Vv(a.x,t.x),n=Vv(a.y,t.y);return Math.sqrt(e**2+n**2)}class HS{constructor(t,e,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Gd(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,S=IR(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!S)return;const{point:A}=v,{timestamp:x}=ke;this.history.push({...A,timestamp:x});const{onStart:E,onMove:T}=this.handlers;b||(E&&E(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Hd(b,this.transformPagePoint),Qt.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:S,onSessionEnd:A,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Gd(v.type==="pointercancel"?this.lastMoveEventInfo:Hd(b,this.transformPagePoint),this.history);this.startEvent&&S&&S(v,E),A&&A(v,E)},!bp(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=r||window;const u=Ho(t),d=Hd(u,this.transformPagePoint),{point:f}=d,{timestamp:p}=ke;this.history=[{...f,timestamp:p}];const{onSessionStart:g}=e;g&&g(t,Gd(d,this.history)),this.removeListeners=jo(vo(this.contextWindow,"pointermove",this.handlePointerMove),vo(this.contextWindow,"pointerup",this.handlePointerUp),vo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ts(this.updatePoint)}}function Hd(a,t){return t?{point:t(a.point)}:a}function zv(a,t){return{x:a.x-t.x,y:a.y-t.y}}function Gd({point:a},t){return{point:a,delta:zv(a,GS(t)),offset:zv(a,UR(t)),velocity:jR(t,.1)}}function UR(a){return a[0]}function GS(a){return a[a.length-1]}function jR(a,t){if(a.length<2)return{x:0,y:0};let e=a.length-1,n=null;const r=GS(a);for(;e>=0&&(n=a[e],!(r.timestamp-n.timestamp>Zn(t)));)e--;if(!n)return{x:0,y:0};const o=Jn(r.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-n.x)/o,y:(r.y-n.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function VR(a,{min:t,max:e},n){return t!==void 0&&a<t?a=n?ne(t,a,n.min):Math.max(a,t):e!==void 0&&a>e&&(a=n?ne(e,a,n.max):Math.min(a,e)),a}function Hv(a,t,e){return{min:t!==void 0?a.min+t:void 0,max:e!==void 0?a.max+e-(a.max-a.min):void 0}}function zR(a,{top:t,left:e,bottom:n,right:r}){return{x:Hv(a.x,e,r),y:Hv(a.y,t,n)}}function Gv(a,t){let e=t.min-a.min,n=t.max-a.max;return t.max-t.min<a.max-a.min&&([e,n]=[n,e]),{min:e,max:n}}function HR(a,t){return{x:Gv(a.x,t.x),y:Gv(a.y,t.y)}}function GR(a,t){let e=.5;const n=Xe(a),r=Xe(t);return r>n?e=To(t.min,t.max-n,a.min):n>r&&(e=To(a.min,a.max-r,t.min)),Ei(0,1,e)}function qR(a,t){const e={};return t.min!==void 0&&(e.min=t.min-a.min),t.max!==void 0&&(e.max=t.max-a.min),e}const Df=.35;function XR(a=Df){return a===!1?a=0:a===!0&&(a=Df),{x:qv(a,"left","right"),y:qv(a,"top","bottom")}}function qv(a,t,e){return{min:Xv(a,t),max:Xv(a,e)}}function Xv(a,t){return typeof a=="number"?a:a[t]||0}const YR=new WeakMap;class $R{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=me(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Ho(g).point)},l=(g,v)=>{const{drag:b,dragPropagation:S,onDragStart:A}=this.getProps();if(b&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=a2(b),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dn(E=>{let T=this.getAxisMotionValue(E).get()||0;if(ti.test(T)){const{projection:C}=this.visualElement;if(C&&C.layout){const D=C.layout.layoutBox[E];D&&(T=Xe(D)*(parseFloat(T)/100))}}this.originPoint[E]=T}),A&&Qt.postRender(()=>A(g,v)),Rf(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},u=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:S,onDirectionLock:A,onDrag:x}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:E}=v;if(S&&this.currentDirection===null){this.currentDirection=KR(E),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",v.point,E),this.updateAxis("y",v.point,E),this.visualElement.render(),x&&x(g,v)},d=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v,this.stop(g,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Dn(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new HS(t,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:zS(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent,r=e||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!n)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&Qt.postRender(()=>u(n,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!vc(t,r,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=VR(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;t&&ka(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=zR(n.layoutBox,t):this.constraints=!1,this.elastic=XR(e),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Dn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=qR(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!ka(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=W2(n,r.root,this.visualElement.getTransformPagePoint());let l=HR(r.layout.layoutBox,o);if(e){const u=e(Y2(l));this.hasMutatedConstraints=!!u,u&&(l=CS(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Dn(p=>{if(!vc(p,e,this.currentDirection))return;let g=d&&d[p]||{};l&&(g={min:0,max:0});const v=r?200:1e6,b=r?40:1e7,S={type:"inertia",velocity:n?t[p]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(p,S)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Rf(this.visualElement,t),n.start(Rp(t,n,0,e,this.visualElement,!1))}stopAnimation(){Dn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Dn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Dn(e=>{const{drag:n}=this.getProps();if(!vc(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(e);if(r&&r.layout){const{min:l,max:u}=r.layout.layoutBox[e];o.set(t[e]-ne(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!ka(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Dn(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();r[l]=GR({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Dn(l=>{if(!vc(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(ne(d,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;YR.set(this.visualElement,this);const t=this.visualElement.current,e=vo(t,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();ka(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Qt.read(n);const l=Do(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Dn(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=d[p].translate,g.set(g.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),o(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=Df,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function vc(a,t,e){return(t===!0||t===a)&&(e===null||e===a)}function KR(a,t=10){let e=null;return Math.abs(a.y)>t?e="y":Math.abs(a.x)>t&&(e="x"),e}class WR extends as{constructor(t){super(t),this.removeGroupControls=Ln,this.removeListeners=Ln,this.controls=new $R(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ln}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yv=a=>(t,e)=>{a&&Qt.postRender(()=>a(t,e))};class QR extends as{constructor(){super(...arguments),this.removePointerDownListener=Ln}onPointerDown(t){this.session=new HS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zS(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Yv(t),onStart:Yv(e),onMove:n,onEnd:(o,l)=>{delete this.session,r&&Qt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=vo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $v(a,t){return t.max===t.min?0:a/(t.max-t.min)*100}const ro={correct:(a,t)=>{if(!t.target)return a;if(typeof a=="string")if(yt.test(a))a=parseFloat(a);else return a;const e=$v(a,t.target.x),n=$v(a,t.target.y);return`${e}% ${n}%`}},ZR={correct:(a,{treeScale:t,projectionDelta:e})=>{const n=a,r=es.parse(a);if(r.length>5)return n;const o=es.createTransformer(a),l=typeof r[0]!="number"?1:0,u=e.x.scale*t.x,d=e.y.scale*t.y;r[0+l]/=u,r[1+l]/=d;const f=ne(u,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),o(r)}};let qd=!1;class JR extends P.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=t;S2(tM),o&&(e.group&&e.group.add(o),n&&n.register&&r&&n.register(o),qd&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Nc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:o}=this.props,{projection:l}=n;return l&&(l.isPresent=o,qd=!0,r||t.layoutDependency!==e||e===void 0||t.isPresent!==o?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||Qt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),vp.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;qd=!0,r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function qS(a){const[t,e]=p2(),n=P.useContext(EA);return j.jsx(JR,{...a,layoutGroup:n,switchLayoutGroup:P.useContext(TS),isPresent:t,safeToRemove:e})}const tM={borderRadius:{...ro,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ro,borderTopRightRadius:ro,borderBottomLeftRadius:ro,borderBottomRightRadius:ro,boxShadow:ZR};function eM(a,t,e){const n=ze(a)?a:$a(a);return n.start(Rp("",n,t,e)),n.animation}const nM=(a,t)=>a.depth-t.depth;class iM{constructor(){this.children=[],this.isDirty=!1}add(t){Jf(this.children,t),this.isDirty=!0}remove(t){tp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(nM),this.isDirty=!1,this.children.forEach(t)}}function sM(a,t){const e=sn.now(),n=({timestamp:r})=>{const o=r-e;o>=t&&(ts(n),a(o-t))};return Qt.setup(n,!0),()=>ts(n)}const XS=["TopLeft","TopRight","BottomLeft","BottomRight"],aM=XS.length,Kv=a=>typeof a=="string"?parseFloat(a):a,Wv=a=>typeof a=="number"||yt.test(a);function rM(a,t,e,n,r,o){r?(a.opacity=ne(0,e.opacity??1,oM(n)),a.opacityExit=ne(t.opacity??1,0,lM(n))):o&&(a.opacity=ne(t.opacity??1,e.opacity??1,n));for(let l=0;l<aM;l++){const u=`border${XS[l]}Radius`;let d=Qv(t,u),f=Qv(e,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||Wv(d)===Wv(f)?(a[u]=Math.max(ne(Kv(d),Kv(f),n),0),(ti.test(f)||ti.test(d))&&(a[u]+="%")):a[u]=f}(t.rotate||e.rotate)&&(a.rotate=ne(t.rotate||0,e.rotate||0,n))}function Qv(a,t){return a[t]!==void 0?a[t]:a.borderRadius}const oM=YS(0,.5,NA),lM=YS(.5,.95,Ln);function YS(a,t,e){return n=>n<a?0:n>t?1:e(To(a,t,n))}function Zv(a,t){a.min=t.min,a.max=t.max}function _n(a,t){Zv(a.x,t.x),Zv(a.y,t.y)}function Jv(a,t){a.translate=t.translate,a.scale=t.scale,a.originPoint=t.originPoint,a.origin=t.origin}function tb(a,t,e,n,r){return a-=t,a=Gc(a,1/e,n),r!==void 0&&(a=Gc(a,1/r,n)),a}function cM(a,t=0,e=1,n=.5,r,o=a,l=a){if(ti.test(t)&&(t=parseFloat(t),t=ne(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=ne(o.min,o.max,n);a===o&&(u-=t),a.min=tb(a.min,t,e,u,r),a.max=tb(a.max,t,e,u,r)}function eb(a,t,[e,n,r],o,l){cM(a,t[e],t[n],t[r],t.scale,o,l)}const uM=["x","scaleX","originX"],hM=["y","scaleY","originY"];function nb(a,t,e,n){eb(a.x,t,uM,e?e.x:void 0,n?n.x:void 0),eb(a.y,t,hM,e?e.y:void 0,n?n.y:void 0)}function ib(a){return a.translate===0&&a.scale===1}function $S(a){return ib(a.x)&&ib(a.y)}function sb(a,t){return a.min===t.min&&a.max===t.max}function dM(a,t){return sb(a.x,t.x)&&sb(a.y,t.y)}function ab(a,t){return Math.round(a.min)===Math.round(t.min)&&Math.round(a.max)===Math.round(t.max)}function KS(a,t){return ab(a.x,t.x)&&ab(a.y,t.y)}function rb(a){return Xe(a.x)/Xe(a.y)}function ob(a,t){return a.translate===t.translate&&a.scale===t.scale&&a.originPoint===t.originPoint}class fM{constructor(){this.members=[]}add(t){Jf(this.members,t),t.scheduleRender()}remove(t){if(tp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let n;for(let r=e;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pM(a,t,e){let n="";const r=a.x.translate/t.x,o=a.y.translate/t.y,l=e?.z||0;if((r||o||l)&&(n=`translate3d(${r}px, ${o}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:v,skewX:b,skewY:S}=e;f&&(n=`perspective(${f}px) ${n}`),p&&(n+=`rotate(${p}deg) `),g&&(n+=`rotateX(${g}deg) `),v&&(n+=`rotateY(${v}deg) `),b&&(n+=`skewX(${b}deg) `),S&&(n+=`skewY(${S}deg) `)}const u=a.x.scale*t.x,d=a.y.scale*t.y;return(u!==1||d!==1)&&(n+=`scale(${u}, ${d})`),n||"none"}const Xd=["","X","Y","Z"],mM=1e3;let gM=0;function Yd(a,t,e,n){const{latestValues:r}=t;r[a]&&(e[a]=r[a],t.setStaticValue(a,0),n&&(n[a]=0))}function WS(a){if(a.hasCheckedOptimisedAppear=!0,a.root===a)return;const{visualElement:t}=a.options;if(!t)return;const e=kS(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:o}=a.options;window.MotionCancelOptimisedAnimation(e,"transform",Qt,!(r||o))}const{parent:n}=a;n&&!n.hasCheckedOptimisedAppear&&WS(n)}function QS({attachResizeListener:a,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(l={},u=t?.()){this.id=gM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bM),this.nodes.forEach(EM),this.nodes.forEach(xM),this.nodes.forEach(AM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new iM)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ip),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=dS(l)&&!h2(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),a){let p,g=0;const v=()=>this.root.updateBlockedByResize=!1;Qt.read(()=>{g=window.innerWidth}),a(l,()=>{const b=window.innerWidth;b!==g&&(g=b,this.root.updateBlockedByResize=!0,p&&p(),p=sM(v,250),Nc.hasAnimatedSinceResize&&(Nc.hasAnimatedSinceResize=!1,this.nodes.forEach(ub)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||f.getDefaultTransition()||MM,{onLayoutAnimationStart:A,onLayoutAnimationComplete:x}=f.getProps(),E=!this.targetLayout||!KS(this.targetLayout,b),T=!g&&v;if(this.options.layoutRoot||this.resumeFrom||T||g&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...gp(S,"layout"),onPlay:A,onComplete:x};(f.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(p,T)}else g||ub(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ts(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TM),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&WS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(cb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wM),this.nodes.forEach(yM),this.nodes.forEach(vM)):this.nodes.forEach(cb),this.clearAllSnapshots();const u=sn.now();ke.delta=Ei(0,1e3/60,u-ke.timestamp),ke.timestamp=u,ke.isProcessing=!0,kd.update.process(ke),kd.preRender.process(ke),kd.render.process(ke),ke.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SM),this.sharedNodes.forEach(_M)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xe(this.snapshot.measuredBox.x)&&!Xe(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=me(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!$S(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||Rs(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),DM(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return me();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(LM))){const{scroll:f}=this.root;f&&(Ba(u.x,f.offset.x),Ba(u.y,f.offset.y))}return u}removeElementScroll(l){const u=me();if(_n(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:p,options:g}=f;f!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&_n(u,l),Ba(u.x,p.offset.x),Ba(u.y,p.offset.y))}return u}applyTransform(l,u=!1){const d=me();_n(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Fa(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Rs(p.latestValues)&&Fa(d,p.latestValues)}return Rs(this.latestValues)&&Fa(d,this.latestValues),d}removeTransform(l){const u=me();_n(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Rs(f.latestValues))continue;xf(f.latestValues)&&f.updateSnapshot();const p=me(),g=f.measurePageBox();_n(p,g),nb(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Rs(this.latestValues)&&nb(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ke.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=ke.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=me(),this.relativeTargetOrigin=me(),Ao(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),_n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=me(),this.targetWithTransforms=me()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_n(this.target,this.layout.layoutBox),MS(this.target,this.targetDelta)):_n(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=me(),this.relativeTargetOrigin=me(),Ao(this.relativeTargetOrigin,this.target,v.target),_n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||xf(this.parent.latestValues)||RS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ke.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;_n(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;K2(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=me());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Jv(this.prevProjectionDelta.x,this.projectionDelta.x),Jv(this.prevProjectionDelta.y,this.projectionDelta.y)),bo(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!ob(this.projectionDelta.x,this.prevProjectionDelta.x)||!ob(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ia(),this.projectionDelta=Ia(),this.projectionDeltaWithTransform=Ia()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},g=Ia();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=me(),b=d?d.source:void 0,S=this.layout?this.layout.source:void 0,A=b!==S,x=this.getStack(),E=!x||x.members.length<=1,T=!!(A&&!E&&this.options.crossfade===!0&&!this.path.some(RM));this.animationProgress=0;let C;this.mixTargetDelta=D=>{const R=D/1e3;hb(g.x,l.x,R),hb(g.y,l.y,R),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ao(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CM(this.relativeTarget,this.relativeTargetOrigin,v,R),C&&dM(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=me()),_n(C,this.relativeTarget)),A&&(this.animationValues=p,rM(p,f,this.latestValues,R,T,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ts(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qt.update(()=>{Nc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$a(0)),this.currentAnimation=eM(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:p}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&ZS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||me();const g=Xe(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+g;const v=Xe(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+v}_n(u,d),Fa(u,p),bo(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new fM),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&Yd("z",l,f,this.animationValues);for(let p=0;p<Xd.length;p++)Yd(`rotate${Xd[p]}`,l,f,this.animationValues),Yd(`skew${Xd[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Oc(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Oc(u?.pointerEvents)||""),this.hasProjected&&!Rs(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let g=pM(this.projectionDeltaWithTransform,this.treeScale,p);d&&(g=d(p,g)),l.transform=g;const{x:v,y:b}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Mo){if(p[S]===void 0)continue;const{correct:A,applyTo:x,isCSSVariable:E}=Mo[S],T=g==="none"?p[S]:A(p[S],f);if(x){const C=x.length;for(let D=0;D<C;D++)l[x[D]]=T}else E?this.options.visualElement.renderState.vars[S]=T:l[S]=T}this.options.layoutId&&(l.pointerEvents=f===this?Oc(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(lb),this.root.sharedNodes.clear()}}}function yM(a){a.updateLayout()}function vM(a){const t=a.resumeFrom?.snapshot||a.snapshot;if(a.isLead()&&a.layout&&t&&a.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=a.layout,{animationType:r}=a.options,o=t.source!==a.layout.source;r==="size"?Dn(p=>{const g=o?t.measuredBox[p]:t.layoutBox[p],v=Xe(g);g.min=e[p].min,g.max=g.min+v}):ZS(r,t.layoutBox,e)&&Dn(p=>{const g=o?t.measuredBox[p]:t.layoutBox[p],v=Xe(e[p]);g.max=g.min+v,a.relativeTarget&&!a.currentAnimation&&(a.isProjectionDirty=!0,a.relativeTarget[p].max=a.relativeTarget[p].min+v)});const l=Ia();bo(l,e,t.layoutBox);const u=Ia();o?bo(u,a.applyTransform(n,!0),t.measuredBox):bo(u,e,t.layoutBox);const d=!$S(l);let f=!1;if(!a.resumeFrom){const p=a.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:v}=p;if(g&&v){const b=me();Ao(b,t.layoutBox,g.layoutBox);const S=me();Ao(S,e,v.layoutBox),KS(b,S)||(f=!0),p.options.layoutRoot&&(a.relativeTarget=S,a.relativeTargetOrigin=b,a.relativeParent=p)}}}a.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(a.isLead()){const{onExitComplete:e}=a.options;e&&e()}a.options.transition=void 0}function bM(a){a.parent&&(a.isProjecting()||(a.isProjectionDirty=a.parent.isProjectionDirty),a.isSharedProjectionDirty||(a.isSharedProjectionDirty=!!(a.isProjectionDirty||a.parent.isProjectionDirty||a.parent.isSharedProjectionDirty)),a.isTransformDirty||(a.isTransformDirty=a.parent.isTransformDirty))}function AM(a){a.isProjectionDirty=a.isSharedProjectionDirty=a.isTransformDirty=!1}function SM(a){a.clearSnapshot()}function lb(a){a.clearMeasurements()}function cb(a){a.isLayoutDirty=!1}function wM(a){const{visualElement:t}=a.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),a.resetTransform()}function ub(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0,a.isProjectionDirty=!0}function EM(a){a.resolveTargetDelta()}function xM(a){a.calcProjection()}function TM(a){a.resetSkewAndRotation()}function _M(a){a.removeLeadSnapshot()}function hb(a,t,e){a.translate=ne(t.translate,0,e),a.scale=ne(t.scale,1,e),a.origin=t.origin,a.originPoint=t.originPoint}function db(a,t,e,n){a.min=ne(t.min,e.min,n),a.max=ne(t.max,e.max,n)}function CM(a,t,e,n){db(a.x,t.x,e.x,n),db(a.y,t.y,e.y,n)}function RM(a){return a.animationValues&&a.animationValues.opacityExit!==void 0}const MM={duration:.45,ease:[.4,0,.1,1]},fb=a=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(a),pb=fb("applewebkit/")&&!fb("chrome/")?Math.round:Ln;function mb(a){a.min=pb(a.min),a.max=pb(a.max)}function DM(a){mb(a.x),mb(a.y)}function ZS(a,t,e){return a==="position"||a==="preserve-aspect"&&!BR(rb(t),rb(e),.2)}function LM(a){return a!==a.root&&a.scroll?.wasRoot}const PM=QS({attachResizeListener:(a,t)=>Do(a,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$d={current:void 0},JS=QS({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent:()=>{if(!$d.current){const a=new PM({});a.mount(window),a.setOptions({layoutScroll:!0}),$d.current=a}return $d.current},resetTransform:(a,t)=>{a.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:a=>window.getComputedStyle(a).position==="fixed"}),OM={pan:{Feature:QR},drag:{Feature:WR,ProjectionNode:JS,MeasureLayout:qS}};function gb(a,t,e){const{props:n}=a;a.animationState&&n.whileHover&&a.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,o=n[r];o&&Qt.postRender(()=>o(t,Ho(t)))}class NM extends as{mount(){const{current:t}=this.node;t&&(this.unmount=r2(t,(e,n)=>(gb(this.node,n,"Start"),r=>gb(this.node,r,"End"))))}unmount(){}}class kM extends as{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jo(Do(this.node.current,"focus",()=>this.onFocus()),Do(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yb(a,t,e){const{props:n}=a;if(a.current instanceof HTMLButtonElement&&a.current.disabled)return;a.animationState&&n.whileTap&&a.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),o=n[r];o&&Qt.postRender(()=>o(t,Ho(t)))}class BM extends as{mount(){const{current:t}=this.node;t&&(this.unmount=u2(t,(e,n)=>(yb(this.node,n,"Start"),(r,{success:o})=>yb(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Lf=new WeakMap,Kd=new WeakMap,FM=a=>{const t=Lf.get(a.target);t&&t(a)},IM=a=>{a.forEach(FM)};function UM({root:a,...t}){const e=a||document;Kd.has(e)||Kd.set(e,{});const n=Kd.get(e),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver(IM,{root:a,...t})),n[r]}function jM(a,t,e){const n=UM(t);return Lf.set(a,e),n.observe(a),()=>{Lf.delete(a),n.unobserve(a)}}const VM={some:0,all:1};class zM extends as{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:o}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:VM[r]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=f?p:g;v&&v(d)};return jM(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(HM(t,e))&&this.startObserver()}unmount(){}}function HM({viewport:a={}},{viewport:t={}}={}){return e=>a[e]!==t[e]}const GM={inView:{Feature:zM},tap:{Feature:BM},focus:{Feature:kM},hover:{Feature:NM}},qM={layout:{ProjectionNode:JS,MeasureLayout:qS}},XM={...DR,...GM,...OM,...qM},ee=X2(XM,aR);function Mp({data:a,label:t}){const{modalState:e,toggleModalState:n}=Is(),{themeState:r}=AA();function o(u){n(e),Is.setState({modalData:u})}const l=(u="")=>u.replace(/\b([a-zA-Z]+(?:'s)?)\b/g,d=>{const f=d.toLowerCase();if(f==="npdl"||f==="pdl")return f.toUpperCase();if(["or","in","and","of","to","from"].includes(f))return f;if(f.endsWith("'s")){const p=f.slice(0,-2);return p.charAt(0).toUpperCase()+p.slice(1)+"'s"}return f.charAt(0).toUpperCase()+f.slice(1)});return j.jsx(ee.div,{initial:{scale:0,opacity:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},onClick:()=>o(a),className:`flex items-center justify-center cursor-pointer active:scale-[1.005] w-full h-[7rem] rounded-md dark:text-amber-500 text-white dark:bg-[#2e2929] dark:hover:bg-[#352f2f] bg-[#0037af] hover:bg-[#0640bd] font-semibold p-5 leading-none ${r&&"dark"} transition-colors duration-300`,children:j.jsx("span",{className:"text-[1.2rem] text-center",children:l(t)})})}const YM="/landing-page/assets/1-DP9LTifY.avif",$M="/landing-page/assets/2-BDNuNyJg.avif",KM="/landing-page/assets/3-CvUp26SI.avif",WM="/landing-page/assets/4-CZ_gB13g.avif",QM="/landing-page/assets/1-Ddpm7wM1.avif",ZM="/landing-page/assets/2-DKi6JEYO.avif",JM="/landing-page/assets/3-BsP_lyqM.avif",tD="/landing-page/assets/4-B7_bwJXL.avif",eD="/landing-page/assets/5-BBYlmpzJ.avif",nD="/landing-page/assets/6-B3GsSksS.avif",iD="/landing-page/assets/7-C-cy-NeJ.avif",sD="/landing-page/assets/8-DcsZo-Vi.avif",aD="/landing-page/assets/9-BoNCW3dq.avif",rD="/landing-page/assets/10-CMH-qCX7.avif",oD="/landing-page/assets/1-97URixcw.avif",lD="/landing-page/assets/2-DIE7WpNf.avif",cD="/landing-page/assets/3-B-IIE_5n.avif",uD="/landing-page/assets/4-BSzn6kwK.avif",hD="/landing-page/assets/5-CxLIg-TS.avif",dD="/landing-page/assets/6-0BTw4x01.avif",fD="/landing-page/assets/7-DoBRo0vK.avif",pD="/landing-page/assets/8-BQIWFTmR.avif",mD="/landing-page/assets/9-DI3ZURue.avif",gD="/landing-page/assets/10-C9vkSrQ8.avif",yD="/landing-page/assets/11-CemJhB-3.avif",vD="/landing-page/assets/12-CWwCmzLR.avif",bD="/landing-page/assets/13-B9gPOJSt.avif",AD="/landing-page/assets/14-Bhlpn7Rw.avif",SD="/landing-page/assets/15-BMjqasB8.avif",wD="/landing-page/assets/16-CgE8u6pi.avif",ED="/landing-page/assets/17-GYBMNnta.avif",xD="/landing-page/assets/1-BjcfIEr7.png",TD="/landing-page/assets/2-CbcySHHV.png",_D="/landing-page/assets/3-D4bpO8_D.png",CD="/landing-page/assets/4-Dyog-i5F.png",RD="/landing-page/assets/5-O9nCfq0G.png",MD="/landing-page/assets/6-DLaKlX-u.png",DD="/landing-page/assets/7-BK9_K0Ll.png",LD="/landing-page/assets/8-B3pVK9fD.png",PD="/landing-page/assets/9-GtwrYc-9.png",OD="/landing-page/assets/10-DJlNirax.png",ND="/landing-page/assets/11-ohAS5004.png",kD="/landing-page/assets/12-BfMIDwen.png",BD="/landing-page/assets/1-DT5hlMlq.webp",FD="/landing-page/assets/2-DwQ5KH3G.webp",ID="/landing-page/assets/3-BcilBAWQ.webp",UD="/landing-page/assets/4-3r3D-6Sa.webp",jD="/landing-page/assets/5-DR925-Ou.webp",VD="/landing-page/assets/6-D2Vil_0H.webp",zD="/landing-page/assets/7-D9YfEjWc.webp",HD="/landing-page/assets/8-DpaE3HAM.webp",GD="/landing-page/assets/9-BjIiXSpn.webp",qD="/landing-page/assets/10-DgFseseo.webp",XD="/landing-page/assets/11-BgCUCy39.webp",YD="/landing-page/assets/12-bc45_K3H.webp",$D="/landing-page/assets/13-qM6VUH4h.webp",KD="/landing-page/assets/14-DguQgms2.webp",WD="/landing-page/assets/15-bNfJ8O9K.webp",QD="/landing-page/assets/16-BwVgfM-_.webp",ZD="/landing-page/assets/17-BoAMP6wS.webp",JD="/landing-page/assets/18-Bt8fAsNt.webp",tL="/landing-page/assets/19-CFUNII0Q.webp",eL="/landing-page/assets/20-Bx3MZavu.webp",nL="/landing-page/assets/21-WOcQI29t.webp",iL="/landing-page/assets/22-8VVkLI3N.webp",sL="/landing-page/assets/23-BUe5mU1R.webp",aL="/landing-page/assets/24-DkGBDEg6.webp",rL="/landing-page/assets/25-AisOa8KW.webp",oL=[{label:"Mandate",data:YM},{label:"Mission",data:KM},{label:"Vision",data:$M},{label:"Service Pledge",data:WM}],lL=[{label:"Renewal of MV registration",data:QM},{label:"Transfer of ownership",data:ZM},{label:"Storage of motor Vehicle",data:JM},{label:"Change classification private to for hire",data:tD},{label:"Change classification for hire to private",data:eD},{label:"Change classification private to government",data:nD},{label:"Change body/body design/engine/color",data:iD},{label:"Duplicate certification of registration/certificate of registration-encumbered",data:sD},{label:"Annotation and cancellation of mortgage",data:aD},{label:"Duplicate plate",data:rD}],cL=[{label:"Student permit",data:oD},{label:"Renewal of student permit",data:lD},{label:"New driver's license (non-professional)",data:cD},{label:"Conductor's license",data:uD},{label:"Renewal of driver's license (plain or advance)/conductor's license/dormant",data:hD},{label:"Renewal of driver's license of filipinos living/working abroad",data:dD},{label:"Revision of records (change name)",data:fD},{label:"Revision of records (correction of name/birthdate/gender)",data:pD},{label:"Revision of records (change civil status)",data:mD},{label:"Revision of records (change in citizenship)",data:gD},{label:"Revision of records (change address)",data:yD},{label:"Duplicate driver's/conductor's license/student driver's permit",data:vD},{label:"Additional driver's license code/s",data:bD},{label:"Change classification from npdl to pdl with same driver's license code",data:AD},{label:"Conversion of foreign driver's license to philippine driver's license",data:SD},{label:"License certification",data:wD},{label:"Valid government issued identification card",data:ED}],uL=[{2024:[{image:BD},{image:FD},{image:ID},{image:UD},{image:jD},{image:VD},{image:zD},{image:HD},{image:GD},{image:qD},{image:XD},{image:YD},{image:$D},{image:KD},{image:WD},{image:QD},{image:ZD},{image:JD},{image:tL},{image:eL},{image:nL},{image:iL},{image:sL},{image:aL},{image:rL}]},{2025:[{image:xD},{image:TD},{image:_D},{image:CD},{image:RD},{image:MD},{image:DD},{image:LD},{image:PD},{image:OD},{image:ND},{image:kD}]}];function hL(){const{toggleTabState:a}=is();return j.jsx(j.Fragment,{children:j.jsx(ee.div,{viewport:{amount:.8},onViewportEnter:t=>a(parseInt(t.target.dataset.value)),id:"agency-details","data-value":1,className:"h-[calc(100vh-2.8rem)] snap-start snap-always",children:j.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:justify-center w-full h-full gap-[2rem] lg:gap-[3rem] overflow-auto p-[4rem] no-scrollbar",children:[j.jsxs(ee.div,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},className:"flex flex-col items-center justify-center leading-none w-full",children:[j.jsx("span",{className:"text-white uppercase font-bold text-[6rem]",children:"Agency"}),j.jsx("span",{className:"text-white uppercase font-bold text-[6rem]",children:"Details"})]}),j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10 w-full",children:oL.map((t,e)=>j.jsx(Mp,{data:t?.data,label:t?.label},e))})]})})})}function dL(){const{toggleTabState:a}=is();return j.jsx(ee.div,{viewport:{amount:.8},onViewportEnter:t=>a(parseInt(t.target.dataset.value)),id:"registration","data-value":2,className:"h-[calc(100vh-2.8rem)] snap-start snap-always",children:j.jsxs("div",{className:"flex flex-col items-center w-full h-full gap-[2rem] overflow-auto p-[2rem] no-scrollbar",children:[j.jsx(ee.div,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},className:"flex flex-col items-start justify-center leading-none",children:j.jsx("span",{className:"text-white uppercase font-bold text-[3rem] lg:text-[6rem]",children:"Registration"})}),j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-10 w-full",children:lL.map((t,e)=>j.jsx(Mp,{data:t?.data,label:t?.label},e))})]})})}function fL(){const{toggleTabState:a}=is();return j.jsx(ee.div,{viewport:{amount:.8},onViewportEnter:t=>a(parseInt(t.target.dataset.value)),id:"license","data-value":3,className:"h-[calc(100vh-2.8rem)] snap-start snap-always",children:j.jsxs("div",{className:"flex flex-col items-center w-full h-full gap-[2rem] overflow-auto p-[2rem] no-scrollbar",children:[j.jsx(ee.div,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},className:"flex flex-col items-start justify-center leading-none",children:j.jsx("span",{className:"text-white uppercase font-bold text-[3rem] lg:text-[6rem]",children:"License"})}),j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-10 w-full",children:cL.map((t,e)=>j.jsx(Mp,{data:t?.data,label:t?.label},e))})]})})}const pL="/landing-page/assets/lto-drJ5Yfa-.png",mL="/landing-page/assets/dotr-CcX3ugAi.png",gL="/landing-page/assets/bagong-pilipinas-f09K3HTK.png",t1="/landing-page/assets/bg-6UZBS06_.jfif";function yL(){const{toggleTabState:a}=is();return j.jsxs(ee.div,{viewport:{amount:.8},onViewportEnter:t=>a(parseInt(t.target.dataset.value)),id:"lto-bayombong","data-value":0,className:"flex flex-col snap-start snap-always lg:items-center lg:justify-center md:items-center md:justify-center w-full lg:h-[calc(100vh-2.8rem)] md:h-[calc(100vh-2.8rem)] overflow-hidden gap-8 relative bg-[#5e5a5a]",children:[j.jsxs("div",{className:"flex flex-col lg:flex-row md:flex-row items-center justify-center w-full gap-[1rem] lg:gap-[3rem] md:gap-[3rem]",children:[j.jsx(ee.img,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},src:gL,className:"w-[8rem] lg:w-[14rem] md:w-[10rem] z-10",alt:"LTO"}),j.jsx(ee.img,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},src:mL,className:"w-[8rem] lg:w-[14rem] md:w-[10rem] z-10",alt:"LTO"}),j.jsx(ee.img,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},src:pL,className:"w-[8rem] lg:w-[14rem] md:w-[10rem] z-10",alt:"LTO"})]}),j.jsxs("div",{className:"flex flex-col justify-center items-center text-center leading-none z-10",children:[j.jsx(ee.span,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},className:"uppercase font-bold lg:text-[4.5rem] md:text-[2rem] text-white",children:"Land Transportation Office"}),j.jsx(ee.span,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},className:"uppercase font-bold lg:text-[4.5rem] md:text-[2rem] text-white",children:"Bayombong District Office"})]}),j.jsx("img",{src:t1,className:"w-full absolute opacity-50 mask-b-from-10% mask-b-to-100%",alt:"LTO"})]})}function vL(){const{modalState:a,modalData:t,toggleModalState:e}=Is();return a?j.jsxs(ee.div,{initial:{opacity:0},whileInView:{opacity:1},className:"flex flex-col lg:flex-row gap-5 items-center justify-center bg-[#00000072] fixed z-50 w-screen h-screen",children:[j.jsxs(ee.div,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},className:"bg-[#1f1c1c] min-w-[20rem] min-h-[10rem] rounded-md p-1 relative",children:[j.jsx("img",{src:t,className:"w-[60rem] rounded-md",alt:"."}),j.jsx(uf,{onClick:()=>e(a),className:"text-4xl text-white absolute lg:-right-10 lg:-top-10 cursor-pointer invisible lg:visible"})]}),j.jsx(ee.div,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},children:j.jsx(uf,{onClick:()=>e(a),className:"text-4xl text-white lg:-right-10 lg:-top-10 cursor-pointer visible lg:invisible"})})]}):null}function bL({children:a}){const{indexState:t,toggleIndexState:e}=Is();return t?j.jsx(ee.div,{initial:{opacity:0},whileInView:{opacity:1},className:"flex flex-col lg:flex-row gap-5 items-center justify-center bg-[#00000072] fixed z-50 w-screen h-screen",children:j.jsxs(ee.div,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},className:"flex items-center justify-center bg-[#1f1c1c] min-w-[20rem] min-h-[10rem] rounded-md relative",children:[j.jsx("div",{className:"w-screen h-screen overflow-auto p-4 no-scrollbar",children:a}),j.jsx(uf,{onClick:()=>e(t),className:"text-4xl text-white top-2 right-2 absolute cursor-pointer"})]})}):null}function AL(a){return ss({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"},child:[]}]})(a)}function SL(a){return ss({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"},child:[]}]})(a)}function wL(a){return ss({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"},child:[]}]})(a)}function EL(a){return ss({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"},child:[]}]})(a)}function xL(){const{toggleTabState:a}=is();return j.jsx(ee.div,{viewport:{amount:.8},onViewportEnter:t=>a(parseInt(t.target.dataset.value)),id:"about","data-value":6,className:"h-[calc(100vh-2.8rem)] snap-start snap-always",children:j.jsx("div",{className:"flex flex-col items-center w-full h-full gap-[2rem] overflow-auto p-[2rem] no-scrollbar",children:j.jsxs("div",{className:"flex items-center justify-center w-full h-full text-white gap-4",children:[j.jsx("img",{src:t1,alt:"",className:"w-[36.4rem] rounded-md"}),j.jsxs("div",{className:"flex flex-col w-full h-full gap-4 overflow-auto no-scrollbar",children:[j.jsxs("div",{className:"flex flex-col gap-4",children:[j.jsx("span",{className:"uppercase text-[3rem] font-bold leading-7",children:"PREFACE"}),j.jsxs("div",{className:"flex flex-col w-full h-full gap-4",children:[j.jsx("span",{className:"text-justify indent-[3rem]",children:"In the province of Nueva Vizcaya lies the festive and vibrant town of Bayombong. Vizcayas capital surrounded by various cultural establishments and lush green mountains; neighboring rice fields filled with crops that represent Bayombong. The name Bayombong spring from the Gaddang (one of the local languages) word Bayongyong which means the confluence of two mighty rivers. As told, the Tribe of Maalate tried to conquer the place, which caused the outbreak of the first tribal war in the area. The place then was renamed Bayumbung as a sign of the Gaddangs first victory in defending their private domains."}),j.jsx("span",{className:"text-justify indent-[3rem]",children:"LTO Bayombong District Office caters the registration and licensing needs of the demographic landscapes of the municipalities of Bayombong, Bagabag, Diadi, Villaverde, Solano, Ambaguio and Quezon."}),j.jsx("span",{className:"text-justify indent-[3rem]",children:"Adjudged as the 2nd placer Outstanding District Office for CY 2023 and a special award for Road Safety Advocates National Level on 18 April 2024, for attaining a high rating in the performance of projects and improvements introduced in relation with LTOs mandates which resulted to the enhancement of service efficiency and realization of goals in upholding road safety, environmentally sustainable transport and good governance."}),j.jsx("span",{className:"text-justify indent-[3rem]",children:"As illustrated in the statistical graph, the core transactional mandates of the office revealed increase in every record penned in 2024. Registration of motor vehicle rocketed by 6.68 % with 48,763 total number of registered motor vehicles compared to the 45,711 of 2023. Meanwhile, on the Drivers License, it has risen up to 16.7 % with 32,767 total number of issued DL as against the 2023 volume of 28,057. Law enforcement as well escalated by 11.32% with 6,745 apprehension cases compared to the 6,059 recorded in 2023, as a result of solicited efforts in information dissemination, conduct of Road Safety Lectures and Free Theoretical Driving Course, Oplan Balik Rehistro/Lisensya , Household surveys in every barangay within our GAOR."}),j.jsx("span",{className:"text-justify indent-[3rem]",children:"LTO Bayombong District Office will always be and will consistently and continuously shine with excellence in every aspect of its service delivery. Bringing out the full potential and the best in every personnel in the performance, discharge and execution of the core mandates of the LTO. With its dedication in advocating Road Safety, we will persevere and pursue to make safer roads, safer vehicles and safer road users."})]})]}),j.jsx("div",{className:"flex flex-col w-full h-full",children:j.jsxs("div",{className:"flex flex-col gap-4",children:[j.jsx("span",{className:"uppercase text-[3rem] font-semibold",children:"Contact Us"}),j.jsxs("div",{className:"flex flex-col gap-1",children:[j.jsxs("div",{className:"flex items-center gap-2 text-[1.2rem]",children:[j.jsx(wL,{}),j.jsx("span",{className:"",children:"Capitol Compound, Bayombong, Nueva Vizcaya"})]}),j.jsxs("div",{className:"flex items-center gap-2 text-[1.2rem]",children:[j.jsx(u_,{}),j.jsx("span",{className:"",children:"ltobaydo@gmail.com"})]}),j.jsxs("div",{className:"flex items-center gap-2 text-[1.2rem]",children:[j.jsx(EL,{}),j.jsx("span",{className:"",children:"(078) 392 0936"})]})]})]})})]})]})})})}function TL(){const{toggleTabState:a}=is(),{indexState:t,toggleIndexState:e}=Is(),n=uL.filter(o=>Object.values(o)[0].length>0),r=o=>{e(t),Is.setState({indexModalData:o})};return j.jsx(ee.div,{viewport:{amount:.8},onViewportEnter:o=>a(parseInt(o.target.dataset.value)),id:"our-activities","data-value":5,className:"h-[calc(100vh-2.8rem)] snap-start snap-always",children:j.jsxs("div",{className:"flex flex-col items-center w-full h-full gap-[2rem] overflow-auto p-[2rem] no-scrollbar",children:[j.jsx(ee.div,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},className:"flex flex-col items-start justify-center leading-none",children:j.jsx("span",{className:"text-white uppercase font-bold text-[3rem] lg:text-[6rem]",children:"Our Activities"})}),j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-10 w-full",children:n.map((o,l)=>{const[u,d]=Object.entries(o)[0];return j.jsx(ee.div,{initial:{scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.3}},onClick:()=>r(d),className:"overflow-hidden rounded-md cursor-pointer",children:j.jsxs("div",{className:"relative group",children:[j.jsx("div",{className:"absolute flex items-center justify-center h-[2rem] bg-white opacity-60 w-full",children:j.jsx("span",{className:"font-semibold",children:u.toUpperCase()})}),j.jsx("img",{src:d[0].image,alt:`${u} thumbnail`,className:"w-full"}),j.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-30 transition-all duration-300"})]})},l)})})]})})}function _L(){const{indexModalData:a}=Is();return j.jsx(bL,{children:j.jsx("div",{className:"grid grid-cols-4 gap-4 w-full",children:a?.map((t,e)=>j.jsx("div",{className:"rounded-md overflow-hidden",children:j.jsx("img",{src:t.image,alt:"",className:""})},e))})})}const qe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Pf=[.001,0,0,.001,0,0],Wd=1.35,fn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Qn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Lo="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},e1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ne={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},So={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},fe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Pa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Go={ERRORS:0,WARNINGS:1,INFOS:5},Wa={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},bc={moveTo:0,lineTo:1,curveTo:2,closePath:3},n1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let eu=Go.WARNINGS;function CL(a){Number.isInteger(a)&&(eu=a)}function RL(){return eu}function nu(a){eu>=Go.INFOS&&console.info(`Info: ${a}`)}function At(a){eu>=Go.WARNINGS&&console.warn(`Warning: ${a}`)}function qt(a){throw new Error(a)}function Lt(a,t){a||qt(t)}function ML(a){switch(a?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Dp(a,t=null,e=null){if(!a)return null;if(e&&typeof a=="string"&&(e.addDefaultProtocol&&a.startsWith("www.")&&a.match(/\./g)?.length>=2&&(a=`http://${a}`),e.tryConvertEncoding))try{a=NL(a)}catch{}const n=t?URL.parse(a,t):URL.parse(a);return ML(n)?n:null}function Lp(a,t,e=!1){const n=URL.parse(a);return n?(n.hash=t,n.href):e&&Dp(a,"http://example.com")?a.split("#",1)[0]+`${t?`#${t}`:""}`:""}function wt(a,t,e,n=!1){return Object.defineProperty(a,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Hs=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class vb extends Hs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Qd extends Hs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class qc extends Hs{constructor(t){super(t,"InvalidPDFException")}}class Po extends Hs{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class DL extends Hs{constructor(t){super(t,"FormatError")}}class Ti extends Hs{constructor(t){super(t,"AbortException")}}function i1(a){(typeof a!="object"||a?.length===void 0)&&qt("Invalid argument for bytesToString");const t=a.length,e=8192;if(t<e)return String.fromCharCode.apply(null,a);const n=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),l=a.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function qo(a){typeof a!="string"&&qt("Invalid argument for stringToBytes");const t=a.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=a.charCodeAt(n)&255;return e}function LL(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function PL(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function OL(){try{return new Function(""),!0}catch{return!1}}class Me{static get isLittleEndian(){return wt(this,"isLittleEndian",PL())}static get isEvalSupported(){return wt(this,"isEvalSupported",OL())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return wt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return wt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return wt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Zd=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));class it{static makeHexColor(t,e,n){return`#${Zd[t]}${Zd[e]}${Zd[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const r=t[n],o=t[n+1];t[n]=r*e[0]+o*e[2]+e[4],t[n+1]=r*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],o=e[1],l=e[2],u=e[3],d=e[4],f=e[5];for(let p=0;p<6;p+=2){const g=t[n+p],v=t[n+p+1];t[n+p]=g*r+v*l+d,t[n+p+1]=g*o+v*u+f}}static applyInverseTransform(t,e){const n=t[0],r=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const r=e[0],o=e[1],l=e[2],u=e[3],d=e[4],f=e[5],p=t[0],g=t[1],v=t[2],b=t[3];let S=r*p+d,A=S,x=r*v+d,E=x,T=u*g+f,C=T,D=u*b+f,R=D;if(o!==0||l!==0){const N=o*p,B=o*v,I=l*g,q=l*b;S+=I,E+=I,x+=q,A+=q,T+=N,R+=N,D+=B,C+=B}n[0]=Math.min(n[0],S,x,A,E),n[1]=Math.min(n[1],T,D,C,R),n[2]=Math.max(n[2],S,x,A,E),n[3]=Math.max(n[3],T,D,C,R)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],o=t[2],l=t[3],u=n**2+r**2,d=n*o+r*l,f=o**2+l**2,p=(u+f)/2,g=Math.sqrt(p**2-(u*f-d**2));e[0]=Math.sqrt(p+g||1),e[1]=Math.sqrt(p-g||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,r,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,r),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,r)}static#t(t,e,n,r,o,l,u,d,f,p){if(f<=0||f>=1)return;const g=1-f,v=f*f,b=v*f,S=g*(g*(g*t+3*f*e)+3*v*n)+b*r,A=g*(g*(g*o+3*f*l)+3*v*u)+b*d;p[0]=Math.min(p[0],S),p[1]=Math.min(p[1],A),p[2]=Math.max(p[2],S),p[3]=Math.max(p[3],A)}static#e(t,e,n,r,o,l,u,d,f,p,g,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,r,o,l,u,d,-g/p,v);return}const b=p**2-4*g*f;if(b<0)return;const S=Math.sqrt(b),A=2*f;this.#t(t,e,n,r,o,l,u,d,(-p+S)/A,v),this.#t(t,e,n,r,o,l,u,d,(-p-S)/A,v)}static bezierBoundingBox(t,e,n,r,o,l,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d),this.#e(t,n,o,u,e,r,l,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),this.#e(t,n,o,u,e,r,l,d,3*(-e+3*(r-l)+d),6*(e-2*r+l),3*(r-e),f)}}function NL(a){return decodeURIComponent(escape(a))}let Jd=null,bb=null;function s1(a){return Jd||(Jd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,bb=new Map([["","t"]])),a.replaceAll(Jd,(t,e,n)=>e?e.normalize("NFKC"):bb.get(n))}function Pp(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),i1(a)}const Op="pdfjs_internal_id_";function kL(a,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...o]=e;if(!a(n)&&!Number.isInteger(n)||!t(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function je(a,t,e){return Math.min(Math.max(a,t),e)}function a1(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(i1(a))}function BL(a){return Uint8Array.fromBase64?Uint8Array.fromBase64(a):qo(atob(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...t){return new Promise(e=>{e(a(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(a){return a.reduce((t,e)=>t+e,0)});class Oo{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Oo.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)r(d)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Np{static setupStorage(t,e,n,r,o){const l=r.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=g}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);l.append(g),u&&Oo.shouldBuildText(r.name)&&f.push(g)}return{textDivs:f}}const p=[[r,-1,l]];for(;p.length>0;){const[g,v,b]=p.at(-1);if(v+1===g.children.length){p.pop();continue}const S=g.children[++p.at(-1)[1]];if(S===null)continue;const{name:A}=S;if(A==="#text"){const E=document.createTextNode(S.value);f.push(E),b.append(E);continue}const x=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,A):document.createElement(A);if(b.append(x),S.attributes&&this.setAttributes({html:x,element:S,storage:e,intent:o,linkService:n}),S.children?.length>0)p.push([S,-1,x]);else if(S.value){const E=document.createTextNode(S.value);u&&Oo.shouldBuildText(A)&&f.push(E),x.append(E)}}for(const g of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const bi="http://www.w3.org/2000/svg";class Us{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function sr(a,t="text"){if(fo(a,document.baseURI)){const e=await fetch(a);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",a,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Xo{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=l,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,g,v,b;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,g=0,v=0,b=1;break;case 90:p=0,g=1,v=1,b=0;break;case 270:p=0,g=-1,v=-1,b=0;break;case 0:p=1,g=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,b=-b);let S,A,x,E;p===0?(S=Math.abs(f-t[1])*n+o,A=Math.abs(d-t[0])*n+l,x=(t[3]-t[1])*n,E=(t[2]-t[0])*n):(S=Math.abs(d-t[0])*n+o,A=Math.abs(f-t[1])*n+l,x=(t[2]-t[0])*n,E=(t[3]-t[1])*n),this.transform=[p*n,g*n,v*n,b*n,S-p*n*d-v*n*f,A-g*n*d-b*n*f],this.width=x,this.height=E}get rawDims(){const t=this.viewBox;return wt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Xo({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return it.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];it.applyTransform(e,this.transform);const n=[t[2],t[3]];return it.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return it.applyInverseTransform(n,this.transform),n}}class iu extends Hs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Yo(a){const t=a.length;let e=0;for(;e<t&&a[e].trim()==="";)e++;return a.substring(e,e+5).toLowerCase()==="data:"}function su(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function r1(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function o1(a,t="document.pdf"){if(typeof a!="string")return t;if(Yo(a))return At('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(a);if(!n)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return r(l);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const d=Array.from(n.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return r(f)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return r(d[0])}return t}class Ab{started=Object.create(null);times=[];time(t){t in this.started&&At(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||At(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-r}ms
`);return t.join("")}}function fo(a,t){const e=t?URL.parse(a,t):URL.parse(a);return e?.protocol==="http:"||e?.protocol==="https:"}function gn(a){a.preventDefault()}function te(a){a.preventDefault(),a.stopPropagation()}function FL(a){console.log("Deprecated API usage: "+a)}class Xc{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(l+=p,u+=g):f==="+"&&(l-=p,u-=g),new Date(Date.UTC(n,r,o,l,u,d))}}function l1(a,{scale:t=1,rotation:e=0}){const{width:n,height:r}=a.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new Xo({viewBox:o,userUnit:1,scale:t,rotation:e})}function ar(a){if(a.startsWith("#")){const t=parseInt(a.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(t=>parseInt(t)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(At(`Not a valid color format: "${a}"`),[0,0,0])}function IL(a){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of a.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;a.set(e,ar(n))}t.remove()}function Jt(a){const{a:t,b:e,c:n,d:r,e:o,f:l}=a.getTransform();return[t,e,n,r,o,l]}function Xn(a){const{a:t,b:e,c:n,d:r,e:o,f:l}=a.getTransform().invertSelf();return[t,e,n,r,o,l]}function ns(a,t,e=!1,n=!0){if(t instanceof Xo){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=a,u=Me.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,g=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=g):(l.width=g,l.height=p)}n&&a.setAttribute("data-main-rotation",t.rotation)}class In{constructor(){const{pixelRatio:t}=In;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,o=-1){let l=1/0,u=1/0,d=1/0;n=In.capPixels(n,o),n>0&&(l=Math.sqrt(n/(t*e))),r!==-1&&(u=r/t,d=r/e);const f=Math.min(l,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const Yc=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class UL{static get isDarkMode(){return wt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class c1{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),wt(this,"commentForegroundColor",ar(n))}}function u1(a,t,e,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return a=Math.round(a*n+r),t=Math.round(t*n+r),e=Math.round(e*n+r),[a,t,e]}function Sb(a,t){const e=a[0]/255,n=a[1]/255,r=a[2]/255,o=Math.max(e,n,r),l=Math.min(e,n,r),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((n-r)/d+(n<r?6:0))*60;break;case n:t[0]=((r-e)/d+2)*60;break;case r:t[0]=((e-n)/d+4)*60;break}}t[2]=u}function Of(a,t){const e=a[0],n=a[1],r=a[2],o=(1-Math.abs(2*r-1))*n,l=o*(1-Math.abs(e/60%2-1)),u=r-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function wb(a){return a<=.03928?a/12.92:((a+.055)/1.055)**2.4}function Eb(a,t,e){Of(a,e),e.map(wb);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];Of(t,e),e.map(wb);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const xb=new Map;function h1(a,t){const e=a[0]+a[1]*256+a[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=xb.get(e);if(n)return n;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);Sb(a,l);const u=r.subarray(6,9);Sb(t,u);const d=u[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Eb(l,u,o)<f){let p,g;d?(p=l[2],g=1):(p=0,g=l[2]);const v=.005;for(;g-p>v;){const b=l[2]=(p+g)/2;d===Eb(l,u,o)<f?p=b:g=b}l[2]=d?g:p}return Of(l,o),n=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),xb.set(e,n),n}function kp({html:a,dir:t,className:e},n){const r=document.createDocumentFragment();if(typeof a=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=a.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const f=l[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}r.append(o)}else Np.render({xfaHtml:a,div:r,intent:"richText"});r.firstChild.classList.add("richText",e),n.append(r)}class wo{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,wo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",gn,{signal:e}),t.addEventListener("pointerdown",wo.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const r=this.#i.toolbarPosition;if(r){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,te(t)}#h(t){this.#i._focusEventsAllowed=!0,te(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",gn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",wo.#c[t]),this.#f(n)&&n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#r=t}addComment(t,e=null){if(this.#s)return;const n=t.renderForToolbar();if(!n)return;this.#f(n);const r=this.#a=this.#g;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(r,e)):this.#n.append(n,r),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,n){const r=this.#n.querySelector(n);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class jL{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",gn,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let n=0,r=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const u=o.x+(e?o.width:0);if(l>n){r=u,n=l;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,n]}show(t,e,n){const[r,o]=this.#r(e,n),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,n,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",gn,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function d1(a,t,e){for(const n of e)t.addEventListener(n,a[n].bind(a))}class VL{#t=0;get id(){return`${Lo}${this.#t++}`}}class Bp{#t=Pp();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return wt(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(n.url=e,r=await sr(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=Bp._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const g=n.svgUrl=l.result;u.src=await o?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=l.onerror=p});l.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){At(r),n=null}return this.#i.set(t,n),n&&this.#i.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:r,type:o}=t;return this.#n(`${e}_${n}_${r}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,n),this.#i.set(n.id,n),n}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class zL{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:e,post:n,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class $o{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Me.platform;for(const[n,r,o={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(r.bind(t,...l,e)(),o||te(e))}}class Fp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return IL(t),wt(this,"_colors",t)}convert(t){const e=ar(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((o,l)=>o===e[l]))return Fp._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?it.makeHexColor(...e):t}}class _i{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new zL;#l=null;#d=null;#h=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#T=null;#E=null;#A=null;#C=null;#w=!1;#x=null;#D=new VL;#R=!1;#M=!1;#F=!1;#P=null;#N=null;#I=null;#k=null;#G=null;#_=bt.NONE;#S=new Set;#O=null;#U=null;#V=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#B=null;#q=null;#Z=null;#J=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=_i.prototype,e=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return wt(this,"_keyboardManager",new $o([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,n,r,o,l,u,d,f,p,g,v,b,S,A,x){const E=this._signal=this.#t.signal;this.#q=t,this.#Z=e,this.#J=n,this.#s=r,this.#l=o,this.#U=l,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:E}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#T=d.filterFactory,this.#V=f,this.#C=p||null,this.#y=g,this.#b=v,this.#v=b,this.#G=S||null,this.viewParameters={realScale:Us.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=x!==!1,o?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#m.clear(),this.#k?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#x?.hide(),this.#x=null,this.#I?.destroy(),this.#I=null,this.#i=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return wt(this,"hcmFilter",this.#V?this.#T.addHCMFilter(this.#V.foreground,this.#V.background):"none")}get direction(){return wt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return wt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return wt(this,"highlightColors",null);const e=new Map,n=!!this.#V;for(const[r,o]of t){const l=r.endsWith("_HCM");if(n&&l){e.set(r.replace("_HCM",""),o);continue}!n&&!l&&e.set(r,o)}return wt(this,"highlightColors",e)}get highlightColorNames(){return wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#I=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,r){this.#l?.showDialog(this,t,e,n,r)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await n}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const n of this.#r.values()){const{x:r,y:o,width:l,height:u}=n.div.getBoundingClientRect();if(t>=r&&t<=r+l&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Us.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#r.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=n,d=n.toString(),p=this.#Q(n).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;n.empty();const v=this.#tt(p),b=this.#_===bt.NONE,S=()=>{const A=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:d});b&&this.showAllEditors("highlight",!0,!0),e&&A?.editComment()};if(b){this.switchToMode(bt.HIGHLIGHT,S);return}S()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#Q(t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#x||=new jL(this),this.#x.show(n,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${Lo}${t}`,n=this.#a.getRawValue(e);return n&&this.#a.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#x?.hide(),this.#O=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const r=this.#Q(t).closest(".textLayer");if(!r){this.#O&&(this.#x?.hide(),this.#O=null,this.#L({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#O=e,this.#L({hasSelectedText:!0}),!(this.#_!==bt.HIGHLIGHT&&this.#_!==bt.NONE)&&(this.#_===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#_===bt.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#M){const l=new AbortController,u=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#_===bt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#N=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,e]=this.#N;this.#N=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#P)return;this.#P=new AbortController;const t=this.combinedSignal(this.#P);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#P?.abort(),this.#P=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#S){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){At(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of n){const f=await r.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){At(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==bt.NONE&&!this.isEditorHandlingKeyboard&&_i._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([n,r])=>this.#$[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#_===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[Rt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#L({isEditing:this.#_!==bt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,o=!1){if(this.#_!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#_===bt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=t,t===bt.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===bt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===bt.POPUP){this.#i||=await this.#X.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,u=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:p,deleted:g}=d;f&&l.add(f),p&&!g&&u.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:p,contentsObj:g}=d;p&&g?.str&&!l.has(f)&&!this.#g.has(f)&&u.push(d)}this.#l?.showSidebar(u)}if(!e){n&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():r?l.enterInEditMode():l.focus()):l.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Rt.CREATE:this.currentLayer.addNewEditor(e);return;case Rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#S)n.updateParams(t,e);else for(const n of this.#u)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#Y?.get(Rt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[Rt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#F!==t){this.#F=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#k?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#mt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],n=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},r=()=>{for(const o of e)this.#st(o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#_!==bt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=t,this.#z[1]+=e;const[r,o]=this.#z,l=[...this.#S],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:r,y:o,pageIndex:l},u]of t)u.newX=r,u.newY=o,u.newPageIndex=l,e||=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const n=(r,o,l,u)=>{if(this.#n.has(r.id)){const d=this.#r.get(u);d?r._setParentAndPosition(d,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of t)n(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of t)n(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const n of this.#p.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#_}isEditingMode(){return this.#_!==bt.NONE}get imageManager(){return wt(this,"imageManager",new Bp)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,g,v)=>({x:(p-r)/l,y:1-(f+g-n)/o,width:v/l,height:g/o});break;case"180":u=(f,p,g,v)=>({x:1-(f+g-n)/o,y:1-(p+v-r)/l,width:g/o,height:v/l});break;case"270":u=(f,p,g,v)=>({x:1-(p+v-r)/l,y:(f-n)/o,width:v/l,height:g/o});break;default:u=(f,p,g,v)=>({x:(f-n)/o,y:(p-r)/l,width:g/o,height:v/l});break}const d=[];for(let f=0,p=e.rangeCount;f<p;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:b,width:S,height:A}of g.getClientRects())S===0||A===0||d.push(u(v,b,S,A))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#a.getRawValue(e);n&&(this.#_===bt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const r=this.#k?.get(t);r&&(r.setCanvas(e,n),this.#k.delete(t))}addMissingCanvas(t,e){(this.#k||=new Map).set(t,e)}}class Kn{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Kn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Kn._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Kn.#f.missing),e.setAttribute("data-l10n-id",Kn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",gn,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,r(o))},{signal:n}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Kn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(this.#l=n,this.#d=r),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Kn.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Kn.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ac{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(n.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-r)/l,(e+n-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",gn,{signal:n}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,te(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,te(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,r(o))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,r;if(e)[n,r]=e;else{[n,r]=this.#n.commentButtonPosition;const{width:p,height:g,x:v,y:b}=this.#n;n=v+n*p,r=b+r*g}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:d,height:f}=o;this.#n._uiManager.editComment(this.#n,l+n*d,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#s=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class Ko{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#i=n,this.#n=e,this.#r=r,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/In.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(te(f),d(f))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const u=this.#p.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",te,l),o.addEventListener("pointermove",te,l),o.addEventListener("pointercancel",te,l),o.addEventListener("pointerup",te,l),this.#r?.()}if(te(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;te(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:o}=e,{screenX:l,screenY:u}=n,d=this.#l,{touch0X:f,touch0Y:p,touch1X:g,touch1Y:v}=d,b=g-f,S=v-p,A=l-r,x=u-o,E=Math.hypot(A,x)||1,T=Math.hypot(b,S)||1;if(!this.#e&&Math.abs(T-E)<=Ko.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(r+l)/2,(o+u)/2];this.#s?.(C,T,E)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(te(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ht{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#b=!1;#v=null;#T=0;#E=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#x=ht._zIndex++;static _borderLineWidth=-1;static _colorManager=new Fp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ht.prototype._resizeWithKeyboard,e=_i.TRANSLATE_SMALL,n=_i.TRANSLATE_BIG;return wt(this,"_resizerKeyboardManager",new $o([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],ht.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new HL({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ht._l10n??=t,ht._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ht._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);ht._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(e+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}#D([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=ht,r=n/t,o=n/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=n,d*=r,o*=n,l*=r,this._mustFixPosition)switch(t){case 0:o=je(o,0,n-u),l=je(l,0,r-d);break;case 90:o=je(o,0,n-d),l=je(l,u,r);break;case 180:o=je(o,u,n),l=je(l,d,r);break;case 270:o=je(o,d,n),l=je(l,0,r-u);break}this.x=o/=n,this.y=l/=r;const[f,p]=this.getBaseTranslation();o+=f,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ht.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ht.#R(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#P.bind(this,n),{signal:e}),r.addEventListener("contextmenu",gn,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#P(t,e){e.preventDefault();const{isMac:n}=Me.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#k.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",te,{passive:!1,signal:l}),window.addEventListener("contextmenu",gn,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#I()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#N(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===e&&u===n&&d===r||this.addCommands({cmd:this.#N.bind(this,o,l,u,d),undo:this.#N.bind(this,t,e,n,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#k(t,e){const[n,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=ht.MIN_SIZE/n,p=ht.MIN_SIZE/r,g=this.#M(this.rotation),v=(k,z)=>[g[0]*k+g[2]*z,g[1]*k+g[3]*z],b=this.#M(360-this.rotation),S=(k,z)=>[b[0]*k+b[2]*z,b[1]*k+b[3]*z];let A,x,E=!1,T=!1;switch(t){case"topLeft":E=!0,A=(k,z)=>[0,0],x=(k,z)=>[k,z];break;case"topMiddle":A=(k,z)=>[k/2,0],x=(k,z)=>[k/2,z];break;case"topRight":E=!0,A=(k,z)=>[k,0],x=(k,z)=>[0,z];break;case"middleRight":T=!0,A=(k,z)=>[k,z/2],x=(k,z)=>[0,z/2];break;case"bottomRight":E=!0,A=(k,z)=>[k,z],x=(k,z)=>[0,0];break;case"bottomMiddle":A=(k,z)=>[k/2,z],x=(k,z)=>[k/2,0];break;case"bottomLeft":E=!0,A=(k,z)=>[0,z],x=(k,z)=>[k,0];break;case"middleLeft":T=!0,A=(k,z)=>[0,z/2],x=(k,z)=>[k,z/2];break}const C=A(u,d),D=x(u,d);let R=v(...D);const N=ht._round(o+R[0]),B=ht._round(l+R[1]);let I=1,q=1,K,J;if(e.fromKeyboard)({deltaX:K,deltaY:J}=e);else{const{screenX:k,screenY:z}=e,[Q,lt]=this.#l;[K,J]=this.screenToPageTranslation(k-Q,z-lt),this.#l[0]=k,this.#l[1]=z}if([K,J]=S(K/n,J/r),E){const k=Math.hypot(u,d);I=q=Math.max(Math.min(Math.hypot(D[0]-C[0]-K,D[1]-C[1]-J)/k,1/u,1/d),f/u,p/d)}else T?I=je(Math.abs(D[0]-C[0]-K),f,1)/u:q=je(Math.abs(D[1]-C[1]-J),p,1)/d;const ot=ht._round(u*I),dt=ht._round(d*q);R=v(...x(ot,dt));const at=N-R[0],ct=B-R[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ot,this.height=dt,this.x=at,this.y=ct,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new wo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Kn.initialize(ht._l10n),this.#i=new Kn(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Ac(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:r}}=this.#n;return{text:e,richText:t,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Ac(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new Ac(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Ac(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#V();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),d1(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Ko({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=this.#M(this.rotation),u=(N,B)=>[l[0]*N+l[2]*B,l[1]*N+l[3]*B],[d,f]=this.parentDimensions,p=this.x,g=this.y,v=this.width,b=this.height,S=ht.MIN_SIZE/d,A=ht.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/b),S/v,A/b);const x=ht._round(v*o),E=ht._round(b*o);if(x===v&&E===b)return;this.#u||=[p,g,v,b];const T=u(v/2,b/2),C=ht._round(p+T[0]),D=ht._round(g+T[1]),R=u(x/2,E/2);this.x=C-R[0],this.y=D-R[1],this.width=x,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(t){const{isMac:e}=Me.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#U(t);return}this.#O(t)}#O(t){const{isMac:e}=Me.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#O(f),n&&this._onStopDragging()};e&&(this.#T=t.clientX,this.#E=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:g,pointerId:v}=f;if(v!==this.#a){te(f);return}const[b,S]=this.screenToPageTranslation(p-this.#T,g-this.#E);this.#T=p,this.#E=g,this._uiManager.dragSelectedEditors(b,S)},l),window.addEventListener("touchmove",te,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),te(f)},l));const d=f=>{if(!this.#a||this.#a===f.pointerId){u(f);return}te(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/r,p=e/r,g=this.x*o,v=this.y*l,b=this.width*o,S=this.height*l;switch(n){case 0:return[g+f+u,l-v-p-S+d,g+f+b+u,l-v-p+d];case 90:return[g+p+u,l-v+f+d,g+p+S+u,l-v+f+b+d];case 180:return[g-f-b+u,l-v+p+d,g-f+u,l-v+p+S+d];case 270:return[g-p-S+u,l-v-f-b+d,g-p+u,l-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,o,l]=t,u=o-n,d=l-r;switch(this.rotation){case 0:return[n,e-l,u,d];case 90:return[n,e-r,d,u];case 180:return[o,e-r,u,d];case 270:return[o,e-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:r,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!o,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&r>0&&t<o&&n>0}#V(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#V()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,l]=r.pageDimensions,[u,d,f,p]=r.getRectInCurrentCoords(t.rect,l);return r.x=u/o,r.y=d/l,r.width=f/o,r.height=p/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#B(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,r,o,l]=this.getPDFRect();return[ht._round(n+(o-n)*t),ht._round(r+(l-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#$.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",ht._l10nResizer[p])}}const n=this.#e[0];let r=0;for(const l of e){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of e){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ht._l10nResizer[f])}}this.#z(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ht._resizerKeyboardManager.exec(this,t)}#X(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#$(t){this.#g=this.#b?t:""}#z(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#k(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#b=!1,this.#z(-1),this.#I()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:n}=t;let r=this.#A.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(n),this.#A.size===0&&(this.#A=null)},ht._telemetryTimeout),this.#A.set(n,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class HL extends ht{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Tb=3285377520,Cn=4294901760,Yn=65535;class f1{constructor(t){this.h1=t?t&4294967295:Tb,this.h2=t?t&4294967295:Tb}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let A=0,x=t.length;A<x;A++){const E=t.charCodeAt(A);E<=255?e[n++]=E:(e[n++]=E>>>8,e[n++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(e.buffer,0,r);let u=0,d=0,f=this.h1,p=this.h2;const g=3432918353,v=461845907,b=g&Yn,S=v&Yn;for(let A=0;A<r;A++)A&1?(u=l[A],u=u*g&Cn|u*b&Yn,u=u<<15|u>>>17,u=u*v&Cn|u*S&Yn,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[A],d=d*g&Cn|d*b&Yn,d=d<<15|d>>>17,d=d*v&Cn|d*S&Yn,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*g&Cn|u*b&Yn,u=u<<15|u>>>17,u=u*v&Cn|u*S&Yn,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Cn|t*36045&Yn,e=e*4283543511&Cn|((e<<16|t>>>16)*2950163797&Cn)>>>16,t^=e>>>1,t=t*444984403&Cn|t*60499&Yn,e=e*3301882366&Cn|((e<<16|t>>>16)*3120437893&Cn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Nf=Object.freeze({map:null,hash:"",transfer:void 0});class Ip{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof ht&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof ht)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(r=!0,n[o]=l);else r=!0,this.#n.set(t,e);r&&this.#r(),e instanceof ht&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new p1(this)}get serializable(){if(this.#n.size===0)return Nf;const t=new Map,e=new f1,n=[],r=Object.create(null);let o=!1;for(const[l,u]of this.#n){const d=u instanceof ht?u.serialize(!1,r):u;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Nf}get editorStats(){let t=null;const e=new Map;let n=0,r=0;for(const o of this.#n.values()){if(!(o instanceof ht)){o.popup&&(o.popup.deleted?r+=1:n+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,p]of Object.entries(l)){if(f==="type")continue;let g=d.get(f);g||(g=new Map,d.set(f,g));const v=g.get(p)??0;g.set(p,v+1)}}if((r>0||n>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:n}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#i?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class p1 extends Ip{#t;constructor(t){super();const{map:e,hash:n,transfer:r}=t.serializable,o=structuredClone(e,r?{transfer:r}:null);this.#t={map:o,hash:n,transfer:r}}get print(){qt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return wt(this,"modifiedIds",{ids:new Set,hash:""})}}class GL{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(Lt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),n?.(t)}catch{At(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw At(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return wt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return wt(this,"isSyncFontLoadingSupported",qe||Me.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Lt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return wt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(D,R){return D.charCodeAt(R)<<24|D.charCodeAt(R+1)<<16|D.charCodeAt(R+2)<<8|D.charCodeAt(R+3)&255}function r(D,R,N,B){const I=D.substring(0,R),q=D.substring(R+N);return I+B+q}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function p(D,R){if(++f>30){At("Load test font never loaded."),R();return}if(d.font="30px "+D,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(p.bind(null,D,R))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,g.length,g);const S=16,A=1482184792;let x=n(v,S);for(o=0,l=g.length-3;o<l;o+=4)x=x-A+n(g,o)|0;o<g.length&&(x=x-A+n(g+"XXX",o)|0),v=r(v,S,4,LL(x));const E=`url(data:font/opentype;base64,${btoa(v)});`,T=`@font-face {font-family:"${g}";src:${E}}`;this.insertRule(T);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const D of[t.loadedName,g]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=D,C.append(R)}this._document.body.append(C),p(g,()=>{C.remove(),e.complete()})}}class qL{#t;constructor(t,e=null,n,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${a1(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(l){At(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function XL(a){if(a instanceof URL)return a.href;if(typeof a=="string"){if(qe)return a;const t=URL.parse(a,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function YL(a){if(qe&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return qo(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a?.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Sc(a){if(typeof a!="string")return null;if(a.endsWith("/"))return a;throw new Error(`Invalid factory url: "${a}" must include trailing slash.`)}const kf=a=>typeof a=="object"&&Number.isInteger(a?.num)&&a.num>=0&&Number.isInteger(a?.gen)&&a.gen>=0,$L=a=>typeof a=="object"&&typeof a?.name=="string",m1=kL.bind(null,kf,$L);class KL{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){At("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const wc={DATA:1,ERROR:2},be={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _b(){}function en(a){if(a instanceof Ti||a instanceof qc||a instanceof vb||a instanceof Po||a instanceof Qd)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new Ti(a.message);case"InvalidPDFException":return new qc(a.message);case"PasswordException":return new vb(a.message,a.code);case"ResponseException":return new Po(a.message,a.status,a.missing);case"UnknownErrorException":return new Qd(a.message,a.details)}return new Qd(a.message,a.toString())}class po{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===wc.DATA)r.resolve(t.data);else if(t.callback===wc.ERROR)r.reject(en(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:wc.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:wc.ERROR,callbackId:t.callbackId,reason:en(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:l,targetName:u,stream:be.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Lt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:be.CANCEL,streamId:o,reason:en(f)}),p.promise}},n)}#i(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,p=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:be.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:be.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){Lt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:be.ERROR,streamId:e,reason:en(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:be.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:be.START_COMPLETE,streamId:e,reason:en(f)})})}#n(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case be.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(en(t.reason));break;case be.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(en(t.reason));break;case be.PULL:if(!u){o.postMessage({sourceName:n,targetName:r,stream:be.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||_b).then(function(){o.postMessage({sourceName:n,targetName:r,stream:be.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:be.PULL_COMPLETE,streamId:e,reason:en(f)})});break;case be.ENQUEUE:if(Lt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case be.CLOSE:if(Lt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case be.ERROR:Lt(l,"error should have stream controller"),l.controller.error(en(t.reason)),this.#r(l,e);break;case be.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(en(t.reason)),this.#r(l,e);break;case be.CANCEL:if(!u)break;const d=en(t.reason);Promise.try(u.onCancel||_b,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:be.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:be.CANCEL_COMPLETE,streamId:e,reason:en(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class g1{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){qt("Abstract method `_createCanvas` called.")}}class WL extends g1{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class y1{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class Cb extends y1{async _fetch(t){const e=await sr(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):qo(e)}}class v1{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,o){return"none"}destroy(t=!1){}}class QL extends v1{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(bi,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#r.createElementNS(bi,"defs"),t.append(n),n.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=d[g]/255;const p=f.join(",");return[p,p,p]}const[e,n,r]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=n[d]/255,u[d]=r[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Yo(e)?At('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Lp(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,r,o]=this.#d(t),l=t.length===1?n:`${n}${r}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const f=this.#p(u);return this.#m(n,r,o,f),d}addHCMFilter(t,e){const n=`${t}-${e}`,r="base";let o=this.#c.get(r);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(r,o)),!t||!e))return o.url;const l=this.#b(t);t=it.makeHexColor(...l);const u=this.#b(e);if(e=it.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let b=0;b<=255;b++){const S=b/255;d[b]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#n}_hcm_filter`,g=o.filter=this.#p(p);this.#m(f,f,f,g),this.#g(g);const v=(b,S)=>{const A=l[b]/255,x=u[b]/255,E=new Array(S+1);for(let T=0;T<=S;T++)E[T]=A+T/S*(x-A);return E.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),g),o.url=this.#h(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#d([t]),r=`alpha_${n}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#p(o);return this.#y(n,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,r;if(t?([n]=this.#d([t]),r=`luminosity_${n}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#p(o);return this.#f(u),t&&this.#y(n,u),l}addHighlightHCMFilter(t,e,n,r,o){const l=`${e}-${n}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!e||!n))return u.url;const[d,f]=[e,n].map(this.#b.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,b]=[r,o].map(this.#b.bind(this));g<p&&([p,g,v,b]=[g,p,b,v]),this.#l.style.color="";const S=(E,T,C)=>{const D=new Array(256),R=(g-p)/C,N=E/255,B=(T-E)/(255*C);let I=0;for(let q=0;q<=C;q++){const K=Math.round(p+q*R),J=N+q*B;for(let ot=I;ot<=K;ot++)D[ot]=J;I=K+1}for(let q=I;q<256;q++)D[q]=D[I-1];return D.join(",")},A=`g_${this.#n}_hcm_${t}_filter`,x=u.filter=this.#p(A);return this.#g(x),this.#m(S(v[0],b[0],5),S(v[1],b[1],5),S(v[2],b[2],5),x),u.url=this.#h(A),u.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(bi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(bi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(bi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const r=this.#r.createElementNS(bi,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)}#m(t,e,n,r){const o=this.#r.createElementNS(bi,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",n)}#y(t,e){const n=this.#r.createElementNS(bi,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#b(t){return this.#l.style.color=t,ar(getComputedStyle(this.#l).getPropertyValue("color"))}}class b1{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class Rb extends b1{async _fetch(t){const e=await sr(t,"arraybuffer");return new Uint8Array(e)}}class A1{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class Mb extends A1{async _fetch(t){const e=await sr(t,"arraybuffer");return new Uint8Array(e)}}qe&&At("Please use the `legacy` build in Node.js environments.");async function Up(a){const e=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(e)}class ZL extends v1{}class JL extends g1{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class tP extends y1{async _fetch(t){return Up(t)}}class eP extends b1{async _fetch(t){return Up(t)}}class nP extends A1{async _fetch(t){return Up(t)}}const La="__forcedDependency",{floor:Db,ceil:Lb}=Math;function Ec(a,t,e,n,r,o){a[t*4+0]=Math.min(a[t*4+0],e),a[t*4+1]=Math.min(a[t*4+1],n),a[t*4+2]=Math.max(a[t*4+2],r),a[t*4+3]=Math.max(a[t*4+3],o)}const Bf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class iP{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Bf}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const xc=(a,t)=>{if(!a)return;let e=a.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},a.set(t,e)),e};class sP{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[La]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#p;#u;#m;constructor(t,e,n=!1){this.#f=t.width,this.#g=t.height,this.#y(e),n&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const n=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),e&&e.length>0?(this.#u.set(e),this.#u.fill(Bf,e.length)):this.#u.fill(Bf)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[La]:{__proto__:this.#e[La]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const n=this.#n.pop();return n!==void 0&&(xc(this.#m,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(xc(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(xc(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#s.push(it.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#i.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(La,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(La,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,r,o,l){const u=it.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([n,o,r,l],u,d);const f=it.intersect(this.#a,d);return f?(this.#a[0]=f[0],this.#a[1]=f[1],this.#a[2]=f[2],this.#a[3]=f[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,n,r,o,l){const u=this.#a;if(u[0]===1/0)return this;const d=it.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(u[0]===-1/0)return it.axialAlignedBoundingBox([n,o,r,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([n,o,r,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,r=1,o=0,l=0,u){const d=n.bbox;let f,p;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(n),f!==!1&&(p=[0,0,0,0],it.axialAlignedBoundingBox(d,n.fontMatrix,p),(r!==1||o!==0||l!==0)&&it.scaleMinMax([r,0,0,-r,o,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const g=u();return d&&p&&f===void 0&&(f=p[0]<=o-g.actualBoundingBoxLeft&&p[2]>=o+g.actualBoundingBoxRight&&p[1]<=l-g.actualBoundingBoxAscent&&p[3]>=l+g.actualBoundingBoxDescent,this.#h.set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-g.actualBoundingBoxLeft,o+g.actualBoundingBoxRight,l-g.actualBoundingBoxAscent,l+g.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,r=this.#t,o=this.#e;for(const l of e)l in this.#t?n.add(r[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[La]),this.#m){const n=xc(this.#m,t),{dependencies:r}=n;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=Db(this.#o[0]*256/this.#f),r=Db(this.#o[1]*256/this.#g),o=Lb(this.#o[2]*256/this.#f),l=Lb(this.#o[3]*256/this.#g);Ec(this.#p,t,n,r,o,l);for(const u of this.#l)u!==t&&Ec(this.#p,u,n,r,o,l);for(const u of this.#n)u!==t&&Ec(this.#p,u,n,r,o,l);for(const u of this.#r)u!==t&&Ec(this.#p,u,n,r,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new iP(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class $c{#t;#e;#i;#n=0;#r=0;constructor(t,e,n){if(t instanceof $c&&t.#i===!!n)return t;this.#t=t,this.#e=e,this.#i=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,r,o,l){return this.#i||this.#t.recordClipBox(this.#e,e,n,r,o,l),this}recordBBox(t,e,n,r,o,l){return this.#i||this.#t.recordBBox(this.#e,e,n,r,o,l),this}recordCharacterBBox(t,e,n,r,o,l,u){return this.#i||this.#t.recordCharacterBBox(this.#e,e,n,r,o,l,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Rn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Be={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ff(a,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),a.clip(r)}class jp{isModifyingCurrentTransform(){return!1}getPattern(){qt("Abstract method `getPattern` called.")}}class aP extends jp{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,r){let o;if(r===Be.STROKE||r===Be.FILL){const l=e.current.getClippedPathBoundingBox(r,Jt(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=it.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Ff(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);o.setTransform(g)}else Ff(t,this._bbox),o=this._createGradient(t);return o}}function tf(a,t,e,n,r,o,l,u){const d=t.coords,f=t.colors,p=a.data,g=a.width*4;let v;d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=o,o=l,l=v),d[n+1]>d[r+1]&&(v=n,n=r,r=v,v=l,l=u,u=v),d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=o,o=l,l=v);const b=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,A=(d[n]+t.offsetX)*t.scaleX,x=(d[n+1]+t.offsetY)*t.scaleY,E=(d[r]+t.offsetX)*t.scaleX,T=(d[r+1]+t.offsetY)*t.scaleY;if(S>=T)return;const C=f[o],D=f[o+1],R=f[o+2],N=f[l],B=f[l+1],I=f[l+2],q=f[u],K=f[u+1],J=f[u+2],ot=Math.round(S),dt=Math.round(T);let at,ct,k,z,Q,lt,L,Y;for(let tt=ot;tt<=dt;tt++){if(tt<x){const Et=tt<S?0:(S-tt)/(S-x);at=b-(b-A)*Et,ct=C-(C-N)*Et,k=D-(D-B)*Et,z=R-(R-I)*Et}else{let Et;tt>T?Et=1:x===T?Et=0:Et=(x-tt)/(x-T),at=A-(A-E)*Et,ct=N-(N-q)*Et,k=B-(B-K)*Et,z=I-(I-J)*Et}let Z;tt<S?Z=0:tt>T?Z=1:Z=(S-tt)/(S-T),Q=b-(b-E)*Z,lt=C-(C-q)*Z,L=D-(D-K)*Z,Y=R-(R-J)*Z;const et=Math.round(Math.min(at,Q)),vt=Math.round(Math.max(at,Q));let rt=g*tt+et*4;for(let Et=et;Et<=vt;Et++)Z=(at-Et)/(at-Q),Z<0?Z=0:Z>1&&(Z=1),p[rt++]=ct-(ct-lt)*Z|0,p[rt++]=k-(k-L)*Z|0,p[rt++]=z-(z-Y)*Z|0,p[rt++]=255}}function rP(a,t,e){const n=t.coords,r=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<d;o++){let p=o*u;for(let g=0;g<f;g++,p++)tf(a,e,n[p],n[p+1],n[p+u],r[p],r[p+1],r[p+u]),tf(a,e,n[p+u+1],n[p+1],n[p+u],r[p+u+1],r[p+1],r[p+u])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)tf(a,e,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class oP extends jp{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),b=f/g,S=p/v,A={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/b,scaleY:1/S},x=g+4,E=v+4,T=n.getCanvas("mesh",x,E),C=T.context,D=C.createImageData(g,v);if(e){const N=D.data;for(let B=0,I=N.length;B<I;B+=4)N[B]=e[0],N[B+1]=e[1],N[B+2]=e[2],N[B+3]=255}for(const N of this._figures)rP(D,N,A);return C.putImageData(D,2,2),{canvas:T.canvas,offsetX:u-2*b,offsetY:d-2*S,scaleX:b,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){Ff(t,this._bbox);const o=new Float32Array(2);if(r===Be.SHADING)it.singularValueDecompose2dScale(Jt(t),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;it.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=d}else it.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,r===Be.SHADING?null:this._background,e.cachedCanvases);return r!==Be.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class lP extends jp{getPattern(){return"hotpink"}}function cP(a){switch(a[0]){case"RadialAxial":return new aP(a);case"Mesh":return new oP(a);case"Dummy":return new lP}throw new Error(`Unknown IR type: ${a[0]}`)}const Pb={COLORED:1,UNCOLORED:2};class Vp{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t,e){const{bbox:n,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),nu("TilingType: "+l);const g=n[0],v=n[1],b=n[2],S=n[3],A=b-g,x=S-v,E=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,E);const[T,C]=E;it.singularValueDecompose2dScale(this.baseTransform,E);const D=T*E[0],R=C*E[1];let N=A,B=x,I=!1,q=!1;const K=Math.ceil(f*D),J=Math.ceil(p*R),ot=Math.ceil(A*D),dt=Math.ceil(x*R);K>=ot?N=f:I=!0,J>=dt?B=p:q=!0;const at=this.getSizeAndScale(N,this.ctx.canvas.width,D),ct=this.getSizeAndScale(B,this.ctx.canvas.height,R),k=t.cachedCanvases.getCanvas("pattern",at.size,ct.size),z=k.context,Q=d.createCanvasGraphics(z,e);if(Q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Q,o,u),z.translate(-at.scale*g,-ct.scale*v),Q.transform(0,at.scale,0,0,ct.scale,0,0),z.save(),Q.dependencyTracker?.save(),this.clipBbox(Q,g,v,b,S),Q.baseTransform=Jt(Q.ctx),Q.executeOperatorList(r),Q.endDrawing(),Q.dependencyTracker?.restore(),z.restore(),I||q){const lt=k.canvas;I&&(N=f),q&&(B=p);const L=this.getSizeAndScale(N,this.ctx.canvas.width,D),Y=this.getSizeAndScale(B,this.ctx.canvas.height,R),tt=L.size,Z=Y.size,et=t.cachedCanvases.getCanvas("pattern-workaround",tt,Z),vt=et.context,rt=I?Math.floor(A/f):0,Et=q?Math.floor(x/p):0;for(let Mt=0;Mt<=rt;Mt++)for(let Yt=0;Yt<=Et;Yt++)vt.drawImage(lt,tt*Mt,Z*Yt,tt,Z,0,0,tt,Z);return{canvas:et.canvas,scaleX:L.scale,scaleY:Y.scale,offsetX:g,offsetY:v}}return{canvas:k.canvas,scaleX:at.scale,scaleY:ct.scale,offsetX:g,offsetY:v}}getSizeAndScale(t,e,n){const r=Math.max(Vp.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,r,o){const l=r-e,u=o-n;t.ctx.rect(e,n,l,u),it.axialAlignedBoundingBox([e,n,r,o],Jt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,o=t.current;switch(e){case Pb.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case Pb.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new DL(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r,o){let l=n;r!==Be.SHADING&&(l=it.transform(l,e.baseTransform),this.matrix&&(l=it.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function uP({src:a,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Me.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],p=n>>3,g=n&7,v=a.length;e=new Uint32Array(e.buffer);let b=0;for(let S=0;S<r;S++){for(const x=t+p;t<x;t++){const E=t<v?a[t]:255;e[b++]=E&128?f:d,e[b++]=E&64?f:d,e[b++]=E&32?f:d,e[b++]=E&16?f:d,e[b++]=E&8?f:d,e[b++]=E&4?f:d,e[b++]=E&2?f:d,e[b++]=E&1?f:d}if(g===0)continue;const A=t<v?a[t++]:255;for(let x=0;x<g;x++)e[b++]=A&1<<7-x?f:d}return{srcPos:t,destPos:b}}const Ob=16,Nb=100,hP=15,kb=10,nn=16,ef=new DOMMatrix,mn=new Float32Array(2),Ua=new Float32Array([1/0,1/0,-1/0,-1/0]);function dP(a,t){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){t.save(),this.__originalSave()},a.restore=function(){t.restore(),this.__originalRestore()},a.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},a.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},a.transform=function(e,n,r,o,l,u){t.transform(e,n,r,o,l,u),this.__originalTransform(e,n,r,o,l,u)},a.setTransform=function(e,n,r,o,l,u){t.setTransform(e,n,r,o,l,u),this.__originalSetTransform(e,n,r,o,l,u)},a.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},a.rotate=function(e){t.rotate(e),this.__originalRotate(e)},a.clip=function(e){t.clip(e),this.__originalClip(e)},a.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},a.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},a.bezierCurveTo=function(e,n,r,o,l,u){t.bezierCurveTo(e,n,r,o,l,u),this.__originalBezierCurveTo(e,n,r,o,l,u)},a.rect=function(e,n,r,o){t.rect(e,n,r,o),this.__originalRect(e,n,r,o)},a.closePath=function(){t.closePath(),this.__originalClosePath()},a.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class fP{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Tc(a,t,e,n,r,o,l,u,d,f){const[p,g,v,b,S,A]=Jt(a);if(g===0&&v===0){const T=l*p+S,C=Math.round(T),D=u*b+A,R=Math.round(D),N=(l+d)*p+S,B=Math.abs(Math.round(N)-C)||1,I=(u+f)*b+A,q=Math.abs(Math.round(I)-R)||1;return a.setTransform(Math.sign(p),0,0,Math.sign(b),C,R),a.drawImage(t,e,n,r,o,0,0,B,q),a.setTransform(p,g,v,b,S,A),[B,q]}if(p===0&&b===0){const T=u*v+S,C=Math.round(T),D=l*g+A,R=Math.round(D),N=(u+f)*v+S,B=Math.abs(Math.round(N)-C)||1,I=(l+d)*g+A,q=Math.abs(Math.round(I)-R)||1;return a.setTransform(0,Math.sign(g),Math.sign(v),0,C,R),a.drawImage(t,e,n,r,o,0,0,q,B),a.setTransform(p,g,v,b,S,A),[q,B]}a.drawImage(t,e,n,r,o,l,u,d,f);const x=Math.hypot(p,g),E=Math.hypot(v,b);return[x*d,E*f]}class Bb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Pf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ne.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ua.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Be.FILL,e=null){const n=this.minMax.slice();if(t===Be.STROKE){e||qt("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(e,mn);const r=mn[0]*this.lineWidth/2,o=mn[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ua,0)}getClippedPathBoundingBox(t=Be.FILL,e=null){return it.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Fb(a,t){if(t instanceof ImageData){a.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%nn,o=(e-r)/nn,l=r===0?o:o+1,u=a.createImageData(n,nn);let d=0,f;const p=t.data,g=u.data;let v,b,S,A;if(t.kind===So.GRAYSCALE_1BPP){const x=p.byteLength,E=new Uint32Array(g.buffer,0,g.byteLength>>2),T=E.length,C=n+7>>3,D=4294967295,R=Me.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(S=v<o?nn:r,f=0,b=0;b<S;b++){const N=x-d;let B=0;const I=N>C?n:N*8-7,q=I&-8;let K=0,J=0;for(;B<q;B+=8)J=p[d++],E[f++]=J&128?D:R,E[f++]=J&64?D:R,E[f++]=J&32?D:R,E[f++]=J&16?D:R,E[f++]=J&8?D:R,E[f++]=J&4?D:R,E[f++]=J&2?D:R,E[f++]=J&1?D:R;for(;B<I;B++)K===0&&(J=p[d++],K=128),E[f++]=J&K?D:R,K>>=1}for(;f<T;)E[f++]=0;a.putImageData(u,0,v*nn)}}else if(t.kind===So.RGBA_32BPP){for(b=0,A=n*nn*4,v=0;v<o;v++)g.set(p.subarray(d,d+A)),d+=A,a.putImageData(u,0,b),b+=nn;v<l&&(A=n*r*4,g.set(p.subarray(d,d+A)),a.putImageData(u,0,b))}else if(t.kind===So.RGB_24BPP)for(S=nn,A=n*S,v=0;v<l;v++){for(v>=o&&(S=r,A=n*S),f=0,b=A;b--;)g[f++]=p[d++],g[f++]=p[d++],g[f++]=p[d++],g[f++]=255;a.putImageData(u,0,v*nn)}else throw new Error(`bad image kind: ${t.kind}`)}function Ib(a,t){if(t.bitmap){a.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%nn,o=(e-r)/nn,l=r===0?o:o+1,u=a.createImageData(n,nn);let d=0;const f=t.data,p=u.data;for(let g=0;g<l;g++){const v=g<o?nn:r;({srcPos:d}=uP({src:f,srcPos:d,dest:p,width:n,height:v,nonBlackColor:0})),a.putImageData(u,0,g*nn)}}function oo(a,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)a[n]!==void 0&&(t[n]=a[n]);a.setLineDash!==void 0&&(t.setLineDash(a.getLineDash()),t.lineDashOffset=a.lineDashOffset)}function _c(a){a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0);const{filter:t}=a;t!=="none"&&t!==""&&(a.filter="none")}function Ub(a,t){if(t)return!0;it.singularValueDecompose2dScale(a,mn);const e=Math.fround(In.pixelRatio*Us.PDF_TO_CSS_UNITS);return mn[0]<=e&&mn[1]<=e}const pP=["butt","round","square"],mP=["miter","round","bevel"],gP={},jb={};class za{constructor(t,e,n,r,o,{optionalContentConfig:l,markedContentStack:u=null},d,f,p){this.ctx=t,this.current=new Bb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new fP(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Jt(this.compositeCtx))}this.ctx.save(),_c(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Jt(this.ctx)}executeOperatorList(t,e,n,r,o){const l=t.argsArray,u=t.fnArray;let d=e||0;const f=l.length;if(f===d)return d;const p=f-d>kb&&typeof n=="function",g=p?Date.now()+hP:0;let v=0;const b=this.commonObjs,S=this.objs;let A,x;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,n),d;if(!o||o(d))if(A=u[d],x=l[d]??null,A!==Wa.dependency)x===null?this[A](d):this[A](d,...x);else for(const E of x){this.dependencyTracker?.recordNamedData(E,d);const T=E.startsWith("g_")?b:S;if(!T.has(E))return T.get(E,n),d}if(d++,d===f)return d;if(p&&++v>kb){if(Date.now()>g)return n(),d;v=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=r,f="prescale1",p,g;for(;o>2&&u>1||l>2&&d>1;){let v=u,b=d;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),l>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/b),p=this.cachedCanvases.getCanvas(f,v,b),g=p.context,g.clearRect(0,0,v,b),g.drawImage(t,0,0,u,d,0,0,v,b),t=p.canvas,u=v,d=b,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){const n=this.ctx,{width:r,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,d=Jt(n);let f,p,g,v;if((e.bitmap||e.data)&&e.count>1){const K=e.bitmap||e.data.buffer;p=JSON.stringify(u?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(K),f||(f=new Map,this._cachedBitmapsMap.set(K,f));const J=f.get(p);if(J&&!u){const ot=Math.round(Math.min(d[0],d[2])+d[4]),dt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Rn.transformAndFill),{canvas:J,offsetX:ot,offsetY:dt}}g=J}g||(v=this.cachedCanvases.getCanvas("maskCanvas",r,o),Ib(v.context,e));let b=it.transform(d,[1/r,0,0,-1/o,0,0]);b=it.transform(b,[1,0,0,1,0,-o]);const S=Ua.slice();it.axialAlignedBoundingBox([0,0,r,o],b,S);const[A,x,E,T]=S,C=Math.round(E-A)||1,D=Math.round(T-x)||1,R=this.cachedCanvases.getCanvas("fillCanvas",C,D),N=R.context,B=A,I=x;N.translate(-B,-I),N.transform(...b),g||(g=this._scaleImage(v.canvas,Xn(N)),g=g.img,f&&u&&f.set(p,g)),N.imageSmoothingEnabled=Ub(Jt(N),e.interpolate),Tc(N,g,0,0,g.width,g.height,0,0,r,o),N.globalCompositeOperation="source-in";const q=it.transform(Xn(N),[1,0,0,1,-B,-I]);return N.fillStyle=u?l.getPattern(n,this,q,Be.FILL,t):l,N.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,R.canvas)),this.dependencyTracker?.recordDependencies(t,Rn.transformAndFill),{canvas:R.canvas,offsetX:Math.round(B),offsetY:Math.round(I)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=pP[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=mP[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,r]of e)switch(n){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),oo(this.suspendedCtx,l),dP(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),oo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const o=r[0],l=r[1],u=r[2]-o,d=r[3]-l;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,o,l,u,d,f,p,g){let v=t.canvas,b=d-p,S=f-g;if(l)if(b<0||S<0||b+n>v.width||S+r>v.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,r),E=x.context;E.drawImage(v,-b,-S),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,n,r),E.globalCompositeOperation="source-over",v=x.canvas,b=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(b,S,n,r),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(b,S,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const A=new Path2D;A.rect(d,f,n,r),e.clip(A),e.globalCompositeOperation="destination-in",e.drawImage(v,b,S,n,r,d,f,n,r),e.restore()}save(t){this.inSMaskMode&&oo(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&oo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,r){let[o]=n;if(!r){o||=n[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Wa.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=n[0]=new Path2D;for(let u=0,d=o.length;u<d;)switch(o[u++]){case bc.moveTo:l.moveTo(o[u++],o[u++]);break;case bc.lineTo:l.lineTo(o[u++],o[u++]);break;case bc.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case bc.closePath:l.closePath();break;default:At(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}it.axialAlignedBoundingBox(r,Jt(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,Xn(r),Be.STROKE,t),l){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Rn.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Be.STROKE,Jt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,Xn(r),Be.FILL,t),f){const p=new Path2D;p.addPath(e,r.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,Rn.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Rn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=gP}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=jb}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:f,path:p}of e)p&&r.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(f,-f));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||Pf,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&At("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${l}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const f=r.italic?"italic":"normal";let p=n;n<Ob?p=Ob:n>Nb&&(p=Nb),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${d} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r}paintChar(t,e,n,r,o,l){const u=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,v=p&Ne.FILL_STROKE_MASK,b=!!(p&Ne.ADD_TO_PATH_FLAG),S=d.patternFill&&!f.missingFile,A=d.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||b||S||A)&&!f.missingFile&&(x=f.getPathGenerator(this.commonObjs,e)),x&&(f.disableFontFace||S||A)){u.save(),u.translate(n,r),u.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(t,u,f);let E;if(v===Ne.FILL||v===Ne.FILL_STROKE)if(o){E=u.getTransform(),u.setTransform(...o);const T=this.#i(x,E,o);u.fill(T)}else u.fill(x);if(v===Ne.STROKE||v===Ne.FILL_STROKE)if(l){E||=u.getTransform(),u.setTransform(...l);const{a:T,b:C,c:D,d:R}=E,N=it.inverseTransform(l),B=it.transform([T,C,D,R,0,0],N);it.singularValueDecompose2dScale(B,mn),u.lineWidth*=Math.max(mn[0],mn[1])/g,u.stroke(this.#i(x,E,l))}else u.lineWidth/=g,u.stroke(x);u.restore()}else(v===Ne.FILL||v===Ne.FILL_STROKE)&&(u.fillText(e,n,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,g,n,r,()=>u.measureText(e))),(v===Ne.STROKE||v===Ne.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,g,n,r,()=>u.measureText(e)).recordDependencies(t,Rn.stroke),u.strokeText(e,n,r));b&&((this.pendingTextPaths||=[]).push({transform:Jt(u),x:n,y:r,fontSize:g,path:x}),this.dependencyTracker?.recordCharacterBBox(t,u,f,g,n,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return wt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Rn.showText).resetBBox(t),this.current.textRenderingMode&Ne.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=n.fontSizeScale,d=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,g=n.textHScale*p,v=e.length,b=r.vertical,S=b?1:-1,A=r.defaultVMetrics,x=o*n.fontMatrix[0],E=n.textRenderingMode===Ne.FILL&&!r.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(g,-1):l.scale(g,1);let T,C;if(n.patternFill){l.save();const I=n.fillColor.getPattern(l,this,Xn(l),Be.FILL,t);T=Jt(l),l.restore(),l.fillStyle=I}if(n.patternStroke){l.save();const I=n.strokeColor.getPattern(l,this,Xn(l),Be.STROKE,t);C=Jt(l),l.restore(),l.strokeStyle=I}let D=n.lineWidth;const R=n.textMatrixScale;if(R===0||D===0){const I=n.textRenderingMode&Ne.FILL_STROKE_MASK;(I===Ne.STROKE||I===Ne.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=R;if(u!==1&&(l.scale(u,u),D/=u),l.lineWidth=D,r.isInvalidPDFjsFont){const I=[];let q=0;for(const J of e)I.push(J.unicode),q+=J.width;const K=I.join("");if(l.fillText(K,0,0),this.dependencyTracker!==null){const J=l.measureText(K);this.dependencyTracker.recordBBox(t,this.ctx,-J.actualBoundingBoxLeft,J.actualBoundingBoxRight,-J.actualBoundingBoxAscent,J.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=q*x*g,l.restore(),this.compose();return}let N=0,B;for(B=0;B<v;++B){const I=e[B];if(typeof I=="number"){N+=S*I*o/1e3;continue}let q=!1;const K=(I.isSpace?f:0)+d,J=I.fontChar,ot=I.accent;let dt,at,ct=I.width;if(b){const Q=I.vmetric||A,lt=-(I.vmetric?Q[1]:ct*.5)*x,L=Q[2]*x;ct=Q?-Q[0]:ct,dt=lt/u,at=(N+L)/u}else dt=N/u,at=0;let k;if(r.remeasure&&ct>0){k=l.measureText(J);const Q=k.width*1e3/o*u;if(ct<Q&&this.isFontSubpixelAAEnabled){const lt=ct/Q;q=!0,l.save(),l.scale(lt,1),dt/=lt}else ct!==Q&&(dt+=(ct-Q)/2e3*o/u)}if(this.contentVisible&&(I.isInFont||r.missingFile)){if(E&&!ot)l.fillText(J,dt,at),this.dependencyTracker?.recordCharacterBBox(t,l,k?{bbox:null}:r,o/u,dt,at,()=>k??l.measureText(J));else if(this.paintChar(t,J,dt,at,T,C),ot){const Q=dt+o*ot.offset.x/u,lt=at-o*ot.offset.y/u;this.paintChar(t,ot.fontChar,Q,lt,T,C)}}const z=b?ct*x-K*p:ct*x+K*p;N+=z,q&&l.restore()}b?n.y-=N:n.x+=N*g,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,d=o.vertical?1:-1,f=r.charSpacing,p=r.wordSpacing,g=r.textHScale*u,v=r.fontMatrix||Pf,b=e.length,S=r.textRenderingMode===Ne.INVISIBLE;let A,x,E,T;if(S||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(g,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new $c(C,t):null,A=0;A<b;++A){if(x=e[A],typeof x=="number"){T=d*x*l/1e3,this.ctx.translate(T,0),r.x+=T*g;continue}const D=(x.isSpace?p:0)+f,R=o.charProcOperatorList[x.operatorListId];R?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...v),this.executeOperatorList(R),this.restore()):At(`Type3 character "${x.operatorListId}" is not available.`);const N=[x.width,0];it.applyTransform(N,v),E=N[0]*l+D,n.translate(E,0),r.x+=E*g}n.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,r,o,l,u){const d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,r,l,o,u).recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||Jt(this.ctx),o={createCanvasGraphics:(l,u)=>new za(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new $c(this.dependencyTracker,u,!0):null)};n=new Vp(e,this.ctx,o,r)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=cP(this.getObject(t,e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const r=this._getPattern(t,e);n.fillStyle=r.getPattern(n,this,Xn(n),Be.SHADING,t);const o=Xn(n);if(o){const{width:l,height:u}=n.canvas,d=Ua.slice();it.axialAlignedBoundingBox([0,0,l,u],o,d);const[f,p,g,v]=d;this.ctx.fillRect(f,p,g-f,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Rn.transform).recordDependencies(t,Rn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){qt("Should not call beginInlineImage")}beginImageData(){qt("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Jt(this.ctx),n)){it.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,o,l,u]=n,d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||nu("TODO: Support non-isolated groups."),e.knockout&&At("Knockout groups not supported.");const r=Jt(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Ua.slice();it.axialAlignedBoundingBox(e.bbox,Jt(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=it.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,f,p),b=v.context;b.translate(-u,-d),b.transform(...r);let S=new Path2D;const[A,x,E,T]=e.bbox;if(S.rect(A,x,E-A,T-x),e.matrix){const C=new Path2D;C.addPath(S,new DOMMatrix(e.matrix)),S=C}b.clip(S),e.smask&&this.smaskStack.push({canvas:v.canvas,context:b,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,d),n.save()),oo(n,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Jt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Ua.slice();it.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,r,o,l){if(this.#t(),_c(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],d=n[3]-n[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=d,it.singularValueDecompose2dScale(Jt(this.ctx),mn);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),g=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:v,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(mn[0],0,0,-mn[1],0,d*mn[1]),_c(this.ctx)}else{_c(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,d),this.ctx.clip(f)}}this.current=new Bb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const r=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,r=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=Jt(d);d.transform(n,r,o,l,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let g=0,v=u.length;g<v;g+=2){const b=it.transform(f,[n,r,o,l,u[g],u[g+1]]);d.drawImage(p.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(t,this.ctx,b[4],b[4]+p.canvas.width,b[5],b[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Rn.transformAndFill);for(const l of e){const{data:u,width:d,height:f,transform:p}=l,g=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=g.context;v.save();const b=this.getObject(t,u,l);Ib(v,b),v.globalCompositeOperation="source-in",v.fillStyle=o?r.getPattern(v,this,Xn(n),Be.FILL,t):r,v.fillRect(0,0,d,f),v.restore(),n.save(),n.transform(...p),n.scale(1,-1),Tc(n,g.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,d,0,f),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){At("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,r,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){At("Dependent image isn't ready yet");return}const u=l.width,d=l.height,f=[];for(let p=0,g=o.length;p<g;p+=2)f.push({transform:[n,0,0,r,o[p],o[p+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,r=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,r).context;Fb(p,e),u=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(u,Xn(o));o.imageSmoothingEnabled=Ub(Jt(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,n,-r,0).recordDependencies(t,Rn.imageXObject).recordOperation(t),Tc(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,n,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;Fb(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of n)r.save(),r.transform(...l.transform),r.scale(1,-1),Tc(r,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Rn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===jb?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Jt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:o}=this.ctx.getTransform();let l,u;if(n===0&&r===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const p=d*t;l=u=p<1?1/p:1}else if(t===0)l=1/d,u=1/f;else{const p=d*t,g=f*t;l=p<1?1/p:1,u=g<1?1/g:1}}else{const d=Math.abs(e*o-n*r),f=Math.hypot(e,n),p=Math.hypot(r,o);if(t===0)l=p/d,u=f/d;else{const g=t*d;l=p>g?p/g:1,u=f>g?f/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(r||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,l),ef.a=1/o,ef.d=1/l;const d=new Path2D;if(d.addPath(t,ef),u.length>0){const f=Math.max(o,l);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=r||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const a in Wa)za.prototype[a]!==void 0&&(za.prototype[Wa[a]]=za.prototype[a]);class Ha{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let r=0;for(const f of Ha.strings){const p=e.encode(t[f]);n[f]=p,r+=4+p.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of Ha.strings){const p=n[f],g=p.length;u.setUint32(d,g),l.set(p,d+4),d+=4+g}return Lt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Lt(t<Ha.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Ga{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let r=0;for(const v of Ga.strings){const b=e.encode(t[v]);n[v]=b,r+=4+b.length}r+=4;let o,l,u=1+r;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let g=0;p.setUint8(g++,t.guessFallback?1:0),p.setUint32(g,0),g+=4,r=0;for(const v of Ga.strings){const b=n[v],S=b.length;r+=4+S,p.setUint32(g,S),f.set(b,g+4),g+=4+S}return p.setUint32(g-r-4,r),t.style&&(p.setUint32(g,o.length),f.set(o,g+4),g+=4+o.length,p.setUint32(g,l.length),f.set(l,g+4),g+=4+l.length),Lt(g<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(g)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Lt(t<Ga.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const r=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,r));return{style:n,weight:o}}}class Vt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:e}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),e&&Object.assign(this,e)}#c(t){Lt(t<Vt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,r=this.#o.getUint8(e)>>n&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Lt(t<Vt.numbers.length,"Invalid number index"),this.#o.getFloat64(Vt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Vt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<4;r++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=Vt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<6;r++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=Vt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<3;r++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#d(t){Lt(t<Vt.strings.length,"Invalid string index");let e=Vt.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),r=new Uint8Array(n);return r.set(new Uint8Array(this.#s,e+4,n)),this.#a.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Vt.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=Vt.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Vt.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#s,t+4,r)),new Ha(o.buffer)}get systemFontInfo(){let t=Vt.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(this.#s,t+4,n)),new Ga(r.buffer)}static write(t){const e=t.systemFontInfo?Ga.write(t.systemFontInfo):null,n=t.cssFontInfo?Ha.write(t.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const A of Vt.strings)o[A]=r.encode(t[A]),l+=4+o[A].length;const u=Vt.#r+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let g=0;const v=Vt.bools.length;let b=0,S=0;for(let A=0;A<v;A++){const x=t[Vt.bools[A]];b|=(x===void 0?0:x?2:1)<<S,S+=2,(S===8||A===v-1)&&(p.setUint8(g++,b),b=0,S=0)}Lt(g===Vt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const A of Vt.numbers)p.setFloat64(g,t[A]),g+=8;if(Lt(g===Vt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(g++,4);for(const A of t.bbox)p.setInt16(g,A,!0),g+=2}else p.setUint8(g++,0),g+=8;if(Lt(g===Vt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(g++,6);for(const A of t.fontMatrix)p.setFloat64(g,A,!0),g+=8}else p.setUint8(g++,0),g+=48;if(Lt(g===Vt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(g++,1);for(const A of t.defaultVMetrics)p.setInt16(g,A,!0),g+=2}else p.setUint8(g++,0),g+=6;Lt(g===Vt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(Vt.#r,0),g+=4;for(const A of Vt.strings){const x=o[A],E=x.length;p.setUint32(g,E),f.set(x,g+4),g+=4+E}if(p.setUint32(Vt.#r,g-Vt.#r-4),!e)p.setUint32(g,0),g+=4;else{const A=e.byteLength;p.setUint32(g,A),Lt(g+4+A<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),g+4),g+=4+A}if(!n)p.setUint32(g,0),g+=4;else{const A=n.byteLength;p.setUint32(g,A),Lt(g+4+A<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),g+4),g+=4+A}return t.data===void 0?(p.setUint32(g,0),g+=4):(p.setUint32(g,t.data.length),f.set(t.data,g+4),g+=4+t.data.length),Lt(g<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(g)}}class Ji{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class yP{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Oa=Symbol("INTERNAL");class vP{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:n,usage:r,rbGroups:o}){this.#t=!!(t&fn.DISPLAY),this.#e=!!(t&fn.PRINT),this.name=e,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Oa&&qt("Internal method `_setVisible` called."),this.#i=n,this.#n=e}}class bP{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=fn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new vP(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Oa,!1);for(const n of t.on)this.#e.get(n)._setVisible(Oa,!0);for(const n of t.off)this.#e.get(n)._setVisible(Oa,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const o=t[r];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return At(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return nu("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(At(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return At(`Unknown optional content policy ${t.policy}.`),!0}return At(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const r=this.#e.get(t);if(!r){At(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Oa,!1,!0);r._setVisible(Oa,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=this.#e.get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new f1;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class AP{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Lt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});Lt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new SP(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new wP(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class SP{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=su(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class wP{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function EP(a){let t=!0,e=n("filename\\*","i").exec(a);if(e){e=e[1];let p=u(e);return p=unescape(p),p=d(p),p=f(p),o(p)}if(e=l(a),e){const p=f(e);return o(p)}if(e=n("filename","i").exec(a),e){e=e[1];let p=u(e);return p=f(p),o(p)}function n(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(p,{fatal:!0}),b=qo(g);g=v.decode(b),t=!1}catch{}}return g}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function l(p){const g=[];let v;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(p))!==null;){let[,A,x,E]=v;if(A=parseInt(A,10),A in g){if(A===0)break;continue}g[A]=[x,E]}const S=[];for(let A=0;A<g.length&&A in g;++A){let[x,E]=g[A];E=u(E),x&&(E=unescape(E),A===0&&(E=d(E))),S.push(E)}return S.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let v=0;v<g.length;++v){const b=g[v].indexOf('"');b!==-1&&(g[v]=g[v].slice(0,b),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function d(p){const g=p.indexOf("'");if(g===-1)return p;const v=p.slice(0,g),S=p.slice(g+1).replace(/^[^']*'/,"");return r(v,S)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,b,S){if(b==="q"||b==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,x){return String.fromCharCode(parseInt(x,16))}),r(v,S);try{S=atob(S)}catch{}return r(v,S)})}return""}function S1(a,t){const e=new Headers;if(!a||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function au(a){return URL.parse(a)?.origin??null}function w1({responseHeaders:a,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||n||!t||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function E1(a){const t=a.get("Content-Disposition");if(t){let e=EP(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(su(e))return e}return null}function Wo(a,t){return new Po(`Unexpected server response (${a}) while retrieving PDF "${t}".`,a,a===404||a===0&&t.startsWith("file:"))}function x1(a){return a===200||a===206}function T1(a,t,e){return{method:"GET",headers:a,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function _1(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(At(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class xP{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=S1(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new TP(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new _P(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class TP{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),r=e.url;fetch(r,T1(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=au(o.url),!x1(o.status))throw Wo(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:d}=w1({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=E1(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ti("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:_1(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class _P{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const l=r.url;fetch(l,T1(o,this._withCredentials,this._abortController)).then(u=>{const d=au(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!x1(u.status))throw Wo(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:_1(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const nf=200,sf=206;function CP(a){const t=a.response;return typeof t!="string"?t:qo(t).buffer}class RP{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=S1(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=sf):r.expectedStatus=nf,e.responseType="arraybuffer",Lt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const o=r.status||nf;if(!(o===nf&&n.expectedStatus===sf)&&o!==n.expectedStatus){n.onError(r.status);return}const u=CP(r);if(o===sf){const d=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(At('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class MP{constructor(t){this._source=t,this._manager=new RP(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new DP(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new LP(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class DP{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=au(e.responseURL);const n=e.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=w1({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=E1(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Wo(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class LP{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=au(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Wo(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const PP=/^[a-z][a-z0-9\-+.]+:/i;function OP(a){if(PP.test(a))return new URL(a);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(a))}class NP{constructor(t){this.source=t,this.url=OP(t.url),Lt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new kP(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new BP(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class kP{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Wo(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ti("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BP{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const lo=Symbol("INITIAL_DATA");class C1{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:lo}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const n=this.#t[t];if(!n||n.data===lo)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==lo}delete(t){const e=this.#t[t];return!e||e.data===lo?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==lo&&(yield[t,e])}}}const FP=1e5,Vb=30;let No=class Mn{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#T=new WeakMap;static#E=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=n.scale*In.pixelRatio,this.#d=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=n.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=r,this.#a=o,Mn.#M(),ns(e,n),this.#t.promise.finally(()=>{Mn.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Me.platform;return wt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),Mn.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*In.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,ns(this.#l,{rotation:r})),n!==this.#h){e?.(),this.#h=n;const o={div:null,properties:null,ctx:Mn.#D(this.#r)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#x(o)}}cancel(){const t=new Ti("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(t){if(this.#i)return;this.#s.ctx??=Mn.#D(this.#r);const e=this.#u,n=this.#g;for(const r of t){if(e.length>FP){At("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(r.str),this.#w(r)}}#w(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=it.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=Mn.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),f=d*Mn.#F(u,l,this.#r);let p,g;o===0?(p=r[4],g=r[5]-f):(p=r[4]+f*Math.sin(o),g=r[5]-f*Math.cos(o));const v="calc(var(--total-scale-factor) *",b=e.style;this.#e===this.#l?(b.left=`${(100*p/this.#o).toFixed(2)}%`,b.top=`${(100*g/this.#a).toFixed(2)}%`):(b.left=`${v}${p.toFixed(2)}px)`,b.top=`${v}${g.toFixed(2)}px)`),b.fontSize=`${v}${(Mn.#E*d).toFixed(2)}px)`,b.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);A!==x&&Math.max(A,x)/Math.min(A,x)>1.5&&(S=!0)}if(S&&(n.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,n),this.#s.div=e,this.#s.properties=n,this.#x(this.#s),n.hasText&&this.#e.append(e),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#e.append(A)}}#x(t){const{div:e,properties:n,ctx:r}=t,{style:o}=e;let l="";if(Mn.#E>1&&(l=`scale(${1/Mn.#E})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:f}=n;Mn.#R(r,f*this.#h,u);const{width:p}=r.measureText(e.textContent);p>0&&(l=`scaleX(${d*this.#h/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#A.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#D(t=null){let e=this.#v.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#T.set(e,{size:0,family:""})}return e}static#R(t,e,n){const r=this.#T.get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)}static#M(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#F(t,e,n){const r=this.#b.get(t);if(r)return r;const o=this.#D(n);o.canvas.width=o.canvas.height=Vb,this.#R(o,Vb,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(Me.platform.isFirefox&&At("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#b.set(t,f),f}};const IP=100;function zp(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const t=new Hp,{docId:e}=t,n=a.url?XL(a.url):null,r=a.data?YL(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,u=a.password??null,d=a.range instanceof Gp?a.range:null,f=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:2**16;let p=a.worker instanceof Qa?a.worker:null;const g=a.verbosity,v=typeof a.docBaseUrl=="string"&&!Yo(a.docBaseUrl)?a.docBaseUrl:null,b=Sc(a.cMapUrl),S=a.cMapPacked!==!1,A=a.CMapReaderFactory||(qe?tP:Cb),x=Sc(a.iccUrl),E=Sc(a.standardFontDataUrl),T=a.StandardFontDataFactory||(qe?eP:Rb),C=Sc(a.wasmUrl),D=a.WasmFactory||(qe?nP:Mb),R=a.stopAtErrors!==!0,N=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,B=a.isEvalSupported!==!1,I=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!qe,q=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!qe&&(Me.platform.isFirefox||!globalThis.chrome),K=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,J=typeof a.disableFontFace=="boolean"?a.disableFontFace:qe,ot=a.fontExtraProperties===!0,dt=a.enableXfa===!0,at=a.ownerDocument||globalThis.document,ct=a.disableRange===!0,k=a.disableStream===!0,z=a.disableAutoFetch===!0,Q=a.pdfBug===!0,lt=a.CanvasFactory||(qe?JL:WL),L=a.FilterFactory||(qe?ZL:QL),Y=a.enableHWA===!0,tt=a.useWasm!==!1,Z=d?d.length:a.length??NaN,et=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!qe&&!J,vt=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:!!(A===Cb&&T===Rb&&D===Mb&&b&&E&&C&&fo(b,document.baseURI)&&fo(E,document.baseURI)&&fo(C,document.baseURI)),rt=null;CL(g);const Et={canvasFactory:new lt({ownerDocument:at,enableHWA:Y}),filterFactory:new L({docId:e,ownerDocument:at}),cMapReaderFactory:vt?null:new A({baseUrl:b,isCompressed:S}),standardFontDataFactory:vt?null:new T({baseUrl:E}),wasmFactory:vt?null:new D({baseUrl:C})};p||(p=Qa.create({verbosity:g,port:Ji.workerPort}),t._worker=p);const Mt={docId:e,apiVersion:"5.4.296",data:r,password:u,disableAutoFetch:z,rangeChunkSize:f,length:Z,docBaseUrl:v,enableXfa:dt,evaluatorOptions:{maxImageSize:N,disableFontFace:J,ignoreErrors:R,isEvalSupported:B,isOffscreenCanvasSupported:I,isImageDecoderSupported:q,canvasMaxAreaInBytes:K,fontExtraProperties:ot,useSystemFonts:et,useWasm:tt,useWorkerFetch:vt,cMapUrl:b,iccUrl:x,standardFontDataUrl:E,wasmUrl:C}},Yt={ownerDocument:at,pdfBug:Q,styleElement:rt,loadingParams:{disableAutoFetch:z,enableXfa:dt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const zt=p.messageHandler.sendWithPromise("GetDocRequest",Mt,r?[r.buffer]:null);let $e;if(d)$e=new AP(d,{disableRange:ct,disableStream:k});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const an=fo(n)?xP:qe?NP:MP;$e=new an({url:n,length:Z,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:ct,disableStream:k})}return zt.then(an=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Dt=new po(e,an,p.port),Ft=new VP(Dt,t,$e,Yt,Et,Y);t._transport=Ft,Dt.send("Ready",null)})}).catch(t._capability.reject),t}class Hp{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Hp.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Gp=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,n=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class UP{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class jP{#t=!1;constructor(t,e,n,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new Ab:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new C1,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new Xo({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:o=Qn.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:v=!1,recordOperations:b=!1,operationsFilter:S=null}){this._stats?.time("Overall");const A=this._transport.getRenderingIntent(r,o,g,v),{renderingIntent:x,cacheKey:E}=A;this.#t=!1,d||=this._transport.getOptionalContentConfig(x);let T=this._intentStates.get(E);T||(T=Object.create(null),this._intentStates.set(E,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const C=!!(x&fn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(A));const D=!!(this._pdfBug&&globalThis.StepperManager?.enabled),R=!this.recordedBBoxes&&(b||D),N=q=>{if(T.renderTasks.delete(B),R){const K=B.gfx?.dependencyTracker.take();K&&(B.stepper&&B.stepper.setOperatorBBoxes(K,B.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=K))}C&&(this.#t=!0),this.#e(),q?(B.capability.reject(q),this._abortOperatorList({intentState:T,reason:q instanceof Error?q:new Error(q)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new ja({callback:N,params:{canvas:e,canvasContext:t,dependencyTracker:R?new sP(e,T.operatorList.length,D):null,viewport:n,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:S});(T.renderTasks||=new Set).add(B);const I=B.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([q,K])=>{if(this.destroyed){N();return}if(this._stats?.time("Rendering"),!(K.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:q,optionalContentConfig:K}),B.operatorListChanged()}).catch(N),I}getOperatorList({intent:t="display",annotationMode:e=Qn.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,n,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Oo.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function o(){l.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Ab),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const p=()=>{d.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof iu){let r=IP;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Ti(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Zi,Bn,Ai,Os,Kc,Ns,ks,Ye,kc,R1,M1,mo,Ya,Bc;const Wt=class Wt{constructor({name:t=null,port:e=null,verbosity:n=RL()}={}){Gn(this,Ye);Gn(this,Zi,Promise.withResolvers());Gn(this,Bn,null);Gn(this,Ai,null);Gn(this,Os,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(Kt(Wt,ks).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Kt(Wt,ks).set(e,this),qn(this,Ye,R1).call(this,e)}else qn(this,Ye,M1).call(this)}get promise(){return Kt(this,Zi).promise}get port(){return Kt(this,Ai)}get messageHandler(){return Kt(this,Bn)}destroy(){this.destroyed=!0,Kt(this,Os)?.terminate(),tn(this,Os,null),Kt(Wt,ks).delete(Kt(this,Ai)),tn(this,Ai,null),Kt(this,Bn)?.destroy(),tn(this,Bn,null)}static create(t){const e=Kt(this,ks).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Wt(t)}static get workerSrc(){if(Ji.workerSrc)return Ji.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return wt(this,"_setupFakeWorkerGlobal",(async()=>Kt(this,Ya,Bc)?Kt(this,Ya,Bc):(await import(this.workerSrc)).WorkerMessageHandler)())}};Zi=new WeakMap,Bn=new WeakMap,Ai=new WeakMap,Os=new WeakMap,Kc=new WeakMap,Ns=new WeakMap,ks=new WeakMap,Ye=new WeakSet,kc=function(){Kt(this,Zi).resolve(),Kt(this,Bn).send("configure",{verbosity:this.verbosity})},R1=function(t){tn(this,Ai,t),tn(this,Bn,new po("main","worker",t)),Kt(this,Bn).on("ready",()=>{}),qn(this,Ye,kc).call(this)},M1=function(){if(Kt(Wt,Ns)||Kt(Wt,Ya,Bc)){qn(this,Ye,mo).call(this);return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new po("main","worker",e),r=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?Kt(this,Zi).reject(new Error("Worker was destroyed")):qn(this,Ye,mo).call(this)},o=new AbortController;e.addEventListener("error",()=>{Kt(this,Os)||r()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}tn(this,Bn,n),tn(this,Ai,e),tn(this,Os,e),qn(this,Ye,kc).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{qn(this,Ye,mo).call(this)}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{nu("The worker has been disabled.")}qn(this,Ye,mo).call(this)},mo=function(){Kt(Wt,Ns)||(At("Setting up fake worker."),tn(Wt,Ns,!0)),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Kt(this,Zi).reject(new Error("Worker was destroyed"));return}const e=new KL;tn(this,Ai,e);const n=`fake${V0(Wt,Kc)._++}`,r=new po(n+"_worker",n,e);t.setup(r,e),tn(this,Bn,new po(n,n+"_worker",e)),qn(this,Ye,kc).call(this)}).catch(t=>{Kt(this,Zi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ya=new WeakSet,Bc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Gn(Wt,Ya),Gn(Wt,Kc,0),Gn(Wt,Ns,!1),Gn(Wt,ks,new WeakMap),qe&&(tn(Wt,Ns,!0),Ji.workerSrc||="./pdf.worker.mjs"),Wt._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},Wt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Wt.fromPort=t=>{if(FL("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Wt.create(t)};let Qa=Wt;class VP{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,n,r,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new C1,this.fontLoader=new GL({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,e=null){const n=this.#t.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return wt(this,"annotationStorage",new Ip)}getRenderingIntent(t,e=Qn.ENABLE,n=null,r=!1,o=!1){let l=fn.DISPLAY,u=Nf;switch(t){case"any":l=fn.ANY;break;case"display":break;case"print":l=fn.PRINT;break;default:At(`getRenderingIntent - invalid intent: ${t}`)}const d=l&fn.PRINT&&n instanceof p1?n:this.annotationStorage;switch(e){case Qn.DISABLE:l+=fn.ANNOTATIONS_DISABLE;break;case Qn.ENABLE:break;case Qn.ENABLE_FORMS:l+=fn.ANNOTATIONS_FORMS;break;case Qn.ENABLE_STORAGE:l+=fn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:At(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(l+=fn.IS_EDITING),o&&(l+=fn.OPLIST);const{ids:f,hash:p}=d.modifiedIds,g=[l,u.hash,p];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),No.cleanup(),this._networkStream?.cancelAllRequests(new Ti("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}Lt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,r)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}Lt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new UP(n,this))}),t.on("DocException",n=>{e._capability.reject(en(n))}),t.on("PasswordRequest",n=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw en(n);const r=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(r,n.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const p=o.error;At(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const l=new Vt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,d=new qL(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Lt(f,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,g]of p.objs)if(g?.ref===f)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,l])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&At("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#i.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new jP(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#i.set(e,r),r}getPageIndex(t){return kf(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new bP(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new yP(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),No.cleanup()}}cachedPageNumber(t){if(!kf(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class zP{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ja{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:v=null,enableHWA:b=!1,operationsFilter:S=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zP(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=b,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ja.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ja.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new za(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ja.#e.delete(this._canvas),t||=new iu(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ja.#e.delete(this._canvas),this.callback())))}}const D1="5.4.296",L1="f56dc8601";class pn{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return wt(this,"_keyboardManager",new $o([[["Escape","mac+Escape"],pn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],pn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],pn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],pn.prototype._moveToPrevious],[["Home","mac+Home"],pn.prototype._moveToBeginning],[["End","mac+End"],pn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",pn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#i,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",gn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[n,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",pn.#d[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===this.#i,o.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Rt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastChild?.focus()}#g(t){pn._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class ko{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,ko.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:n}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",ko.#n[t]),r.addEventListener("input",()=>{this.#i.updateParams(e,r.value)},{signal:this.#i._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function zb(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function co(a){return Math.max(0,Math.min(255,255*a))}class Hb{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=co(t),[t,t,t]}static G_HTML([t]){const e=zb(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(co)}static RGB_HTML(t){return`#${t.map(zb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[co(1-Math.min(1,t+r)),co(1-Math.min(1,n+r)),co(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,o=1-e,l=1-n,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class HP{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){qt("Abstract method `_createSVG` called.")}}class Bo extends HP{_createSVG(t){return document.createElementNS(bi,t)}}const GP=9,js=new WeakSet,qP=new Date().getTimezoneOffset()*60*1e3;class Gb{static create(t){switch(t.data.annotationType){case fe.LINK:return new qp(t);case fe.TEXT:return new YP(t);case fe.WIDGET:switch(t.data.fieldType){case"Tx":return new $P(t);case"Btn":return t.data.radioButton?new P1(t):t.data.checkBox?new WP(t):new QP(t);case"Ch":return new ZP(t);case"Sig":return new KP(t)}return new Gs(t);case fe.POPUP:return new If(t);case fe.FREETEXT:return new O1(t);case fe.LINE:return new tO(t);case fe.SQUARE:return new eO(t);case fe.CIRCLE:return new nO(t);case fe.POLYLINE:return new N1(t);case fe.CARET:return new sO(t);case fe.INK:return new Xp(t);case fe.POLYGON:return new iO(t);case fe.HIGHLIGHT:return new k1(t);case fe.UNDERLINE:return new aO(t);case fe.SQUIGGLY:return new rO(t);case fe.STRIKEOUT:return new oO(t);case fe.STAMP:return new B1(t);case fe.FILEATTACHMENT:return new lO(t);default:return new se(t)}}}class se{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return se._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:r}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>l?(l=e[u+1],o=e[u+2]):e[u+1]===l&&(o=Math.max(o,e[u+2]));return[o,l]}if(n?.length>=1){for(const u of n)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-l)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Lo}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Lo}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let r=this.#i?.popup||this.popup;!r&&n?.text&&(this._createPopup(n),r=this.#i.popup),r&&(r.updateEdited(t),n?.deleted&&(r.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,r===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Gs)&&!(this instanceof qp)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof If){const{rotation:A}=e;return!e.hasOwnCanvas&&A!==0&&this.setRotation(A,o),o}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const A=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(A>0||x>0){const T=`calc(${A}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof P1){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(e.borderStyle.style){case Pa.SOLID:l.borderStyle="solid";break;case Pa.DASHED:l.borderStyle="dashed";break;case Pa.BEVELED:At("Unimplemented border style: beveled");break;case Pa.INSET:At("Unimplemented border style: inset");break;case Pa.UNDERLINE:l.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,l.borderColor=it.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const f=it.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:g,pageX:v,pageY:b}=r.rawDims;l.left=`${100*(f[0]-v)/p}%`,l.top=`${100*(f[1]-b)/g}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(l.width=`${100*u/p}%`,l.height=`${100*d/g}%`):this.setRotation(S,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*l/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const o=r.detail[e],l=o[0],u=o.slice(1);r.target.style[n]=Hb[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:Hb[`${l}_rgb`](u)})};return wt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||n[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,o]of Object.entries(e)){const l=n[r];if(l){const u={detail:{[r]:o},target:t};l(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,o]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,x,E,T]=t.subarray(2,6);if(r===A&&o===x&&e===E&&n===T)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:A,borderWidth:x}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const d=r-e,f=o-n,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const v=p.createElement("defs");g.append(v);const b=p.createElement("clipPath"),S=`clippath_${this.data.id}`;b.setAttribute("id",S),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let A=2,x=t.length;A<x;A+=8){const E=t[A],T=t[A+1],C=t[A+2],D=t[A+3],R=p.createElement("rect"),N=(C-e)/d,B=(o-T)/f,I=(E-C)/d,q=(T-D)/f;R.setAttribute("x",N),R.setAttribute("y",B),R.setAttribute("width",I),R.setAttribute("height",q),b.append(R),u?.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${B}" width="${I}" height="${q}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate);const o=this.#i=new If({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!js.has(f)){At(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==e&&js.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class XP extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class qp extends se{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#i(n,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#i(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const o=n.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){At('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:r,refs:o,include:l}=e,u=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const g of r){const v=this._fieldObjects[g]||[];for(const{id:b}of v)p.add(b)}for(const g of Object.values(this._fieldObjects))for(const v of g)p.has(v.id)===l&&u.push(v)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const d=this.annotationStorage,f=[];for(const p of u){const{id:g}=p;switch(f.push(g),p.type){case"text":{const b=p.defaultValue||"";d.setValue(g,{value:b});break}case"checkbox":case"radiobutton":{const b=p.defaultValue===p.exportValues;d.setValue(g,{value:b});break}case"combobox":case"listbox":{const b=p.defaultValue||"";d.setValue(g,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!js.has(v)){At(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class YP extends se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Gs extends se{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Me.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,o){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(t,e,n,r){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":it.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||GP,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(Wd*r))||1,g=f/p;l=Math.min(r,d(g/Wd))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,d(f/Wd))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=it.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class $P extends Gs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[r]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let o=r.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),js.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:g}=this.data,v=!!p&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",S=>{t.setValue(e,{value:S.target.value}),this.setPropertyOnSiblings(n,"value",S.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",S=>{const A=this.data.defaultFieldValue??"";n.value=d.userValue=A,d.formattedValue=null});let b=S=>{const{formattedValue:A}=d;A!=null&&(S.target.value=A),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",A=>{if(d.focused)return;const{target:x}=A;if(v&&(x.type=p,g&&(x.step=g)),d.userValue){const E=d.userValue;if(v)if(p==="time"){const T=new Date(E),C=[T.getHours(),T.getMinutes(),T.getSeconds()];x.value=C.map(D=>D.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-qP).toISOString().split(p==="date"?"T":".",1)[0];else x.value=E}d.lastCommittedValue=x.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const x={value(E){d.userValue=E.detail.value??"",v||t.setValue(e,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:T}=E.detail;d.formattedValue=T,T!=null&&E.target!==document.activeElement&&(E.target.value=T);const C={formattedValue:T};v&&(C.value=T),t.setValue(e,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:T}=E.detail,{target:C}=E;if(T===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",T);let D=d.userValue;!D||D.length<=T||(D=D.slice(0,T),C.value=d.userValue=D,t.setValue(e,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(x,A)}),n.addEventListener("keydown",A=>{d.commitKey=1;let x=-1;if(A.key==="Escape"?x=0:A.key==="Enter"&&!this.data.multiLine?x=2:A.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:E}=A.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:x,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const S=b;b=null,n.addEventListener("blur",A=>{if(!d.focused||!A.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:x}=A;let{value:E}=x;if(v){if(E&&p==="time"){const T=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),x.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();x.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}),S(A)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",A=>{d.lastCommittedValue=null;const{data:x,target:E}=A,{value:T,selectionStart:C,selectionEnd:D}=E;let R=C,N=D;switch(A.inputType){case"deleteWordBackward":{const B=T.substring(0,C).match(/\w*[^\w]*$/);B&&(R-=B[0].length);break}case"deleteWordForward":{const B=T.substring(C).match(/^[^\w]*\w*/);B&&(N+=B[0].length);break}case"deleteContentBackward":C===D&&(R-=1);break;case"deleteContentForward":C===D&&(N+=1);break}A.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:x||"",willCommit:!1,selStart:R,selEnd:N}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(b&&n.addEventListener("blur",b),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${A}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class KP extends Gs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class WP extends Gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return js.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n)){const p=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class P1 extends Gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(js.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const p=l===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=p&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class QP extends qp{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class ZP extends Gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");js.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,n.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),o=!1),r.append(g)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),l=()=>{p.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=p=>{const g=p?"value":"textContent",{options:v,multiple:b}=r;return b?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let d=u(!1);const f=p=>{const g=p.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const g={value(v){l?.();const b=v.detail.value,S=new Set(Array.isArray(b)?b:[b]);for(const A of r.options)A.selected=S.has(A.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(v){r.multiple=!0},remove(v){const b=r.options,S=v.detail.remove;b[S].selected=!1,r.remove(S),b.length>0&&Array.prototype.findIndex.call(b,x=>x.selected)===-1&&(b[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(v){const{index:b,displayValue:S,exportValue:A}=v.detail.insert,x=r.children[b],E=document.createElement("option");E.textContent=S,E.value=A,x?x.before(E):r.append(E),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},items(v){const{items:b}=v.detail;for(;r.length!==0;)r.remove(0);for(const S of b){const{displayValue:A,exportValue:x}=S,E=document.createElement("option");E.textContent=A,E.value=x,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},indices(v){const b=new Set(v.detail.indices);for(const S of v.target.options)S.selected=b.has(S.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,p)}),r.addEventListener("input",p=>{const g=u(!0),v=u(!1);t.setValue(e,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class If extends se{constructor(t){const{data:e,elements:n,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&se._hasPopupData(e)}),this.elements=n,o&&se._hasPopupData(e)){const l=this.popup=this.#t();for(const u of n)u.popup=l}else this.popup=null}#t(){return new JP({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${Op}${r}`).join(",")),this.container}}class JP{#t=null;#e=this.#G.bind(this);#i=this.#U.bind(this);#n=this.#O.bind(this);#r=this.#S.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#b=null;#v=null;#T=null;#E=null;#A=null;#C=!1;#w=null;#x=null;constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:p,open:g,commentManager:v=null}){this.#a=t,this.#E=r,this.#o=l,this.#T=u,this.#d=d,this.#s=e,this.#v=f,this.#h=p,this.#l=n,this.#t=v,this.#w=n[0],this.#c=Xc.toDateObject(o),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup()),v?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,g&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#w.extraPopupElement,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#w.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const u=this.#w.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#M(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#M(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:n}=this.#m;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#F(){this.#w.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#x||=this.#w.commentText,this.#x}set comment(t){t!==this.comment&&(this.#w.commentText=this.#x=t)}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:e,height:n}=this.#m.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#w.layer.getBoundingClientRect();return[(t-r)/l,(e+n-o)/u]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#b||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=r;this.#t.showDialog(null,this,o+e*u,l+n*d,{...t,parentDimensions:r})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#s){const n=t.style.outlineColor=it.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#E?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#E}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}kp({html:this.#P||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#P(){const t=this.#T,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#T.html||null}get#N(){return this.#P?.attributes?.style?.fontSize||0}get#I(){return this.#P?.attributes?.style?.color||null}#k(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#I,fontSize:this.#N?`calc(${this.#N}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return n}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#x=null):e&&(e.deleted?this.remove():(this.#F(),this.#x=e.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(n||e?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),e&&e.text&&(this.#T=this.#k(e.text),this.#c=Xc.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#T}=this.#A,this.#A=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#_(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#v;for(const S of this.#l)if(!u||it.intersect(S.data.rect,u)!==null){u=S.data.rect,l=!0;break}const d=it.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,g=d[0]+p,v=d[1];this.#u=[100*(g-r)/e,100*(v-o)/n];const{style:b}=this.#a;b.left=`${this.#u[0]}%`,b.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#U(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#O(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#_(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#U(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#g||this.#O(),this.#C=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class O1 extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class tO extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class eO extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nO extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class N1 extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:r},width:o,height:l}=this;if(!e)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let p=0,g=e.length;p<g;p+=2){const v=e[p]-t[0],b=t[3]-e[p+1];d.push(`${v},${b}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class iO extends N1{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sO extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Xp extends se{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?bt.HIGHLIGHT:bt.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#i(e,t),f=this.svgFactory.create(u,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let g=0,v=n.length;g<v;g++){const b=this.svgFactory.createElement(this.svgElementName);this.#e.push(b),b.setAttribute("points",n[g].join(",")),p.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:r}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),n)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:u,height:d}=this.#i(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class k1 extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=bt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class aO extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class rO extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class oO extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class B1 extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class lO extends se{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:r}=Me.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Yp=class F1{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=n,this.#r=u||null,this.#s=f||null,this.#i=p||new Ip,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,n){const r=t.firstChild||t,o=r.id=`${Op}${e}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,d]of l)r.setAttribute(u,d);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:e}=t,n=this.div;ns(n,this.viewport);const r=new Map,o={data:null,layer:n,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Bo,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===fe.POPUP;if(u){const p=r.get(l.id);if(!p)continue;o.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=Gb.create(o);if(!d.isRenderable)continue;if(!u&&l.popupRef){const p=r.get(l.popupRef);p?p.push(d):r.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#a(f,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#s,svgFactory:new Bo,parent:this};for(const n of t){n.borderStyle||=F1._defaultBorderStyle,e.data=n;const r=Gb.create(e);if(!r.isRenderable)continue;const o=r.render();await this.#a(o,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ns(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:r}=t,o=new XP({data:{id:n,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),l=o.render();return e.append(l),this.#t?.moveElementInDOM(e,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Pa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Cc=/\r\n?|\n/g;class Ce extends ht{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ce.prototype,e=o=>o.isEmpty(),n=_i.TRANSLATE_SMALL,r=_i.TRANSLATE_BIG;return wt(this,"_keyboardManager",new $o([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=bt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ce._defaultColor||ht._defaultLineColor,this.#n=t.fontSize||Ce._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){ht.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Rt.FREETEXT_SIZE:Ce._defaultFontSize=e;break;case Rt.FREETEXT_COLOR:Ce._defaultColor=e;break}}updateParams(t,e){switch(t){case Rt.FREETEXT_SIZE:this.#r(e);break;case Rt.FREETEXT_COLOR:this.#s(e);break}}static get defaultPropertiesToUpdate(){return[[Rt.FREETEXT_SIZE,Ce._defaultFontSize],[Rt.FREETEXT_COLOR,Ce._defaultColor||ht._defaultLineColor]]}get propertiesToUpdate(){return[[Rt.FREETEXT_SIZE,this.#n],[Rt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new ko(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.FREETEXT_COLOR}#r(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const e=r=>{this.color=r,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ce._internalPadding*t,-(Ce._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(Ce.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const n=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ce._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,p]=this.pageDimensions,[g,v]=this.pageTranslation;let b,S;switch(this.rotation){case 0:b=t+(l[0]-g)/f,S=e+this.height-(l[1]-v)/p;break;case 90:b=t+(l[0]-g)/f,S=e-(l[1]-v)/p,[u,d]=[d,-u];break;case 180:b=t-this.width+(l[0]-g)/f,S=e-(l[1]-v)/p,[u,d]=[-u,-d];break;case 270:b=t+(l[0]-g-this.height*p)/f,S=e+(l[1]-v-this.width*f)/p,[u,d]=[-d,u];break}this.setAt(b*r,S*o,u,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Cc,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=Ce.#h(e.getData("text")||"").replaceAll(Cc,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const b=u.parentElement;if(p.push(u.nodeValue.slice(d).replaceAll(Cc,"")),b!==this.editorDiv){let S=f;for(const A of this.editorDiv.childNodes){if(A===b){S=p;continue}S.push(Ce.#c(A))}}f.push(u.nodeValue.slice(0,d).replaceAll(Cc,""))}else if(u===this.editorDiv){let b=f,S=0;for(const A of this.editorDiv.childNodes)S++===d&&(b=p),b.push(Ce.#c(A))}this.#t=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#l();const g=new Range;let v=Math.sumPrecise(f.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const S=b.nodeValue.length;if(v<=S){g.setStart(b,v),g.setEnd(b,v);break}v-=S}o.removeAllRanges(),o.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ce._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let r=null;if(t instanceof O1){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:p,popupRef:g,richText:v,contentsObj:b,creationDate:S,modificationDate:A},textContent:x,textPosition:E,parent:{page:{pageNumber:T}}}=t;if(!x||x.length===0)return null;r=t={annotationType:bt.FREETEXT,color:Array.from(u),fontSize:l,value:x.join(`
`),position:E,pageIndex:T-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:g,comment:b?.str||null,richText:v,creationDate:S,modificationDate:A}}const o=await super.deserialize(t,e,n);return o.#n=t.fontSize,o.color=it.makeHexColor(...t.color),o.#t=Ce.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ht._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(t){const{value:e,fontSize:n,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,u)=>l!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class nt{static PRECISION=1e-4;toSVGPath(){qt("Abstract method `toSVGPath` must be implemented.")}get box(){qt("Abstract getter `box` must be implemented.")}serialize(t,e){qt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u]*r,l[u+1]=n+t[u+1]*o;return l}static _rescaleAndSwap(t,e,n,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u+1]*r,l[u+1]=n+t[u]*o;return l}static _translate(t,e,n,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=e+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,o){switch(o){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,o,l){return[(t+5*n)/6,(e+5*r)/6,(5*n+o)/6,(5*r+l)/6,(n+o)/2,(r+l)/2]}}class Ps{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#g=8;static#p=2;static#u=Ps.#g+Ps.#p;constructor({x:t,y:e},n,r,o,l,u=0){this.#t=n,this.#h=o*r,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=u,this.#l=Ps.#g*r,this.#c=Ps.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[n,r,o,l]=this.#t;return[(this.#a+(t[0]-e[0])/2-n)/o,(this.#o+(t[1]-e[1])/2-r)/l,(this.#a+(e[0]-t[0])/2-n)/o,(this.#o+(e[1]-t[1])/2-r)/l]}add({x:t,y:e}){this.#a=t,this.#o=e;const[n,r,o,l]=this.#t;let[u,d,f,p]=this.#s.subarray(8,12);const g=t-f,v=e-p,b=Math.hypot(g,v);if(b<this.#c)return!1;const S=b-this.#l,A=S/b,x=A*g,E=A*v;let T=u,C=d;u=f,d=p,f+=x,p+=E,this.#f?.push(t,e);const D=-E/S,R=x/S,N=D*this.#h,B=R*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([f+N,p+B],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([f-N,p-B],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+N,d+B],2),this.#r.push(NaN,NaN,NaN,NaN,(u+N-n)/o,(d+B-r)/l),this.#s.set([u-N,d-B],14),this.#e.push(NaN,NaN,NaN,NaN,(u-N-n)/o,(d-B-r)/l)),this.#s.set([T,C,u,d,f,p],6),!this.isEmpty()):(this.#s.set([T,C,u,d,f,p],6),Math.abs(Math.atan2(C-d,T-u)-Math.atan2(E,x))<Math.PI/2?([u,d,f,p]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((d+p)/2-r)/l),[u,d,T,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-n)/o,((C+d)/2-r)/l),!0):([T,C,u,d,f,p]=this.#s.subarray(0,6),this.#r.push(((T+5*u)/6-n)/o,((C+5*d)/6-r)/l,((5*u+f)/6-n)/o,((5*d+p)/6-r)/l,((u+f)/2-n)/o,((d+p)/2-r)/l),[f,p,u,d,T,C]=this.#s.subarray(12,18),this.#e.push(((T+5*u)/6-n)/o,((C+5*d)/6-r)/l,((5*u+f)/6-n)/o,((5*d+p)/6-r)/l,((u+f)/2-n)/o,((d+p)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#v(n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#b(n),n.join(" ")}#y(){const[t,e,n,r]=this.#t,[o,l,u,d]=this.#m();return`M${(this.#s[2]-t)/n} ${(this.#s[3]-e)/r} L${(this.#s[4]-t)/n} ${(this.#s[5]-e)/r} L${o} ${l} L${u} ${d} L${(this.#s[16]-t)/n} ${(this.#s[17]-e)/r} L${(this.#s[14]-t)/n} ${(this.#s[15]-e)/r} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,n,r,o]=this.#t,l=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[d,f,p,g]=this.#m();t.push(`L${(l[0]-e)/r} ${(l[1]-n)/o} L${d} ${f} L${p} ${g} L${(u[0]-e)/r} ${(u[1]-n)/o}`)}newFreeDrawOutline(t,e,n,r,o,l){return new I1(t,e,n,r,o,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#s,[r,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let g=0,v=d.length-2;g<v;g+=2)d[g]=(this.#f[g]-r)/l,d[g+1]=(this.#f[g+1]-o)/u;if(d[d.length-2]=(this.#a-r)/l,d[d.length-1]=(this.#o-o)/u,isNaN(n[6])&&!this.isEmpty())return this.#T(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let g=0;g<p;g+=2){if(isNaN(t[g])){f[g]=f[g+1]=NaN;continue}f[g]=t[g],f[g+1]=t[g+1]}p=this.#A(f,p);for(let g=e.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(e[g+v])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[g+v],f[p+1]=e[g+v+1],p+=2}return this.#E(f,p),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#T(t){const e=this.#s,[n,r,o,l]=this.#t,[u,d,f,p]=this.#m(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-r)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-r)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-r)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-r)/l],0),this.newFreeDrawOutline(g,t,this.#t,this.#d,this.#i,this.#n)}#E(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#A(t,e){const n=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[o,l,u,d]=this.#t,[f,p,g,v]=this.#m();return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/d],e),e+=24}}class I1 extends nt{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,e,n,r,o,l){super(),this.#a=t,this.#r=e,this.#t=n,this.#s=r,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,f,p]=this.#e;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-u)/f,t[g+1]=(t[g+1]-d)/p;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-u)/f,e[g+1]=(e[g+1]-d)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,n=this.#a.length;e<n;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,r],o){const l=n-t,u=r-e;let d,f;switch(o){case 0:d=nt._rescale(this.#a,t,r,l,-u),f=nt._rescale(this.#r,t,r,l,-u);break;case 90:d=nt._rescaleAndSwap(this.#a,t,e,l,u),f=nt._rescaleAndSwap(this.#r,t,e,l,u);break;case 180:d=nt._rescale(this.#a,n,e,-l,u),f=nt._rescale(this.#r,n,e,-l,u);break;case 270:d=nt._rescaleAndSwap(this.#a,n,r,-l,-u),f=nt._rescaleAndSwap(this.#r,n,r,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#a;let n=e[4],r=e[5];const o=[n,r,n,r];let l=n,u=r,d=n,f=r;const p=t?Math.max:Math.min,g=new Float32Array(4);for(let b=6,S=e.length;b<S;b+=6){const A=e[b+4],x=e[b+5];isNaN(e[b])?(it.pointBoundingBox(A,x,o),u>x?(l=A,u=x):u===x&&(l=p(l,A)),f<x?(d=A,f=x):f===x&&(d=p(d,A))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,it.bezierBoundingBox(n,r,...e.slice(b,b+6),g),it.rectBoundingBox(g[0],g[1],g[2],g[3],o),u>g[1]?(l=g[0],u=g[1]):u===g[1]&&(l=p(l,g[0])),f<g[3]?(d=g[2],f=g[3]):f===g[3]&&(d=p(d,g[2]))),n=A,r=x}const v=this.#e;v[0]=o[0]-this.#i,v[1]=o[1]-this.#i,v[2]=o[2]-o[0]+2*this.#i,v[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,n,r,o,l=0){return new Ps(t,e,n,r,o,l)}getNewOutline(t,e){const[n,r,o,l]=this.#e,[u,d,f,p]=this.#t,g=o*f,v=l*p,b=n*f+u,S=r*p+d,A=this.newOutliner({x:this.#r[0]*g+b,y:this.#r[1]*v+S},this.#t,this.#s,t,this.#n,e??this.#i);for(let x=2;x<this.#r.length;x+=2)A.add({x:this.#r[x]*g+b,y:this.#r[x+1]*v+S});return A.getOutlines()}}class Uf{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,n=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:A,y:x,width:E,height:T}of t){const C=Math.floor((A-e)/l)*l,D=Math.ceil((A+E+e)/l)*l,R=Math.floor((x-e)/l)*l,N=Math.ceil((x+T+e)/l)*l,B=[C,R,N,!0],I=[D,R,N,!1];this.#n.push(B,I),it.rectBoundingBox(C,R,D,N,o)}const u=o[2]-o[0]+2*n,d=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n;let g=r?-1/0:1/0,v=1/0;const b=this.#n.at(r?-1:-2),S=[b[0],b[2]];for(const A of this.#n){const[x,E,T,C]=A;!C&&r?E<v?(v=E,g=x):E===v&&(g=Math.max(g,x)):C&&!r&&(E<v?(v=E,g=x):E===v&&(g=Math.min(g,x))),A[0]=(x-f)/u,A[1]=(E-p)/d,A[2]=(T-p)/d}this.#t=new Float32Array([f,p,u,d]),this.#e=[g,v],this.#i=S}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){const e=[],n=new Set;for(const l of t){const[u,d,f]=l;e.push([u,d,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[u,d,f,p,g]=l;n.delete(l);let v=u,b=d;for(o=[u,f],r.push(o);;){let S;if(n.has(p))S=p;else if(n.has(g))S=g;else break;n.delete(S),[u,d,f,p,g]=S,v!==u&&(o.push(v,b,u,b===d?d:f),v=u),b=b===d?f:d}o.push(v,b)}return new cO(r,this.#t,this.#e,this.#i)}#a(t){const e=this.#r;let n=0,r=e.length-1;for(;n<=r;){const o=n+r>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:r=o-1}return r+1}#o([,t,e]){const n=this.#a(t);this.#r.splice(n,0,[t,e])}#c([,t,e]){const n=this.#a(t);for(let r=n;r<this.#r.length;r++){const[o,l]=this.#r[r];if(o!==t)break;if(o===t&&l===e){this.#r.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=this.#r[r];if(o!==t)break;if(o===t&&l===e){this.#r.splice(r,1);return}}}#l(t){const[e,n,r]=t,o=[[e,n,r]],l=this.#a(r);for(let u=0;u<l;u++){const[d,f]=this.#r[u];for(let p=0,g=o.length;p<g;p++){const[,v,b]=o[p];if(!(f<=v||b<=d)){if(v>=d){if(b>f)o[p][1]=f;else{if(g===1)return[];o.splice(p,1),p--,g--}continue}o[p][2]=d,b>f&&o.push([e,f,b])}}}return o}}class cO extends nt{#t;#e;constructor(t,e,n,r){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[n,r]=e;t.push(`M${n} ${r}`);for(let o=2;o<e.length;o+=2){const l=e[o],u=e[o+1];l===n?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,r],o){const l=[],u=n-t,d=r-e;for(const f of this.#e){const p=new Array(f.length);for(let g=0;g<f.length;g+=2)p[g]=t+f[g]*u,p[g+1]=r-f[g+1]*d;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class jf extends Ps{newFreeDrawOutline(t,e,n,r,o,l){return new uO(t,e,n,r,o,l)}}class uO extends I1{newOutliner(t,e,n,r,o,l=0){return new jf(t,e,n,r,o,l)}}class pe extends ht{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=pe.prototype;return wt(this,"_keyboardManager",new $o([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||pe._defaultColor,this.#m=t.thickness||pe._defaultThickness,this.opacity=t.opacity||pe._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Uf(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Uf(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:r}=this.#s;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const r=1.5;if(this.#s=t.getNewOutline(this.#m/2+r,.0025),e>=0)this.#d=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:pe.#x(this.#l.box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:pe.#x(this.#s.box,g),path:{d:this.#s.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[g,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*v/g,this.height=d*g/v;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*v/g,this.height=d*g/v;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/d];const{lastPoint:p}=this.#s;this.#g=[(p[0]-o)/u,(p[1]-l)/d]}static initialize(t,e){ht.initialize(t,e),pe._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Rt.HIGHLIGHT_COLOR:pe._defaultColor=e;break;case Rt.HIGHLIGHT_THICKNESS:pe._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Rt.HIGHLIGHT_COLOR:this.#T(e);break;case Rt.HIGHLIGHT_THICKNESS:this.#E(e);break}}static get defaultPropertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,pe._defaultColor],[Rt.HIGHLIGHT_THICKNESS,pe._defaultThickness]]}get propertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,this.color||pe._defaultColor],[Rt.HIGHLIGHT_THICKNESS,this.#m||pe._defaultThickness],[Rt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#T(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},n=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,pe._defaultOpacity),undo:e.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#E(t){const e=this.#m,n=r=>{this.#m=r,this.#A(r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new pn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#x([t,e,n,r],o){switch(o){case 90:return[1-e-r,t,r,n];case 180:return[1-t-n,1-e-r,n,r];case 270:return[e,1-t-n,r,n]}return[t,e,n,r]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=pe.#x(this.#l.box,t)):n=pe.#x([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:pe.#x(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),d1(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){pe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#F(){if(this.#h)return null;const[t,e]=this.pageDimensions,[n,r]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:p,height:g}of o){const v=d*t+n,b=(1-f)*e+r;l[u]=l[u+4]=v,l[u+1]=l[u+3]=b,l[u+2]=l[u+6]=v+p*t,l[u+5]=l[u+7]=b-g*e,u+=8}return l}#P(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:n,x:r,y:o}){const{x:l,y:u,width:d,height:f}=n.getBoundingClientRect(),p=new AbortController,g=t.combinedSignal(p),v=b=>{p.abort(),this.#I(t,b)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",te,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",gn,{signal:g}),n.addEventListener("pointermove",this.#N.bind(this,t),{signal:g}),this._freeHighlight=new jf({x:r,y:o},[l,u,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#N(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#I(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let r=null;if(t instanceof k1){const{data:{quadPoints:S,rect:A,rotation:x,id:E,color:T,opacity:C,popupRef:D,richText:R,contentsObj:N,creationDate:B,modificationDate:I},parent:{page:{pageNumber:q}}}=t;r=t={annotationType:bt.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:S,boxes:null,pageIndex:q-1,rect:A.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:D,richText:R,comment:N?.str||null,creationDate:B,modificationDate:I}}else if(t instanceof Xp){const{data:{inkLists:S,rect:A,rotation:x,id:E,color:T,borderStyle:{rawWidth:C},popupRef:D,richText:R,contentsObj:N,creationDate:B,modificationDate:I},parent:{page:{pageNumber:q}}}=t;r=t={annotationType:bt.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:S,boxes:null,pageIndex:q-1,rect:A.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:D,richText:R,comment:N?.str||null,creationDate:B,modificationDate:I}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,e,n);f.color=it.makeHexColor(...o),f.opacity=d||1,u&&(f.#m=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[p,g]=f.pageDimensions,[v,b]=f.pageTranslation;if(l){const S=f.#i=[];for(let A=0;A<l.length;A+=8)S.push({x:(l[A]-v)/p,y:1-(l[A+1]-b)/g,width:(l[A+2]-l[A])/p,height:(l[A+1]-l[A+5])/g});f.#b(),f.#w(),f.rotate(f.rotation)}else if(u){f.#h=!0;const S=u[0],A={x:S[0]-v,y:g-(S[1]-b)},x=new jf(A,[0,0,p,g],1,f.#m/2,!0,.001);for(let C=0,D=S.length;C<D;C+=2)A.x=S[C]-v,A.y=g-(S[C+1]-b),x.add(A);const{id:E,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);f.#v({highlightOutlines:x.getOutlines(),highlightId:E,clipPathId:T}),f.#w(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#F(),outlines:this.#P(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#k(n)?null:(n.id=this.annotationElementId,n)}#k(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,r)=>n!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class U1{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){qt("Not implemented")}}class mt extends ht{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:n}=e.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[r,o]of Object.entries(e))n.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){qt("Not implemented")}static get typesMap(){qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(mt.#i.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)t.push([n,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,r]of this.constructor.typesMap)t.push([n,e[r]]);return t}_updateProperty(t,e,n){const r=this._drawingOptions,o=r[e],l=u=>{r.updateProperty(e,u);const d=this.#t.updateProperty(e,u);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,n,r]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[e,1-t,n*(l/o),r*(o/l)];case 180:return[1-t,1-e,n,r];case 270:return[1-e,t,n*(l/o),r*(o/l)];default:return[t,e,n,r]}}#p(){const{x:t,y:e,width:n,height:r,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-e,t,n*(o/l),r*(l/o)];case 180:return[1-t,1-e,n,r];case 270:return[e,1-t,n*(o/l),r*(l/o)];default:return[t,e,n,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:t,y:e,width:n,height:r,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-e-r,t,r,n];case 2:return[1-t-n,1-e-r,n,r];case 3:return[e,1-t-n,r,n];case 4:return[t,e-n*(u/d),r*(d/u),n*(u/d)];case 5:return[1-e,t,n*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-e,r*(d/u),n*(u/d)];case 7:return[e-n*(u/d),1-t-r*(d/u),n*(u/d),r*(d/u)];case 8:return[t-n,e-r,n,r];case 9:return[1-e,t-n,r,n];case 10:return[1-t,1-e,n,r];case 11:return[e-r,1-t,r,n];case 12:return[t-r*(d/u),e,r*(d/u),n*(u/d)];case 13:return[1-e-n*(u/d),t-r*(d/u),n*(u/d),r*(d/u)];case 14:return[1-t,1-e-n*(u/d),r*(d/u),n*(u/d)];case 15:return[e,1-t,n*(u/d),r*(d/u)];default:return[t,e,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,r,o){qt("Not implemented")}static startDrawing(t,e,n,r){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=r;if(mt.#a&&mt.#a!==f)return;const{viewport:{rotation:p}}=t,{width:g,height:v}=o.getBoundingClientRect(),b=mt.#n=new AbortController,S=t.combinedSignal(b);if(mt.#s||=d,mt.#a??=f,window.addEventListener("pointerup",A=>{mt.#s===A.pointerId?this._endDraw(A):mt.#o?.delete(A.pointerId)},{signal:S}),window.addEventListener("pointercancel",A=>{mt.#s===A.pointerId?this._currentParent.endDrawingSession():mt.#o?.delete(A.pointerId)},{signal:S}),window.addEventListener("pointerdown",A=>{mt.#a===A.pointerType&&((mt.#o||=new Set).add(A.pointerId),mt.#i.isCancellable()&&(mt.#i.removeLastElement(),mt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",gn,{signal:S}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),o.addEventListener("touchmove",A=>{A.timeStamp===mt.#c&&te(A)},{signal:S}),t.toggleDrawing(),e._editorUndoBar?.hide(),mt.#i){t.drawLayer.updateProperties(this._currentDrawId,mt.#i.startNew(l,u,g,v,p));return}e.updateUIForDefaultProperties(this),mt.#i=this.createDrawerInstance(l,u,g,v,p),mt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(mt.#r.toSVGProperties(),mt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(mt.#c=-1,!mt.#i)return;const{offsetX:e,offsetY:n,pointerId:r}=t;if(mt.#s===r){if(mt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,mt.#i.add(e,n)),mt.#c=t.timeStamp,te(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,mt.#i=null,mt.#r=null,mt.#a=null,mt.#c=NaN),mt.#n&&(mt.#n.abort(),mt.#n=null,mt.#s=NaN,mt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,mt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=mt.#i,r=this._currentDrawId,o=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Rt.DRAW_STEP),!mt.#i.isEmpty()){const{pageDimensions:[n,r],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:mt.#i.getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:mt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,r,o,l){qt("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:u}}=e.viewport,d=this.deserializeDraw(l,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,n);return f.createDrawingOptions(t),f.#l({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,n]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([e,n,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class hO{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new Qo;#l;#d;constructor(t,e,n,r,o,l){this.#l=n,this.#d=r,this.#n=o,this.#r=l,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return nt._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#h(t,e);const[n,r,o,l]=this.#t.subarray(2,6),u=t-o,d=e-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#s.push(t,e),isNaN(n)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,r,o,l,t,e],0),this.#e.push(...nt.createBezierPoints(n,r,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,o){this.#l=n,this.#d=r,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:n,points:r}=this.#i[t];this.#e=n,this.#s=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=nt.svgRound(this.#e[4]),e=nt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const r=nt.svgRound(this.#e[10]),o=nt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${r} ${o}`,this.#o=12,this.#a}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[l,u,d,f,p,g]=this.#e.slice(r,r+6).map(nt.svgRound);n.push(`C${l} ${u} ${d} ${f} ${p} ${g}`)}return this.#a+=n.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,n,r){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,n,this.#n,this.#r,r),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Qo extends nt{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,e,n,r,o,l,u){this.#r=e,this.#s=n,this.#a=r,this.#o=o,this.#c=l,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${nt.svgRound(e[4])} ${nt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${nt.svgRound(e[10])} ${nt.svgRound(e[11])}`);continue}for(let n=6,r=e.length;n<r;n+=6){const[o,l,u,d,f,p]=e.subarray(n,n+6).map(nt.svgRound);t.push(`C${o} ${l} ${u} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,e,n,r],o){const l=[],u=[],[d,f,p,g]=this.#d();let v,b,S,A,x,E,T,C,D;switch(this.#o){case 0:D=nt._rescale,v=t,b=e+r,S=n,A=-r,x=t+d*n,E=e+(1-f-g)*r,T=t+(d+p)*n,C=e+(1-f)*r;break;case 90:D=nt._rescaleAndSwap,v=t,b=e,S=n,A=r,x=t+f*n,E=e+d*r,T=t+(f+g)*n,C=e+(d+p)*r;break;case 180:D=nt._rescale,v=t+n,b=e,S=-n,A=r,x=t+(1-d-p)*n,E=e+f*r,T=t+(1-d)*n,C=e+(f+g)*r;break;case 270:D=nt._rescaleAndSwap,v=t+n,b=e+r,S=-n,A=-r,x=t+(1-f-g)*n,E=e+(1-d-p)*r,T=t+(1-f)*n,C=e+(1-d)*r;break}for(const{line:R,points:N}of this.#n)l.push(D(R,v,b,S,A,o?new Array(R.length):null)),u.push(D(N,v,b,S,A,o?new Array(N.length):null));return{lines:l,points:u,rect:[x,E,T,C]}}static deserialize(t,e,n,r,o,{paths:{lines:l,points:u},rotation:d,thickness:f}){const p=[];let g,v,b,S,A;switch(d){case 0:A=nt._rescale,g=-t/n,v=e/r+1,b=1/n,S=-1/r;break;case 90:A=nt._rescaleAndSwap,g=-e/r,v=-t/n,b=1/r,S=1/n;break;case 180:A=nt._rescale,g=t/n+1,v=-e/r,b=-1/n,S=1/r;break;case 270:A=nt._rescaleAndSwap,g=e/r+1,v=t/n+1,b=-1/r,S=-1/n;break}if(!l){l=[];for(const E of u){const T=E.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(T-2));l.push(C);let[D,R,N,B]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,D,R],0);for(let I=4;I<T;I+=2){const q=E[I],K=E[I+1];C.set(nt.createBezierPoints(D,R,N,B,q,K),(I-2)*3),[D,R,N,B]=[N,B,q,K]}}}for(let E=0,T=l.length;E<T;E++)p.push({line:A(l[E].map(C=>C??NaN),g,v,b,S),points:A(u[E].map(C=>C??NaN),g,v,b,S)});const x=new this.prototype.constructor;return x.build(p,n,r,1,d,f,o),x}#l(t=this.#c){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,n,r]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,n-2*o,r-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)it.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],l=r[5];for(let u=6,d=r.length;u<d;u+=6){const[f,p,g,v,b,S]=r.subarray(u,u+6);it.bezierBoundingBox(o,l,f,p,g,v,b,S,t),o=b,l=S}}const[e,n]=this.#l();t[0]=je(t[0]-e,0,1),t[1]=je(t[1]-n,0,1),t[2]=je(t[2]+e,0,1),t[3]=je(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#c=t;const[r,o]=this.#l(),[l,u]=[r-e,o-n],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,e],n){const[r,o]=this.#l();this.#r=t,this.#s=e,this.#a=n;const[l,u]=this.#l(),d=l-r,f=u-o,p=this.#t;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(nt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,r=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:r=e/t,o=-t/e,u=t;break;case 180:n=-1,l=-1,u=t,d=e;break;case 270:r=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${n} ${r} ${o} ${l} ${nt.svgRound(u)} ${nt.svgRound(d)})`}getPathResizingSVGProperties([t,e,n,r]){const[o,l]=this.#l(),[u,d,f,p]=this.#t;if(Math.abs(f-o)<=nt.PRECISION||Math.abs(p-l)<=nt.PRECISION){const A=t+n/2-(u+f/2),x=e+r/2-(d+p/2);return{path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${A} ${x})`}}}const g=(n-2*o)/(f-2*o),v=(r-2*l)/(p-2*l),b=f/n,S=p/r;return{path:{"transform-origin":`${nt.svgRound(u)} ${nt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${b} ${S}) translate(${nt.svgRound(o)} ${nt.svgRound(l)}) scale(${g} ${v}) translate(${nt.svgRound(-o)} ${nt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,r]){const[o,l]=this.#l(),u=this.#t,[d,f,p,g]=u;if(u[0]=t,u[1]=e,u[2]=n,u[3]=r,Math.abs(p-o)<=nt.PRECISION||Math.abs(g-l)<=nt.PRECISION){const x=t+n/2-(d+p/2),E=e+r/2-(f+g/2);for(const{line:T,points:C}of this.#n)nt._translate(T,x,E,T),nt._translate(C,x,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(n-2*o)/(p-2*o),b=(r-2*l)/(g-2*l),S=-v*(d+o)+t+o,A=-b*(f+l)+e+l;if(v!==1||b!==1||S!==0||A!==0)for(const{line:x,points:E}of this.#n)nt._rescale(x,S,A,v,b,x),nt._rescale(E,S,A,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[r,o]=n,l=this.#t,u=t-l[0],d=e-l[1];if(this.#r===r&&this.#s===o)for(const{line:f,points:p}of this.#n)nt._translate(f,u,d,f),nt._translate(p,u,d,p);else{const f=this.#r/r,p=this.#s/o;this.#r=r,this.#s=o;for(const{line:g,points:v}of this.#n)nt._rescale(g,u,d,f,p,g),nt._rescale(v,u,d,f,p,v);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t[0])} ${nt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class ru extends U1{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ht._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new ru(this._viewParameters);return t.updateAll(this),t}}class $p extends mt{static _type="ink";static _editorType=bt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ht.initialize(t,e),this._defaultDrawingOptions=new ru(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return wt(this,"typesMap",new Map([[Rt.INK_THICKNESS,"stroke-width"],[Rt.INK_COLOR,"stroke"],[Rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,r,o){return new hO(t,e,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,r,o,l){return Qo.deserialize(t,e,n,r,o,l)}static async deserialize(t,e,n){let r=null;if(t instanceof Xp){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:p,opacity:g,borderStyle:{rawWidth:v},popupRef:b,richText:S,contentsObj:A,creationDate:x,modificationDate:E},parent:{page:{pageNumber:T}}}=t;r=t={annotationType:bt.INK,color:Array.from(p),thickness:v,opacity:g,paths:{points:l},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:b,richText:S,comment:A?.str||null,creationDate:x,modificationDate:E}}const o=await super.deserialize(t,e,n);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new ko(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=$p.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:ht._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:e,points:n}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==n||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Vf extends Qo{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Rc=8,uo=3;class Ms{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,r,o,l,u){const d=this.#e(n,r,o,l);for(let f=0;f<8;f++){const p=(-f+d-u+16)%8,g=this.#i[2*p],v=this.#i[2*p+1];if(t[(n+g)*e+(r+v)]!==0)return p}return-1}static#r(t,e,n,r,o,l,u){const d=this.#e(n,r,o,l);for(let f=0;f<8;f++){const p=(f+d+u+16)%8,g=this.#i[2*p],v=this.#i[2*p+1];if(t[(n+g)*e+(r+v)]!==0)return p}return-1}static#s(t,e,n,r){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=r?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let u=1,d;const f=[];for(let p=1;p<n-1;p++){d=1;for(let g=1;g<e-1;g++){const v=p*e+g,b=l[v];if(b===0)continue;let S=p,A=g;if(b===1&&l[v-1]===0)u+=1,A-=1;else if(b>=1&&l[v+1]===0)u+=1,A+=1,b>1&&(d=b);else{b!==1&&(d=Math.abs(b));continue}const x=[g,p],E=A===g+1,T={isHole:E,points:x,id:u,parent:0};f.push(T);let C;for(const J of f)if(J.id===d){C=J;break}C?C.isHole?T.parent=E?C.parent:d:T.parent=E?d:C.parent:T.parent=E?d:0;const D=this.#n(l,e,p,g,S,A,0);if(D===-1){l[v]=-u,l[v]!==1&&(d=Math.abs(l[v]));continue}let R=this.#i[2*D],N=this.#i[2*D+1];const B=p+R,I=g+N;S=B,A=I;let q=p,K=g;for(;;){const J=this.#r(l,e,q,K,S,A,1);R=this.#i[2*J],N=this.#i[2*J+1];const ot=q+R,dt=K+N;x.push(dt,ot);const at=q*e+K;if(l[at+1]===0?l[at]=-u:l[at]===1&&(l[at]=u),ot===p&&dt===g&&q===B&&K===I){l[v]!==1&&(d=Math.abs(l[v]));break}else S=q,A=K,q=ot,K=dt}}}return f}static#a(t,e,n,r){if(n-e<=4){for(let B=e;B<n-2;B+=2)r.push(t[B],t[B+1]);return}const o=t[e],l=t[e+1],u=t[n-4]-o,d=t[n-3]-l,f=Math.hypot(u,d),p=u/f,g=d/f,v=p*l-g*o,b=d/u,S=1/f,A=Math.atan(b),x=Math.cos(A),E=Math.sin(A),T=S*(Math.abs(x)+Math.abs(E)),C=S*(1-T+T**2),D=Math.max(Math.atan(Math.abs(E+x)*C),Math.atan(Math.abs(E-x)*C));let R=0,N=e;for(let B=e+2;B<n-2;B+=2){const I=Math.abs(v-p*t[B+1]+g*t[B]);I>R&&(N=B,R=I)}R>(f*D)**2?(this.#a(t,e,N+2,r),this.#a(t,N,n,r)):r.push(o,l)}static#o(t){const e=[],n=t.length;return this.#a(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,r,o,l){const u=new Float32Array(l**2),d=-2*r**2,f=l>>1;for(let A=0;A<l;A++){const x=(A-f)**2;for(let E=0;E<l;E++)u[A*l+E]=Math.exp((x+(E-f)**2)/d)}const p=new Float32Array(256),g=-2*o**2;for(let A=0;A<256;A++)p[A]=Math.exp(A**2/g);const v=t.length,b=new Uint8Array(v),S=new Uint32Array(256);for(let A=0;A<n;A++)for(let x=0;x<e;x++){const E=A*e+x,T=t[E];let C=0,D=0;for(let N=0;N<l;N++){const B=A+N-f;if(!(B<0||B>=n))for(let I=0;I<l;I++){const q=x+I-f;if(q<0||q>=e)continue;const K=t[B*e+q],J=u[N*l+I]*p[Math.abs(K-T)];C+=K*J,D+=J}}const R=b[E]=Math.round(C/D);S[R]++}return[b,S]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,o=1/0;for(let u=0,d=n.length;u<d;u++){const f=n[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const l=255/(r-o);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-o)*l;return n}static#h(t){let e,n=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(e=o;e<256;e++){const d=t[e];d>n&&(e-l>r&&(r=e-l,u=e-1),n=d,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:r}=t,{maxDim:o}=this.#t;let l=n,u=r;if(n>o||r>o){let v=n,b=r,S=Math.log2(Math.max(n,r)/o);const A=Math.floor(S);S=S===A?A-1:A;for(let E=0;E<S;E++){l=Math.ceil(v/2),u=Math.ceil(b/2);const T=new OffscreenCanvas(l,u);T.getContext("2d").drawImage(t,0,0,v,b,0,0,l,u),v=l,b=u,t!==e&&t.close(),t=T.transferToImageBitmap()}const x=Math.min(o/l,o/u);l=Math.round(l*x),u=Math.round(u*x)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const p=f.getImageData(0,0,l,u).data;return[this.#d(p),l,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},o,l,u,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const g=200,v=p.font=`${n} ${r} ${g}px ${e}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:S,actualBoundingBoxAscent:A,actualBoundingBoxDescent:x,fontBoundingBoxAscent:E,fontBoundingBoxDescent:T,width:C}=p.measureText(t),D=1.5,R=Math.ceil(Math.max(Math.abs(b)+Math.abs(S)||0,C)*D),N=Math.ceil(Math.max(Math.abs(A)+Math.abs(x)||g,Math.abs(E)+Math.abs(T)||g)*D);f=new OffscreenCanvas(R,N),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,R,N),p.fillStyle="black",p.fillText(t,R*(D-1)/2,N*(3-D)/2);const B=this.#d(p.getImageData(0,0,R,N).data),I=this.#l(B),q=this.#h(I),K=this.#s(B,R,N,q);return this.processDrawnLines({lines:{curves:K,width:R,height:N},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,o){const[l,u,d]=this.#f(t),[f,p]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),g=this.#h(p),v=this.#s(f,u,d,g);return this.processDrawnLines({lines:{curves:v,width:u,height:d},pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([e,n]=[n,e]);const{curves:d,width:f,height:p}=t,g=t.thickness??0,v=[],b=Math.min(e/f,n/p),S=b/e,A=b/n,x=[];for(const{points:T}of d){const C=l?this.#o(T):T;if(!C)continue;x.push(C);const D=C.length,R=new Float32Array(D),N=new Float32Array(3*(D===2?2:D-2));if(v.push({line:N,points:R}),D===2){R[0]=C[0]*S,R[1]=C[1]*A,N.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[B,I,q,K]=C;B*=S,I*=A,q*=S,K*=A,R.set([B,I,q,K],0),N.set([NaN,NaN,NaN,NaN,B,I],0);for(let J=4;J<D;J+=2){const ot=R[J]=C[J]*S,dt=R[J+1]=C[J+1]*A;N.set(nt.createBezierPoints(B,I,q,K,ot,dt),(J-2)*3),[B,I,q,K]=[q,K,ot,dt]}}if(v.length===0)return null;const E=u?new Vf:new Qo;return E.build(v,e,n,1,r,u?0:g,o),{outline:E,newCurves:x,areContours:u,thickness:g,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:o}){let l=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let D=2,R=C.length;D<R;D++){const N=C[D]-C[D-2];l=Math.min(l,N),u=Math.max(u,N)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,g=Rc+uo*p,v=new Uint32Array(g);let b=0;v[b++]=g*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,v[b++]=0,v[b++]=r,v[b++]=o,v[b++]=e?0:1,v[b++]=Math.max(0,Math.floor(n??0)),v[b++]=p,v[b++]=f.BYTES_PER_ELEMENT;for(const C of t)v[b++]=C.length-2,v[b++]=C[0],v[b++]=C[1];const S=new CompressionStream("deflate-raw"),A=S.writable.getWriter();await A.ready,A.write(v);const x=f.prototype.constructor;for(const C of t){const D=new x(C.length-2);for(let R=2,N=C.length;R<N;R++)D[R-2]=C[R]-C[R-2];A.write(D)}A.close();const E=await new Response(S.readable).arrayBuffer(),T=new Uint8Array(E);return a1(T)}static async decompressSignature(t){try{const e=BL(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const C of n)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,u),u+=C.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],g=d[3],v=d[4]===0,b=d[5],S=d[6],A=d[7],x=[],E=(Rc+uo*S)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(A){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,E);break}u=0;for(let C=0;C<S;C++){const D=d[uo*C+Rc],R=new Float32Array(D+2);x.push(R);for(let N=0;N<uo-1;N++)R[N]=d[uo*C+Rc+N+1];for(let N=0;N<D;N++)R[N+2]=R[N]+T[u++]}return{areContours:v,thickness:b,outlines:x,width:p,height:g}}catch(e){return At(`decompressSignature: ${e}`),null}}}class Kp extends U1{constructor(){super(),super.updateProperties({fill:ht._defaultLineColor,"stroke-width":0})}clone(){const t=new Kp;return t.updateAll(this),t}}class Wp extends ru{constructor(t){super(t),super.updateProperties({stroke:ht._defaultLineColor,"stroke-width":1})}clone(){const t=new Wp(this._viewParameters);return t.updateAll(this),t}}class $n extends mt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=bt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ht.initialize(t,e),this._defaultDrawingOptions=new Kp,this._defaultDrawnSignatureOptions=new Wp(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:r,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:g},rotation:v}=this.parent.viewport,b=Ms.processDrawnLines({lines:r,pageWidth:p,pageHeight:g,rotation:v,innerMargin:$n._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:r,height:o}=this.#i,l=Math.max(r,o),u=Ms.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:n,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,r){const{x:o,y:l}=this,{outline:u}=this.#i=t;this.#t=u instanceof Vf,this.description=n;let d;this.#t?d=$n.getDefaultDrawingOptions():(d=$n._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return Ms.process(t,e,n,r,$n._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Ms.extractContoursFromText(t,e,n,r,o,$n._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return Ms.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:$n._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=$n.getDefaultDrawingOptions():(this._drawingOptions=$n._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:e,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,n,r,o,l){return l.areContours?Vf.deserialize(t,e,n,r,o,l):Qo.deserialize(t,e,n,r,o,l)}static async deserialize(t,e,n){const r=await super.deserialize(t,e,n);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#n=t.uuid,r}}class dO extends ht{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=bt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ht.initialize(t,e)}static isHandlingMimeForPasting(t){return Yc.includes(t)}static paste(t,e){e.pasteEditor({mode:bt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await n.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#h(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Yc.join(",");const e=this._uiManager._signal;this.#i=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,r&&(this.#t=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:n}=this.#t;const[r,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*r,n=this.height*o;else if(e>l*r||n>l*o){const d=Math.min(l*r/e,l*o/n);e*=d,n*=d}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/r,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:r,height:o}=this.#t,l=new In;let u=this.#t,d=r,f=o,p=null;if(e){if(r>e||o>e){const N=Math.min(e/r,e/o);d=Math.floor(r*N),f=Math.floor(o*N)}p=document.createElement("canvas");const v=p.width=Math.ceil(d*l.sx),b=p.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(v,b));const S=p.getContext("2d");S.filter=this._uiManager.hcmFilter;let A="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":UL.isDarkMode&&(A="#8f8f9d",x="#42414d");const E=15,T=E*l.sx,C=E*l.sy,D=new OffscreenCanvas(T*2,C*2),R=D.getContext("2d");R.fillStyle=A,R.fillRect(0,0,T*2,C*2),R.fillStyle=x,R.fillRect(0,0,T,C),R.fillRect(T,C,T,C),S.fillStyle=S.createPattern(D,"repeat"),S.fillRect(0,0,v,b),S.drawImage(u,0,0,u.width,u.height,0,0,v,b)}let g=null;if(n){let v,b;if(l.symmetric&&u.width<t&&u.height<t)v=u.width,b=u.height;else if(u=this.#t,r>t||o>t){const x=Math.min(t/r,t/o);v=Math.floor(r*x),b=Math.floor(o*x),this.#l||(u=this.#u(v,b))}const A=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});A.drawImage(u,0,0,u.width,u.height,0,0,v,b),g={width:v,height:b,data:A.getImageData(0,0,v,b).data}}return{canvas:p,width:d,height:f,imageData:g}}#u(t,e){const{width:n,height:r}=this.#t;let o=n,l=r,u=this.#t;for(;o>2*t||l>2*e;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(u,0,0,d,f,0,0,o,l),u=p.transferToImageBitmap()}return u}#m(){const[t,e]=this.parentDimensions,{width:n,height:r}=this,o=new In,l=Math.ceil(n*t*o.sx),u=Math.ceil(r*e*o.sy),d=this.#a;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=this.#l?this.#t:this.#u(l,u),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,r=Math.round(this.width*e*Us.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Us.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let r=null,o=!1;if(t instanceof B1){const{data:{rect:A,rotation:x,id:E,structParent:T,popupRef:C,richText:D,contentsObj:R,creationDate:N,modificationDate:B},container:I,parent:{page:{pageNumber:q}},canvas:K}=t;let J,ot;K?(delete t.canvas,{id:J,bitmap:ot}=n.imageManager.getFromCanvas(I.id,K),K.remove()):(o=!0,t._hasNoCanvas=!0);const dt=(await e._structTree.getAriaAttributes(`${Op}${E}`))?.get("aria-label")||"";r=t={annotationType:bt.STAMP,bitmapId:J,bitmap:ot,pageIndex:q-1,rect:A.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:dt},isSvg:!1,structParent:T,popupRef:C,richText:D,comment:R?.str||null,creationDate:N,modificationDate:B}}const l=await super.deserialize(t,e,n),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:p,isSvg:g,accessibilityData:v}=t;o?(n.addMissingCanvas(t.id,l),l.#o=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,d&&(l.#t=d)):l.#n=f,l.#l=g;const[b,S]=l.pageDimensions;return l.width=(u[2]-u[0])/b,l.height=(u[3]-u[1])/S,v&&(l.altTextData=v),l._initialData=r,t.comment&&l.setCommentData(t),l.#d=!!r,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#b(n);return u.isSame?null:(u.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return n}#b(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,r=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Wn{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([Ce,$p,dO,pe,$n].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:p}){const g=[...Wn.#m.values()];if(!Wn._initialized){Wn._initialized=!0;for(const v of g)v.initialize(p,t)}t.registerEditorTypes(g),this.#u=t,this.pageIndex=e,this.div=n,this.#t=o,this.#i=l,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===bt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case bt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===bt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of Wn.#m.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#i;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const n=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:u,timeStamp:d}=r,f=this.#p;if(d-f>500){this.#p=d;return}this.#p=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const g=document.elementsFromPoint(l,u);if(p.toggle("getElements",!1),!this.div.contains(g[0]))return;let v;const b=new RegExp(`^${Lo}[0-9]+$`);for(const A of g)if(b.test(A.id)){v=A.id;break}if(!v)return;const S=this.#s.get(v);S?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),S.dblclick(r))},{signal:n,capture:!0})}const t=this.#i;if(t){const n=new Map,r=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let d=r.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=n.get(u),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const n of Wn.#m.values())e.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#b(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:n}=Me.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),pe.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ht.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#s.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Wn.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:r}=this.#E(),o=this.getNextId(),l=this.#T({parent:this,id:o,x:n,y:r,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Wn.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),o=this.#T({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#E(){const{x:t,y:e,width:n,height:r}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+r),f=(o+u)/2-t,p=(l+d)/2-e,[g,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:g,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Me.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===bt.STAMP||n===bt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=Me.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const r=this.#u.findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ns(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ns(this.div,{rotation:n}),e!==n)for(const r of this.#s.values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Re{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return wt(this,"_svgFactory",new Bo)}static#r(t,[e,n,r,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#s(){const t=Re._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const n=Re._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Re._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r}#o(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)}draw(t,e=!1,n=!1){const r=Re.#n++,o=this.#s(),l=Re._svgFactory.createElement("defs");o.append(l);const u=Re._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(r,u);const f=n?this.#a(l,d):null,p=Re._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=Re.#n++,r=this.#s(),o=Re._svgFactory.createElement("defs");r.append(o);const l=Re._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const g=Re._svgFactory.createElement("mask");o.append(g),d=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const v=Re._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const b=Re._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const f=Re._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(n,r),n}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:r,rootClass:o,path:l}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(n&&this.#o(u,n),r&&Re.#r(u,r),o){const{classList:d}=u;for(const[f,p]of Object.entries(o))d.toggle(f,p)}if(l){const f=u.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Uf};globalThis.pdfjsLib={AbortException:Ti,AnnotationEditorLayer:Wn,AnnotationEditorParamsType:Rt,AnnotationEditorType:bt,AnnotationEditorUIManager:_i,AnnotationLayer:Yp,AnnotationMode:Qn,AnnotationType:fe,applyOpacity:u1,build:L1,ColorPicker:pn,createValidAbsoluteUrl:Dp,CSSConstants:c1,DOMSVGFactory:Bo,DrawLayer:Re,FeatureTest:Me,fetchData:sr,findContrastColor:h1,getDocument:zp,getFilenameFromUrl:r1,getPdfFilenameFromUrl:o1,getRGB:ar,getUuid:Pp,getXfaPageViewport:l1,GlobalWorkerOptions:Ji,ImageKind:So,InvalidPDFException:qc,isDataScheme:Yo,isPdfFile:su,isValidExplicitDest:m1,MathClamp:je,noContextMenu:gn,normalizeUnicode:s1,OPS:Wa,OutputScale:In,PasswordResponses:n1,PDFDataRangeTransport:Gp,PDFDateString:Xc,PDFWorker:Qa,PermissionFlag:e1,PixelsPerInch:Us,RenderingCancelledException:iu,renderRichText:kp,ResponseException:Po,setLayerDimensions:ns,shadow:wt,SignatureExtractor:Ms,stopEvent:te,SupportedImageMimeTypes:Yc,TextLayer:No,TouchManager:Ko,updateUrlHash:Lp,Util:it,VerbosityLevel:Go,version:D1,XfaLayer:Np};const fO=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Ti,AnnotationEditorLayer:Wn,AnnotationEditorParamsType:Rt,AnnotationEditorType:bt,AnnotationEditorUIManager:_i,AnnotationLayer:Yp,AnnotationMode:Qn,AnnotationType:fe,CSSConstants:c1,ColorPicker:pn,DOMSVGFactory:Bo,DrawLayer:Re,FeatureTest:Me,GlobalWorkerOptions:Ji,ImageKind:So,InvalidPDFException:qc,MathClamp:je,OPS:Wa,OutputScale:In,PDFDataRangeTransport:Gp,PDFDateString:Xc,PDFWorker:Qa,PasswordResponses:n1,PermissionFlag:e1,PixelsPerInch:Us,RenderingCancelledException:iu,ResponseException:Po,SignatureExtractor:Ms,SupportedImageMimeTypes:Yc,TextLayer:No,TouchManager:Ko,Util:it,VerbosityLevel:Go,XfaLayer:Np,applyOpacity:u1,build:L1,createValidAbsoluteUrl:Dp,fetchData:sr,findContrastColor:h1,getDocument:zp,getFilenameFromUrl:r1,getPdfFilenameFromUrl:o1,getRGB:ar,getUuid:Pp,getXfaPageViewport:l1,isDataScheme:Yo,isPdfFile:su,isValidExplicitDest:m1,noContextMenu:gn,normalizeUnicode:s1,renderRichText:kp,setLayerDimensions:ns,shadow:wt,stopEvent:te,updateUrlHash:Lp,version:D1},Symbol.toStringTag,{value:"Module"}));function j1(a){var t,e,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a)){var r=a.length;for(t=0;t<r;t++)a[t]&&(e=j1(a[t]))&&(n&&(n+=" "),n+=e)}else for(e in a)a[e]&&(n&&(n+=" "),n+=e);return n}function ou(){for(var a,t,e=0,n="",r=arguments.length;e<r;e++)(a=arguments[e])&&(t=j1(a))&&(n&&(n+=" "),n+=t);return n}var qb=Object.prototype.hasOwnProperty;function Xb(a,t,e){for(e of a.keys())if(qa(e,t))return e}function qa(a,t){var e,n,r;if(a===t)return!0;if(a&&t&&(e=a.constructor)===t.constructor){if(e===Date)return a.getTime()===t.getTime();if(e===RegExp)return a.toString()===t.toString();if(e===Array){if((n=a.length)===t.length)for(;n--&&qa(a[n],t[n]););return n===-1}if(e===Set){if(a.size!==t.size)return!1;for(n of a)if(r=n,r&&typeof r=="object"&&(r=Xb(t,r),!r)||!t.has(r))return!1;return!0}if(e===Map){if(a.size!==t.size)return!1;for(n of a)if(r=n[0],r&&typeof r=="object"&&(r=Xb(t,r),!r)||!qa(n[1],t.get(r)))return!1;return!0}if(e===ArrayBuffer)a=new Uint8Array(a),t=new Uint8Array(t);else if(e===DataView){if((n=a.byteLength)===t.byteLength)for(;n--&&a.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(a)){if((n=a.byteLength)===t.byteLength)for(;n--&&a[n]===t[n];);return n===-1}if(!e||typeof a=="object"){n=0;for(e in a)if(qb.call(a,e)&&++n&&!qb.call(t,e)||!(e in t)||!qa(a[e],t[e]))return!1;return Object.keys(t).length===n}}return a!==a&&t!==t}function Zo(a){let t=!1;return{promise:new Promise((n,r)=>{a.then(o=>!t&&n(o)).catch(o=>!t&&r(o))}),cancel(){t=!0}}}const pO=["onCopy","onCut","onPaste"],mO=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],gO=["onFocus","onBlur"],yO=["onInput","onInvalid","onReset","onSubmit"],vO=["onLoad","onError"],bO=["onKeyDown","onKeyPress","onKeyUp"],AO=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],SO=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],wO=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],EO=["onSelect"],xO=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],TO=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],_O=["onScroll"],CO=["onWheel"],RO=["onAnimationStart","onAnimationEnd","onAnimationIteration"],MO=["onTransitionEnd"],DO=["onToggle"],LO=["onChange"],PO=[...pO,...mO,...gO,...yO,...vO,...bO,...AO,...SO,...wO,...EO,...xO,...TO,..._O,...CO,...RO,...MO,...LO,...DO];function V1(a,t){const e={};for(const n of PO){const r=a[n];r&&(t?e[n]=(o=>r(o,t(n))):e[n]=r)}return e}var OO="Invariant failed";function Gt(a,t){if(!a)throw new Error(OO)}var af,Yb;function NO(){if(Yb)return af;Yb=1;var a=function(){};return af=a,af}var kO=NO();const Ve=eA(kO),z1=P.createContext(null),BO="noopener noreferrer nofollow";class FO{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Gt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Gt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||BO,t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{Gt(this.pdfDocument),Gt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Gt(Array.isArray(e));const n=e[0];new Promise(r=>{Gt(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{r(o)}).catch(()=>{Gt(!1)}):typeof n=="number"?r(n):Gt(!1)}).then(r=>{const o=r+1;Gt(this.pdfViewer),Gt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:r,pageNumber:o})})})}goToPage(t){const e=t-1;Gt(this.pdfViewer),Gt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Xa({children:a,type:t}){return j.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:a})}const $b={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function IO(a,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function Za(){return P.useReducer(IO,{value:void 0,error:void 0})}const lu=typeof window<"u",H1=lu&&window.location.protocol==="file:";function UO(a){return typeof a<"u"}function Cs(a){return UO(a)&&a!==null}function jO(a){return typeof a=="string"}function VO(a){return a instanceof ArrayBuffer}function zO(a){return Gt(lu),a instanceof Blob}function zf(a){return jO(a)&&/^data:/.test(a)}function Kb(a){Gt(zf(a));const[t="",e=""]=a.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function HO(){return lu&&window.devicePixelRatio||1}const G1="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Wb(){Ve(!H1,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${G1}`)}function GO(){Ve(!H1,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${G1}`)}function Vs(a){a?.cancel&&a.cancel()}function Hf(a,t){return Object.defineProperty(a,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(a,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(a,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(a,"originalHeight",{get(){return this.view[3]},configurable:!0}),a}function qO(a){return a.name==="RenderingCancelledException"}function XO(a){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=r=>{if(!r.target)return e(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(a)})}const{PDFDataRangeTransport:YO}=fO,$O=(a,t)=>{switch(t){case $b.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");a(e);break}case $b.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");a(e);break}}};function Qb(a){return typeof a=="object"&&a!==null&&("data"in a||"range"in a||"url"in a)}const KO=P.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:d,loading:f="Loading PDF",noData:p="No PDF file specified.",onItemClick:g,onLoadError:v,onLoadProgress:b,onLoadSuccess:S,onPassword:A=$O,onSourceError:x,onSourceSuccess:E,options:T,renderMode:C,rotate:D,scale:R,...N},B){const[I,q]=Za(),{value:K,error:J}=I,[ot,dt]=Za(),{value:at,error:ct}=ot,k=P.useRef(new FO),z=P.useRef([]),Q=P.useRef(void 0),lt=P.useRef(void 0);l&&l!==Q.current&&Qb(l)&&(Ve(!qa(l,Q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Q.current=l),T&&T!==lt.current&&(Ve(!qa(T,lt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),lt.current=T);const L=P.useRef({scrollPageIntoView:Dt=>{const{dest:Ft,pageNumber:ue,pageIndex:ge=ue-1}=Dt;if(g){g({dest:Ft,pageIndex:ge,pageNumber:ue});return}const De=z.current[ge];if(De){De.scrollIntoView();return}Ve(!1,`An internal link leading to page ${ue} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(B,()=>({linkService:k,pages:z,viewer:L}),[]);function Y(){E&&E()}function tt(){J&&(Ve(!1,J.toString()),x&&x(J))}function Z(){q({type:"RESET"})}P.useEffect(Z,[l,q]);const et=P.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return zf(l)?{data:Kb(l)}:(Wb(),{url:l});if(l instanceof YO)return{range:l};if(VO(l))return{data:l};if(lu&&zO(l))return{data:await XO(l)};if(Gt(typeof l=="object"),Gt(Qb(l)),"url"in l&&typeof l.url=="string"){if(zf(l.url)){const{url:Dt,...Ft}=l;return{data:Kb(Dt),...Ft}}Wb()}return l},[l]);P.useEffect(()=>{const Dt=Zo(et());return Dt.promise.then(Ft=>{q({type:"RESOLVE",value:Ft})}).catch(Ft=>{q({type:"REJECT",error:Ft})}),()=>{Vs(Dt)}},[et,q]),P.useEffect(()=>{if(!(typeof K>"u")){if(K===!1){tt();return}Y()}},[K]);function vt(){at&&(S&&S(at),z.current=new Array(at.numPages),k.current.setDocument(at))}function rt(){ct&&(Ve(!1,ct.toString()),v&&v(ct))}P.useEffect(function(){dt({type:"RESET"})},[dt,K]),P.useEffect(function(){if(!K)return;const Ft=T?{...K,...T}:K,ue=zp(Ft);b&&(ue.onProgress=b),A&&(ue.onPassword=A);const ge=ue,De=ge.promise.then(rs=>{dt({type:"RESOLVE",value:rs})}).catch(rs=>{ge.destroyed||dt({type:"REJECT",error:rs})});return()=>{De.finally(()=>ge.destroy())}},[T,dt,K]),P.useEffect(()=>{if(!(typeof at>"u")){if(at===!1){rt();return}vt()}},[at]),P.useEffect(function(){k.current.setViewer(L.current),k.current.setExternalLinkRel(r),k.current.setExternalLinkTarget(o)},[r,o]);const Et=P.useCallback((Dt,Ft)=>{z.current[Dt]=Ft},[]),Mt=P.useCallback(Dt=>{delete z.current[Dt]},[]),Yt=P.useMemo(()=>({imageResourcesPath:d,linkService:k.current,onItemClick:g,pdf:at,registerPage:Et,renderMode:C,rotate:D,scale:R,unregisterPage:Mt}),[d,g,at,Et,C,D,R,Mt]),zt=P.useMemo(()=>V1(N,()=>at),[N,at]);function $e(){function Dt(ue){return!!ue?.pdf}if(!Dt(Yt))throw new Error("pdf is undefined");const Ft=typeof t=="function"?t(Yt):t;return j.jsx(z1.Provider,{value:Yt,children:Ft})}function an(){return l?at==null?j.jsx(Xa,{type:"loading",children:typeof f=="function"?f():f}):at===!1?j.jsx(Xa,{type:"error",children:typeof n=="function"?n():n}):$e():j.jsx(Xa,{type:"no-data",children:typeof p=="function"?p():p})}return j.jsx("div",{className:ou("react-pdf__Document",e),ref:u,...zt,children:an()})});function q1(){return P.useContext(z1)}function X1(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];var e=a.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(o){for(var l=0,u=e;l<u.length;l++){var d=u[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const Y1=P.createContext(null);function cu(){return P.useContext(Y1)}function WO(){const a=q1(),t=cu();Gt(t);const e={...a,...t},{imageResourcesPath:n,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:f,pdf:p,renderForms:g,rotate:v,scale:b=1}=e;Gt(p),Gt(f),Gt(r);const[S,A]=Za(),{value:x,error:E}=S,T=P.useRef(null);Ve(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){x&&l&&l(x)}function D(){E&&(Ve(!1,E.toString()),o&&o(E))}P.useEffect(function(){A({type:"RESET"})},[A,f]),P.useEffect(function(){if(!f)return;const q=Zo(f.getAnnotations()),K=q;return q.promise.then(J=>{A({type:"RESOLVE",value:J})}).catch(J=>{A({type:"REJECT",error:J})}),()=>{Vs(K)}},[A,f]),P.useEffect(()=>{if(x!==void 0){if(x===!1){D();return}C()}},[x]);function R(){d&&d()}function N(I){Ve(!1,`${I}`),u&&u(I)}const B=P.useMemo(()=>f.getViewport({scale:b,rotation:v}),[f,v,b]);return P.useEffect(function(){if(!p||!f||!r||!x)return;const{current:q}=T;if(!q)return;const K=B.clone({dontFlip:!0}),J={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:p.annotationStorage,commentManager:null,div:q,l10n:null,linkService:r,page:f,structTreeLayer:null,viewport:K},ot={annotations:x,annotationStorage:p.annotationStorage,div:q,imageResourcesPath:n,linkService:r,page:f,renderForms:g,viewport:K};q.innerHTML="";try{new Yp(J).render(ot),R()}catch(dt){N(dt)}return()=>{}},[x,n,r,f,p,g,B]),j.jsx("div",{className:ou("react-pdf__Page__annotations","annotationLayer"),ref:T})}const $1={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},QO=/^H(\d+)$/;function ZO(a){return a in $1}function uu(a){return"children"in a}function K1(a){return uu(a)?a.children.length===1&&0 in a.children&&"id"in a.children[0]:!1}function JO(a){const t={};if(uu(a)){const{role:e}=a,n=e.match(QO);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(ZO(e)){const r=$1[e];r&&(t.role=r)}}return t}function W1(a){const t={};if(uu(a)){if(a.alt!==void 0&&(t["aria-label"]=a.alt),a.lang!==void 0&&(t.lang=a.lang),K1(a)){const[e]=a.children;if(e){const n=W1(e);return{...t,...n}}}}else"id"in a&&(t["aria-owns"]=a.id);return t}function tN(a){return a?{...JO(a),...W1(a)}:null}function Q1({className:a,node:t}){const e=P.useMemo(()=>tN(t),[t]),n=P.useMemo(()=>!uu(t)||K1(t)?null:t.children.map((r,o)=>j.jsx(Q1,{node:r},o)),[t]);return j.jsx("span",{className:a,...e,children:n})}function eN(){const a=cu();Gt(a);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=a,[n,r]=Za(),{value:o,error:l}=n,{customTextRenderer:u,page:d}=a;function f(){o&&e&&e(o)}function p(){l&&(Ve(!1,l.toString()),t&&t(l))}return P.useEffect(function(){r({type:"RESET"})},[r,d]),P.useEffect(function(){if(u||!d)return;const v=Zo(d.getStructTree()),b=v;return v.promise.then(S=>{r({type:"RESOLVE",value:S})}).catch(S=>{r({type:"REJECT",error:S})}),()=>Vs(b)},[u,d,r]),P.useEffect(()=>{if(o!==void 0){if(o===!1){p();return}f()}},[o]),o?j.jsx(Q1,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Zb=Qn;function nN(a){const t=cu();Gt(t);const e={...t,...a},{_className:n,canvasBackground:r,devicePixelRatio:o=HO(),onRenderError:l,onRenderSuccess:u,page:d,renderForms:f,renderTextLayer:p,rotate:g,scale:v}=e,{canvasRef:b}=a;Gt(d);const S=P.useRef(null);function A(){d&&u&&u(Hf(d,v))}function x(D){qO(D)||(Ve(!1,D.toString()),l&&l(D))}const E=P.useMemo(()=>d.getViewport({scale:v*o,rotation:g}),[o,d,g,v]),T=P.useMemo(()=>d.getViewport({scale:v,rotation:g}),[d,g,v]);P.useEffect(function(){if(!d)return;d.cleanup();const{current:R}=S;if(!R)return;R.width=E.width,R.height=E.height,R.style.width=`${Math.floor(T.width)}px`,R.style.height=`${Math.floor(T.height)}px`,R.style.visibility="hidden";const N={annotationMode:f?Zb.ENABLE_FORMS:Zb.ENABLE,canvas:R,canvasContext:R.getContext("2d",{alpha:!1}),viewport:E};r&&(N.background=r);const B=d.render(N),I=B;return B.promise.then(()=>{R.style.visibility="",A()}).catch(x),()=>Vs(I)},[r,d,f,E,T]);const C=P.useCallback(()=>{const{current:D}=S;D&&(D.width=0,D.height=0)},[]);return P.useEffect(()=>C,[C]),j.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:X1(b,S),style:{display:"block",userSelect:"none"},children:p?j.jsx(eN,{}):null})}function iN(a){return"str"in a}function sN(){const a=cu();Gt(a);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:d,rotate:f,scale:p}=a;Gt(l);const[g,v]=Za(),{value:b,error:S}=g,A=P.useRef(null);Ve(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function x(){b&&n&&n(b)}function E(){S&&(Ve(!1,S.toString()),e&&e(S))}P.useEffect(function(){v({type:"RESET"})},[l,v]),P.useEffect(function(){if(!l)return;const I=Zo(l.getTextContent()),q=I;return I.promise.then(K=>{v({type:"RESOLVE",value:K})}).catch(K=>{v({type:"REJECT",error:K})}),()=>Vs(q)},[l,v]),P.useEffect(()=>{if(b!==void 0){if(b===!1){E();return}x()}},[b]);const T=P.useCallback(()=>{o&&o()},[o]),C=P.useCallback(B=>{Ve(!1,B.toString()),r&&r(B)},[r]);function D(){const B=A.current;B&&B.classList.add("selecting")}function R(){const B=A.current;B&&B.classList.remove("selecting")}const N=P.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);return P.useLayoutEffect(function(){if(!l||!b)return;const{current:I}=A;if(!I)return;I.innerHTML="";const q=l.streamTextContent({includeMarkedContent:!0}),K={container:I,textContentSource:q,viewport:N},J=new No(K),ot=J;return J.render().then(()=>{const dt=document.createElement("div");dt.className="endOfContent",I.append(dt);const at=I.querySelectorAll('[role="presentation"]');if(t){let ct=0;b.items.forEach((k,z)=>{if(!iN(k))return;const Q=at[ct];if(!Q)return;const lt=t({pageIndex:u,pageNumber:d,itemIndex:z,...k});Q.innerHTML=lt,ct+=k.str&&k.hasEOL?2:1})}T()}).catch(C),()=>Vs(ot)},[t,C,T,l,u,d,b,N]),j.jsx("div",{className:ou("react-pdf__Page__textContent","textLayer"),onMouseUp:R,onMouseDown:D,ref:A})}const Jb=1;function aN(a){const e={...q1(),...a},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:l,children:u,className:d,customRenderer:f,customTextRenderer:p,devicePixelRatio:g,error:v="Failed to load the page.",height:b,inputRef:S,loading:A="Loading page",noData:x="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:D,onGetTextError:R,onGetTextSuccess:N,onLoadError:B,onLoadSuccess:I,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:K,onRenderError:J,onRenderSuccess:ot,onRenderTextLayerError:dt,onRenderTextLayerSuccess:at,pageIndex:ct,pageNumber:k,pdf:z,registerPage:Q,renderAnnotationLayer:lt=!0,renderForms:L=!1,renderMode:Y="canvas",renderTextLayer:tt=!0,rotate:Z,scale:et=Jb,unregisterPage:vt,width:rt,...Et}=e,[Mt,Yt]=Za(),{value:zt,error:$e}=Mt,an=P.useRef(null);Gt(z);const Dt=Cs(k)?k-1:ct??null,Ft=k??(Cs(ct)?ct+1:null),ue=Z??(zt?zt.rotate:null),ge=P.useMemo(()=>{if(!zt)return null;let ae=1;const He=et??Jb;if(rt||b){const re=zt.getViewport({scale:1,rotation:ue});rt?ae=rt/re.width:b&&(ae=b/re.height)}return He*ae},[b,zt,ue,et,rt]);P.useEffect(function(){return()=>{Cs(Dt)&&r&&vt&&vt(Dt)}},[r,z,Dt,vt]);function De(){if(I){if(!zt||!ge)return;I(Hf(zt,ge))}if(r&&Q){if(!Cs(Dt)||!an.current)return;Q(Dt,an.current)}}function rs(){$e&&(Ve(!1,$e.toString()),B&&B($e))}P.useEffect(function(){Yt({type:"RESET"})},[Yt,z,Dt]),P.useEffect(function(){if(!z||!Ft)return;const He=Zo(z.getPage(Ft)),re=He;return He.promise.then(rr=>{Yt({type:"RESOLVE",value:rr})}).catch(rr=>{Yt({type:"REJECT",error:rr})}),()=>Vs(re)},[Yt,z,Ft]),P.useEffect(()=>{if(zt!==void 0){if(zt===!1){rs();return}De()}},[zt,ge]);const qs=P.useMemo(()=>Cs(Dt)&&Ft&&Cs(ue)&&Cs(ge)?{_className:n,canvasBackground:o,customTextRenderer:p,devicePixelRatio:g,onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:D,onGetTextError:R,onGetTextSuccess:N,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:K,onRenderError:J,onRenderSuccess:ot,onRenderTextLayerError:dt,onRenderTextLayerSuccess:at,page:zt,pageIndex:Dt,pageNumber:Ft,renderForms:L,renderTextLayer:tt,rotate:ue,scale:ge}:null,[n,o,p,g,E,T,C,D,R,N,q,K,J,ot,dt,at,zt,Dt,Ft,L,tt,ue,ge]),Jo=P.useMemo(()=>V1(Et,()=>zt&&(ge?Hf(zt,ge):void 0)),[Et,zt,ge]),ii=`${Dt}@${ge}/${ue}`;function hu(){switch(Y){case"custom":return Gt(f),j.jsx(f,{},`${ii}_custom`);case"none":return null;case"canvas":default:return j.jsx(nN,{canvasRef:l},`${ii}_canvas`)}}function tl(){return tt?j.jsx(sN,{},`${ii}_text`):null}function du(){return lt?j.jsx(WO,{},`${ii}_annotations`):null}function fu(){function ae(re){return!!re?.page}if(!ae(qs))throw new Error("page is undefined");const He=typeof u=="function"?u(qs):u;return j.jsxs(Y1.Provider,{value:qs,children:[hu(),tl(),du(),He]})}function os(){return Ft?z===null||zt===void 0||zt===null?j.jsx(Xa,{type:"loading",children:typeof A=="function"?A():A}):z===!1||zt===!1?j.jsx(Xa,{type:"error",children:typeof v=="function"?v():v}):fu():j.jsx(Xa,{type:"no-data",children:typeof x=="function"?x():x})}return j.jsx("div",{className:ou(n,d),"data-page-number":Ft,ref:X1(S,an),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ge}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Jo,children:os()})}GO();Ji.workerSrc="pdf.worker.mjs";const rN="/landing-page/assets/pdf.worker.min-qwK7q_zL.mjs",oN="/landing-page/assets/letas-IbLVWxtn.pdf";Ji.workerSrc=rN;function lN(){const[a,t]=P.useState(null),[e,n]=P.useState(1),[r,o]=P.useState(!0),[l,u]=P.useState(900),[d,f]=P.useState(null),p=P.useRef(null);P.useEffect(()=>{function A(){if(p.current){const x=p.current.offsetWidth;u(Math.min(x,900))}}return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);function g({numPages:A}){t(A),n(1),o(!1)}function v(A){const{width:x,height:E}=A.getViewport({scale:1});f({width:x,height:E})}const b=d?.height&&d?.width?d.height/d.width:11/9.5,S=()=>j.jsx("div",{style:{width:`${l}px`,height:`${l*b}px`},className:"relative w-full aspect-[9.5/11] rounded-md overflow-hidden bg-gray-300",children:j.jsx("div",{className:" absolute inset-0 bg-gradient-to-r from-gray-300 via-gray-400 to-gray-300 [background-size:200%_100%] animate-[shimmer_1.8s_infinite_linear]"})});return j.jsxs("div",{ref:p,className:"flex flex-col w-full items-center",children:[j.jsx("div",{className:"rounded-md overflow-hidden",children:j.jsx(KO,{file:oN,onLoadSuccess:g,onLoadError:A=>console.error("PDF load error:",A),children:j.jsx(aN,{pageNumber:e,width:l,loading:j.jsx(S,{}),onLoadSuccess:v,renderTextLayer:!1})})}),!r&&a&&j.jsxs("div",{className:"mt-4 flex gap-4 items-center",children:[j.jsxs("button",{onClick:()=>n(A=>Math.max(A-1,1)),disabled:e<=1,className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 cursor-pointer",children:[j.jsx(AL,{})," Prev"]}),j.jsxs("span",{className:"text-gray-300",children:["Page ",e," of ",a]}),j.jsxs("button",{onClick:()=>n(A=>Math.min(A+1,a)),disabled:e>=a,className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 cursor-pointer",children:["Next ",j.jsx(SL,{})]})]})]})}function cN(){const{toggleTabState:a}=is();return j.jsx(ee.div,{viewport:{amount:.8},onViewportEnter:t=>a(parseInt(t.target.dataset.value)),id:"letas","data-value":4,className:"h-[calc(100vh-2.8rem)] snap-start snap-always",children:j.jsx("div",{className:"flex flex-col items-center w-full h-full gap-[2rem] overflow-auto p-[2rem] no-scrollbar",children:j.jsx(lN,{})})})}function tA(){return j.jsxs(j.Fragment,{children:[j.jsx(vL,{}),j.jsx(_L,{}),j.jsx(p_,{children:j.jsxs("div",{className:"flex flex-col",children:[j.jsx(yL,{}),j.jsx(hL,{}),j.jsx(dL,{}),j.jsx(fL,{}),j.jsx(cN,{}),j.jsx(TL,{}),j.jsx(xL,{})]})})]})}function uN(){return j.jsxs(fT,{children:[j.jsx(of,{path:"/",element:j.jsx(tA,{})}),j.jsx(of,{path:"/home",element:j.jsx(tA,{})})]})}wx.createRoot(document.getElementById("root")).render(j.jsx(P.StrictMode,{children:j.jsx(BT,{basename:"/landing-page",children:j.jsx(uN,{})})}));
